(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{UQSp:function(e,o,t){"use strict";o.a={name:"VueRemarkRoot",render(e){return e("div",null,this.$slots.default)}}},eL2j:function(e,o,t){"use strict";t.r(o);var r=t("KHd+"),s=t("UQSp"),n=t("Kw5r");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.a.config.optionMergeStrategies;var c={VueRemarkRoot:s.a},i=function(e){var o=e.options.components=e.options.components||{},t=e.options.computed=e.options.computed||{};Object.keys(c).forEach((function(e){"object"===a(c[e])&&"function"==typeof c[e].render||"function"==typeof c[e]&&"function"==typeof c[e].options.render?o[e]=c[e]:t[e]=function(){return c[e]}}))},d=n.a.config.optionMergeStrategies,p="__vueRemarkFrontMatter",l={excerpt:null,title:"Successful tests of XRT transfer between Sepolia and Rococo Asset Hub via Snowbridge",date:"2024-07-22T00:00:00.000Z",published:!0,locale:"en",cover_image:"./images/snowbridge-sepolia-rococo-tested/snowbridge-sepolia-rococo-tested.png",description:"We have successfully conducted tests transferring XRT tokens between the Sepolia and Rococo Asset Hub networks using the Snowbridge protocol.",abstract:"Snowbridge is a general purpose, trustless and decentralized bridge between Polkadot and Ethereum."};var f=function(e){e.options[p]&&(e.options[p]=l),n.a.util.defineReactive(e.options,p,l),e.options.computed=d.computed({$frontmatter:function(){return e.options[p]}},e.options.computed)},b=Object(r.a)({},(function(){var e=this,o=e._self._c;return o("VueRemarkRoot",[o("h2",{attrs:{id:"intro"}},[o("a",{attrs:{href:"#intro","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("Intro")]),o("p",[e._v("Hello everyone, as you know, the Robonomics project operates on two networks simultaneously: Ethereum and Kusama. Currently, there is no way to transfer the XRT token between these networks. Therefore, we are closely following the Snowbridge project, which is being developed as a universal bridge between Ethereum and Polkadot: "),o("a",{attrs:{href:"https://docs.snowbridge.network/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://docs.snowbridge.network/")])]),o("p",[e._v("Over the last month, we successfully transferred ERC20 XRT tokens between the test networks Sepolia and Rococo Asset Hub following the instructions from Snowbridge: ")]),o("p",[o("a",{attrs:{href:"https://docs.snowbridge.network/rococo-testnet/rococo-sepolia-token-transfers",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://docs.snowbridge.network/rococo-testnet/rococo-sepolia-token-transfers")])]),o("h2",{attrs:{id:"deploy-xrt-contract-and-register-token-on-the-snowbridge"}},[o("a",{attrs:{href:"#deploy-xrt-contract-and-register-token-on-the-snowbridge","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("Deploy XRT contract and register token on the Snowbridge")]),o("p",[e._v("First, the XRT contract was deployed on Sepolia: ")]),o("p",[o("a",{attrs:{href:"https://sepolia.etherscan.io/address/0x9e216c3aF5F0c6cE70851B93ddDB62573380CfEf",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://sepolia.etherscan.io/address/0x9e216c3aF5F0c6cE70851B93ddDB62573380CfEf")])]),o("p",[e._v("Since we needed to test sending our own token, we had to register it. This step consists of two parts: checking the required fee and registering the token:")]),o("ol",[o("li",[o("p",[e._v("To check the required fee, we called the "),o("code",{pre:!0},[e._v("quoteRegisterTokenFee")]),e._v(" method of the bridge contract ("),o("a",{attrs:{href:"https://sepolia.etherscan.io/address/0x5b4909ce6ca82d2ce23bd46738953c7959e710cd#readProxyContract",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://sepolia.etherscan.io/address/0x5b4909ce6ca82d2ce23bd46738953c7959e710cd#readProxyContract")]),e._v(") and received the value "),o("code",{pre:!0},[e._v("5000000500000000000")]),e._v(":\n"),o("rb-image",{attrs:{zoom:"",src:"./images/snowbridge-sepolia-rococo-tested/quoteRegisterTokenFee.png",alt:"quoteRegisterTokenFee"}})],1)]),o("li",[o("p",[e._v("To register the token, we called the "),o("code",{pre:!0},[e._v("registerToken")]),e._v(" method of the bridge contract ("),o("a",{attrs:{href:"https://sepolia.etherscan.io/address/0x5b4909ce6ca82d2ce23bd46738953c7959e710cd#writeProxyContract",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://sepolia.etherscan.io/address/0x5b4909ce6ca82d2ce23bd46738953c7959e710cd#writeProxyContract")]),e._v("), specifying the required fee and the address of the deployed token:\n"),o("rb-image",{attrs:{zoom:"",src:"./images/snowbridge-sepolia-rococo-tested/registerToken.png",alt:"registerToken"}})],1)])]),o("p",[e._v("The registration process should take about 30 minutes, and the new token should appear in the foreignAssets in Rococo Asset Hub. This can be checked using a chain state query in Rococo Asset Hub ("),o("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-asset-hub-rpc.polkadot.io#/chainstate",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-asset-hub-rpc.polkadot.io#/chainstate")]),e._v("):\n"),o("rb-image",{attrs:{zoom:"",src:"./images/snowbridge-sepolia-rococo-tested/foreign_asset_query.png",alt:"Check if token registered"}})],1),o("p",[e._v("After successful registration, we received the following response:")]),o("pre",[o("code",{pre:!0},[e._v("{\n    owner: 5GjRnmh5o3usSYzVmsxBWzHEpvJyHK4tKNPhjpUR3ASrruBy\n    issuer: 5GjRnmh5o3usSYzVmsxBWzHEpvJyHK4tKNPhjpUR3ASrruBy\n    admin: 5GjRnmh5o3usSYzVmsxBWzHEpvJyHK4tKNPhjpUR3ASrruBy\n    freezer: 5GjRnmh5o3usSYzVmsxBWzHEpvJyHK4tKNPhjpUR3ASrruBy\n    supply: 0\n    deposit: 100,000,000,000\n    minBalance: 1\n    isSufficient: false\n    accounts: 1\n    sufficients: 0\n    approvals: 0\n    status: Live\n}\n")])]),o("h2",{attrs:{id:"test-xrt-transfer-from-sepolia-to-rococo-asset-hub"}},[o("a",{attrs:{href:"#test-xrt-transfer-from-sepolia-to-rococo-asset-hub","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("Test XRT transfer from Sepolia to Rococo Asset Hub")]),o("p",[e._v("The next step was sending the XRT token from Sepolia to Rococo Asset Hub. For this, we performed the following actions:")]),o("ol",[o("li",[o("p",[e._v("First, we allowed the bridge contract to use 15 XRT from the account: ")]),o("p",[o("a",{attrs:{href:"https://sepolia.etherscan.io/address/0x9e216c3aF5F0c6cE70851B93ddDB62573380CfEf#writeContract",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://sepolia.etherscan.io/address/0x9e216c3aF5F0c6cE70851B93ddDB62573380CfEf#writeContract")]),o("rb-image",{attrs:{zoom:"",src:"./images/snowbridge-sepolia-rococo-tested/xrt_approve_snowbridge_as_spender.png",alt:"Approve XRT spender"}})],1)]),o("li",[o("p",[e._v("Then requested the fee required for sending the token:\n"),o("rb-image",{attrs:{zoom:"",src:"./images/snowbridge-sepolia-rococo-tested/quoteSendTokenFee.png",alt:"quoteSendTokenFee"}})],1)]),o("li",[o("p",[e._v("Initiated the transfer of XRT from Sepolia to Rococo Asset Hub following Snowbridge's instructions using the WETH example: "),o("a",{attrs:{href:"https://docs.snowbridge.network/rococo-testnet/rococo-sepolia-token-transfers#id-5.-send-weth-to-polkadot",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://docs.snowbridge.network/rococo-testnet/rococo-sepolia-token-transfers#id-5.-send-weth-to-polkadot")])]),o("p",[e._v("A critical note regarding the "),o("code",{pre:!0},[e._v("destinationAddress.data")]),e._v(' field: its value needed to be enclosed in quotes (e.g. "0xb0fca9a0c5e03ab5b2294784fbbabea010295b3e1e48575cfe18dc2172ef657d").')]),o("p",[e._v("At this stage, we encountered significant delays. Instead of the expected 30 minutes, the transaction took several days. Eventually, all our transfers were successfully completed.\nExample transaction: "),o("a",{attrs:{href:"https://sepolia.etherscan.io/tx/0xec539cd89cb955ffea2ff65cae6685a8abb0966a2c1b76876a308cc036cd18fb",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://sepolia.etherscan.io/tx/0xec539cd89cb955ffea2ff65cae6685a8abb0966a2c1b76876a308cc036cd18fb")])]),o("p",[e._v("The XRT balance on the target account in Rococo Asset Hub can be checked by sending a "),o("code",{pre:!0},[e._v("foreignAssets.account()")]),e._v(" request in chain state:\n"),o("rb-image",{attrs:{zoom:"",src:"./images/snowbridge-sepolia-rococo-tested/example_of_foreignAssets_account.png",alt:"Example of foreignAssets.account"}})],1),o("p",[e._v("Sent a total of 15 XRT, so the balance in Rococo Asset Hub looked like this:")]),o("pre",[o("code",{pre:!0},[e._v("{\n    balance: 15,000,000,000\n    status: Liquid\n    reason: Consumer\n    extra: null\n}\n")])])])]),o("h2",{attrs:{id:"test-xrt-transfer-from-rococo-asset-hub-to-sepolia"}},[o("a",{attrs:{href:"#test-xrt-transfer-from-rococo-asset-hub-to-sepolia","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("Test XRT transfer from Rococo Asset Hub to Sepolia")]),o("p",[e._v("The final step was sending XRT from Rococo Asset Hub back to Sepolia. We performed the following extrinsic in Rococo Asset Hub: ")]),o("p",[o("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-asset-hub-rpc.polkadot.io#/extrinsics/decode/0xe1028400b0fca9a0c5e03ab5b2294784fbbabea010295b3e1e48575cfe18dc2172ef657d01360c34e5d8f49f802fc1cc2413bfcd827b054b3ab1195bddcba0168dfaf9a47693b305b96e68d238d9adeed276452c2bc156b3bd189ba016543c354edd95ad81f501040000001f0b03020109079edaa8020300010300f42680c6a807de3cfdfcfe49583b01d80278a39e030400020209079edaa80203009e216c3af5f0c6ce70851b93dddb62573380cfef0002286bee0000000000",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-asset-hub-rpc.polkadot.io#/extrinsics/decode/0xe1028400b0fca9a0c5e03ab5b2294784fbbabea010295b3e1e48575cfe18dc2172ef657d01360c34e5d8f49f802fc1cc2413bfcd827b054b3ab1195bddcba0168dfaf9a47693b305b96e68d238d9adeed276452c2bc156b3bd189ba016543c354edd95ad81f501040000001f0b03020109079edaa8020300010300f42680c6a807de3cfdfcfe49583b01d80278a39e030400020209079edaa80203009e216c3af5f0c6ce70851b93dddb62573380cfef0002286bee0000000000")])]),o("p",[e._v("This transaction can be viewed in the Rococo Asset Hub block explorer: ")]),o("p",[o("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-asset-hub-rpc.polkadot.io#/explorer/query/0x3524f4bef9e736cdff1d812d79e130cf6ade7a3fe3222a0853772fd1b6c3c89a",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-asset-hub-rpc.polkadot.io#/explorer/query/0x3524f4bef9e736cdff1d812d79e130cf6ade7a3fe3222a0853772fd1b6c3c89a")])]),o("p",[e._v("The corresponding transaction in Sepolia:")]),o("p",[o("a",{attrs:{href:"https://sepolia.etherscan.io/tx/0xe8a95dca350143a0c41891137e332962f2918351dcfc2612519e69c7a5c46772",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("https://sepolia.etherscan.io/tx/0xe8a95dca350143a0c41891137e332962f2918351dcfc2612519e69c7a5c46772")])]),o("p",[e._v("This step was completed relatively quickly, within half an hour. As a result, 1 XRT was transferred back to Sepolia. The XRT balance in Rococo Asset Hub remained at 14 XRT:")]),o("pre",[o("code",{pre:!0},[e._v("{\n    balance: 14,000,000,000\n    status: Liquid\n    reason: Consumer\n    extra: null\n}\n")])])])}),[],!1,null,null,null);"function"==typeof i&&i(b),"function"==typeof f&&f(b);o.default=b.exports}}]);