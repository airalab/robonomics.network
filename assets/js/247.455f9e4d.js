(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{"2edI":function(t,e,o){"use strict";o.r(e);var a={components:{Spinner:()=>Promise.all([o.e(0),o.e(9)]).then(o.bind(null,"rLID"))},props:{book:{type:Object,required:!0},gateway:{type:String,required:!0,default:""}},data:()=>({booksLinks:{},loading:!0}),methods:{async fetchGateway(t){try{return(await fetch(t)).ok}catch{return!1}},async checkLocalStorage(t,e){const o={link:await this.fetchGateway(e+t.link)&&e?e+t.link:t.static,date:(new Date).toISOString()};return localStorage.setItem(t.name,JSON.stringify(o)),o},async checkLink(t){const e=localStorage.getItem(t.name);if(e){const o=JSON.parse(e),a=new Date,s=new Date(o.date);if(s.setDate(s.getDate()+7),a>s)return localStorage.removeItem(t.name),(await this.checkLocalStorage(t,this.gateway)).link;this.booksLinks[t.name]=o.link}else this.booksLinks[t.name]=(await this.checkLocalStorage(t,this.gateway)).link},async resolveLinks(){for(const t of this.book.options)await this.checkLink(t);this.loading=!1}},async mounted(){await this.resolveLinks()}},s=(o("Uic9"),o("KHd+")),i=Object(s.a)(a,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"e-books__item"},[e("g-link",{staticClass:"e-books__img",attrs:{to:t.booksLinks[t.book.options[0].name]||t.book.options[0].static}},[e("g-image",{attrs:{src:o("GSoK")("./"+t.book.img),quality:"75"}})],1),e("div",{staticClass:"e-books__content"},[e("div",{staticClass:"e-book__header"},[e("span",[t._v(t._s(t.book.year))]),e("h3",[t._v(" "+t._s(t.book.title)+" ")])]),t.loading?e("div",[e("Spinner")],1):e("div",{staticClass:"e-books__links"},t._l(t.book.options,(function(o){return e("g-link",{key:o.id,attrs:{to:t.booksLinks[o.name]||"#"}},[t._v("\n      "+t._s(o.text)+"\n      ")])})),1)])],1)}),[],!1,null,"22ecb2fa",null);e.default=i.exports},Uic9:function(t,e,o){"use strict";o("kRDP")},kRDP:function(t,e,o){}}]);