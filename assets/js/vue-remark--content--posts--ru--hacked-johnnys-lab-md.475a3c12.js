(window.webpackJsonp=window.webpackJsonp||[]).push([[300],{"2wtN":function(t,n,o){"use strict";o.r(n);var e=o("KHd+"),r=o("UQSp"),a=o("Kw5r");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a.a.config.optionMergeStrategies;var i={VueRemarkRoot:r.a},p=function(t){var n=t.options.components=t.options.components||{},o=t.options.computed=t.options.computed||{};Object.keys(i).forEach((function(t){"object"===s(i[t])&&"function"==typeof i[t].render||"function"==typeof i[t]&&"function"==typeof i[t].options.render?n[t]=i[t]:o[t]=function(){return i[t]}}))},c=a.a.config.optionMergeStrategies,l="__vueRemarkFrontMatter",m={excerpt:null,title:"Лаборатория Джонни Взломана",date:"2024-06-25T00:00:00.000Z",published:!0,locale:"ru",tags:["Events","Online school","Web3"],cover_image:"../images/hacked-johnnys-lab/cover.png",description:"Недавно прошло событие «Взлом Лаборатории Джонни» от Robonomics, и я действительно считаю, что смог взломать ее! За исключением очень первой попытки, которую я проиграл из-за недопонимания правил, я выиграл каждый раунд, в котором принимал участие, и вот небольшая история «как это было».",abstract:"Привет! На связи PaTara. Недавно прошло событие «Взлом Лаборатории Джонни» от Robonomics, и я действительно считаю, что смог взломать ее! За исключением очень первой попытки, которую я проиграл из-за недопонимания правил, я выиграл каждый раунд, в котором принимал участие, и вот небольшая история «как это было». "};var u=function(t){t.options[l]&&(t.options[l]=m),a.a.util.defineReactive(t.options,l,m),t.options.computed=c.computed({$frontmatter:function(){return t.options[l]}},t.options.computed)},f=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("VueRemarkRoot",[n("p",[t._v("Итак, краткий и необходимый обзор правил: 12 слов в смешанном порядке, 5-минутное видео о том, как TurtleBot 4 бродит по лаборатории и нарушает порядок слов мнемонической фразы, 5–20 участников, желающих победить, и свободное воскресенье для придумывания стратегии.")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/0.png",alt:"Game Interface"}}),n("p",[t._v("Я довольно хорошо разбираюсь в программировании, у меня есть хороший ноутбук и почти нет навыков распознавания изображений. Более того, \nЯ решил играть честно, что означает отсутствие загрузки видео, злоупотребления скоростью воспроизведения, навигации по плейбару. \nТак что выбранная стратегия была хорошо знакомым методом брутфорса. Звучит больше как взлом, чем что-то еще.\nЧто у нас здесь: набор из 12 слов в перемешанном порядке. Это дает нам 12! (факториал) вариантов фраз \n(479’001’600, чтобы быть точным). Довольно большое количество для обработки!")]),n("h2",{attrs:{id:"стратегия-1-глупая-и-прямолинейная"}},[n("a",{attrs:{href:"#%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B5%D0%B3%D0%B8%D1%8F-1-%D0%B3%D0%BB%D1%83%D0%BF%D0%B0%D1%8F-%D0%B8-%D0%BF%D1%80%D1%8F%D0%BC%D0%BE%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D0%B0%D1%8F","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),t._v("Стратегия 1: глупая и прямолинейная.")]),n("p",[t._v("Ну что еще мне нужно, просто иди и разберись! Но вот первый трюк: 12! мнемонических фраз просто не помещаются \nмои 64 ГБ ОЗУ! Я получил ошибку SIGTERM в консоли IDE. \nПоэтому я создал "),n("a",{attrs:{href:"https://docs.python.org/3/library/itertools.html#itertools.permutations",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("итератор")]),t._v(" и запустил процесс.\nМне потребовалось некоторое время, не уверен точно, сколько, но в пределах 30 секунд, чтобы подсчитать количество комбинаций.\nПросто оценочный запуск. Но дело в том, что мой ноутбук даже не включил максимальную скорость вентиляторов! Был загружен только один ядро. ")]),n("p",[t._v("Я нашел в Интернете пакет Python "),n("a",{attrs:{href:"https://docs.python.org/3/library/multiprocessing.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("multiprocessing")]),t._v(", чтобы загрузить все \nлогические ядра моего процессора (20 из них) для параллельных вычислений. В противном случае это было бы вечное путешествие. \nНо для этого мне пришлось разделить свой итератор на 12 частей. Пакеты multiprocessing itertools действительно работают вместе, \nно когда вся группа вариантов находится в ОЗУ. Это не было моим случаем, поэтому было выполнено следующее:")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/1.png",alt:"Parallelizing"}}),n("p",[t._v("С того момента и далее я использовал бы эту стратегию, чтобы мой монитор загрузки ЦП выглядел так:")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/1_1.png",alt:"CPU Load"}}),n("p",[t._v("Я считаю, что это сократило время выполнения до примерно 5 секунд. Я нашел лучший способ перебора \nкомбинаций, но их было просто слишком много! Первым шагом было выполнение примерно 480 миллионов \nэкструзий в сети. Узел просто забанил бы меня за DDOS, и даже без этого это заняло бы вечность!")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/2.png",alt:"1st Attempt"}}),n("p",[t._v("Просто из-за отладочной цели я запустил скрипт (для связи с узлом использовал \nпакет "),n("a",{attrs:{href:"https://pypi.org/project/substrate-interface/1.0.3/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("py-substrate-interface")]),t._v(" и заметил, что перед вызовом \nвыполнения у меня возникали ошибки, такие как "),n("em",[t._v("недопустимая мнемоническая фраза")]),t._v(". Подсказка! Если бы я мог проверить комбинацию на предмет \nвалидации на месте, я бы сэкономил кучу времени! Парсинг GitHub привел меня к \n"),n("a",{attrs:{href:"https://github.com/polkascan/py-substrate-interface/blob/master/substrateinterface/keypair.py#L170",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("этой")]),t._v(" \nстроке кода, и я добавил проверку комбинации в свой скрипт. Это сократило количество потенциальных экструзий до примерно 39’000’000 в 12 раз быстрее!\nНо все равно, 39 миллионов вызовов забанили бы меня навсегда, поэтому мне нужно было еще больше копаться. Как я мог существенно сократить")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/3.png",alt:"2nd Attempt"}}),n("p",[t._v("Но все равно, 39 миллионов звонков забанят меня навсегда, поэтому мне нужно было больше копать. Как я мог бы значительно сократить количество вычислений? Ну, немного предав свою первоначальную стратегию. Понимаете, я собирался избегать просмотра видео, \n«хакер, который даже не будет нуждаться в видео», но математика заставила меня передумать. Перейти к стратегии в 132 раза быстрее. \nНиже объяснение: \nТеперь мне нужно было знать только два правильных положения слов в фразе (одно заняло бы слишком много времени, проверено экспериментом).")]),n("p",[t._v("Ниже приведено объяснение:")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/4.png",alt:"2 Words Insertion"}}),n("p",[t._v("При этом мне нужно было знать только два правильных положения слов во фразе (одно заняло бы слишком много времени, проверено экспериментом).\nЯ бы перебрал 10! комбинаций, вставил два слова в правильные позиции и проверил фразу,\nсократив количество вариантов примерно до 300’000 — это значительное уменьшение! Более того, 10! наборов комбинаций поместились в моей оперативной памяти, отлично!!")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/5.png",alt:"3rd Attempt"}}),n("p",[t._v("Также, вместо того, чтобы пытаться передавать все токены каждые 300к раз и вызывать общедоступный узел для этого, я решил установить \nЗапрос намного «проще», чем экструзия. После целой ночи синхронизации (я установил предел кэша, чтобы мой \nQuery is way “easier” than an extrinsic. After a whole night of synchronizing (I’ve set a cache limit so that my \nlaptop won’t blow up with chain data in its ROM) I gave it a try and.. this was a disaster. Network transactions \nпросмотр целого видео. Если бы я только мог знать точный адрес счета! Но для этого мне нужна мнемоническая фраза… "),n("strong",[t._v("Или действительно нужна?")]),t._v(" \nпросмотр видео целиком. Если бы я только мог знать точный адрес счета! Но для этого мне нужна мнемоническая фраза… "),n("strong",[t._v("Или мне действительно нужно?")])]),n("p",[t._v("Посмотрите. Правила гласят, что желаемый аккаунт имеет "),n("strong",[t._v("ровно")]),t._v(" 42 XRT. Почему бы мне не получить все активные адреса в сети,\nотфильтровать их, имея ровно 42 XRT и сравнить каждый сгенерированный адрес с возможными целями \n(около 20, уменьшаясь до 1 в конце). Легко сказать и сделать. ")]),n("p",[t._v("Теперь, после еще одной модификации моего скрипта, я наконец-то сделал только один запрос и одну транзакцию, которые, безусловно, \nдали бы мне желаемый приз.")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/6.png",alt:"4th Attempt"}}),n("p",[t._v("Теперь, после того, как я посмотрел 25 секунд видео (при этом заполняя слова мнемоники), \nмне было бы нужно всего 30 секунд максимум, чтобы украсть награду. Взломал это.")]),n("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/7.png",alt:"Discord Bot Notification"}})],1)}),[],!1,null,null,null);"function"==typeof p&&p(f),"function"==typeof u&&u(f);n.default=f.exports},UQSp:function(t,n,o){"use strict";n.a={name:"VueRemarkRoot",render(t){return t("div",null,this.$slots.default)}}}}]);