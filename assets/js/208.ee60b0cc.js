(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{"385c":function(t,e,s){"use strict";s("lwhK")},lwhK:function(t,e,s){},"o/fA":function(t,e,s){"use strict";s.r(e);var i={components:{rbInput:()=>Promise.all([s.e(0),s.e(18)]).then(s.bind(null,"VVVj")),Spinner:()=>s.e(13).then(s.bind(null,"1XZw"))},data:()=>({email:"",key:"6o1axzw1bohtkmqnbaufo5k335xhjqbngqfi5zwa",token:"6212238038:AAHZUl3F5LKeBYWHDPezBRB3HkjJErM25QY",listID:"19932574",chatID:"-1001647191957",success:!1,error:!1,loading:!1}),methods:{changeInputValue(t){this.email=t},async sendTGNotification(t){const e="https://api.telegram.org/bot"+this.token+"/sendMessage?",s={chat_id:this.chatID,text:t,parse_mode:"HTML"},i={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)};await fetch(e,i)},async addToList(){this.loading=!0;const t=`https://api.unisender.com/ru/api/subscribe?format=json&api_key=${this.key}&list_ids=${this.listID}&fields[email]=${this.email}&double_optin=3&tags=devices`;try{await fetch(t),this.success=!0,this.loading=!1}catch(t){this.success=!0,this.loading=!1}finally{this.sendTGNotification(this.email+" requested notification about device")}}}},n=(s("385c"),s("KHd+")),a=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"devices-shop__form",on:{submit:function(e){return e.preventDefault(),t.addToList.apply(null,arguments)}}},[e("rbInput",{staticClass:"devices-shop__item",attrs:{text:t.$t("Your email"),name:"Email",type:"email",model:t.email},on:{changeInputValue:t.changeInputValue}}),t.success?t._e():e("rb-button",{attrs:{disabled:t.error,buttonstyle:"flat",buttoncolor:"black",block:""}},[e("span",[t._v(t._s(t.$t("Notify me")))]),t.loading?e("Spinner",{staticClass:"spinner"}):t._e()],1),t.success?e("rb-button",{staticClass:"success",attrs:{disabled:"",buttonstyle:"flat",buttoncolor:"green",block:""}},[t._v(" "+t._s(t.$t("You are on the list!"))+" ")]):t._e(),t.error?e("span",{staticClass:"error"},[t._v(t._s(t.$t("Something went wrong. Try again later")))]):t._e()],1)}),[],!1,null,"fd8e8912",null);e.default=a.exports}}]);