(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{OY8R:function(e,o,i){"use strict";i.r(o);var a=i("KHd+"),n=i("UQSp"),t=i("Kw5r");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a.config.optionMergeStrategies;var s={VueRemarkRoot:n.a},c=function(e){var o=e.options.components=e.options.components||{},i=e.options.computed=e.options.computed||{};Object.keys(s).forEach((function(e){"object"===r(s[e])&&"function"==typeof s[e].render||"function"==typeof s[e]&&"function"==typeof s[e].options.render?o[e]=s[e]:i[e]=function(){return s[e]}}))},l=t.a.config.optionMergeStrategies,d="__vueRemarkFrontMatter",p={excerpt:null,title:"Laboratorio di Johnny violato",date:"2024-06-25T00:00:00.000Z",published:!0,locale:"it",tags:["Events","Online school","Web3"],cover_image:"../images/hacked-johnnys-lab/cover.png",description:"C'è stato di recente un evento “Hack Johnny’s Lab” di Robonomics e credo di averlo hackerato in un certo modo! A parte il primo tentativo che ho perso a causa di un fraintendimento delle regole, ho vinto ogni round a cui ho partecipato e qui c'è una breve storia su come ho fatto.",abstract:"Ciao! PaTara in linea. C'è stato di recente un evento “Hack Johnny’s Lab” di Robonomics e credo di averlo hackerato in un certo modo! A parte il primo tentativo che ho perso a causa di un fraintendimento delle regole, ho vinto ogni round a cui ho partecipato e qui c'è una breve storia su come ho fatto. "};var u=function(e){e.options[d]&&(e.options[d]=p),t.a.util.defineReactive(e.options,d,p),e.options.computed=l.computed({$frontmatter:function(){return e.options[d]}},e.options.computed)},m=Object(a.a)({},(function(){var e=this,o=e._self._c;return o("VueRemarkRoot",[o("p",[e._v("Quindi, un breve e necessario riassunto delle regole: 12 parole in un ordine misto, un video di 5 minuti di un TurtleBot 4 che vaga per un laboratorio e rovina l'ordine delle parole della frase mnemonica, 5-20 partecipanti disposti a vincere e una domenica libera per escogitare una strategia.")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/0.png",alt:"Game Interface"}}),o("p",[e._v("Sono abbastanza familiare con la programmazione e ho un laptop decente e quasi nessuna competenza nel riconoscimento delle immagini. Oltre a ciò, \nho deciso di giocare in modo leale, il che significa nessun download di video, nessun abuso di velocità di riproduzione, nessuna navigazione nella barra di riproduzione. \nQuindi la strategia scelta è stata una vecchia e buona forza bruta. Suona più come hacking che altro.\nCosa abbiamo qui: un set di 12 parole in un ordine misto. Questo ci dà 12! (fattoriale) opzioni di frasi\n(479’001’600 per essere precisi). Una quantità piuttosto consistente da elaborare!")]),o("h2",{attrs:{id:"strategia-1-stupida-e-diretta"}},[o("a",{attrs:{href:"#strategia-1-stupida-e-diretta","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("Strategia 1: stupida e diretta.")]),o("p",[e._v("Bene, cos'altro mi serve, basta andare e fare ordine! Ma ecco il primo trucco: 12! Le frasi mnemoniche non ci stavano proprio\ni miei 64 GB di RAM! Ho ricevuto un errore SIGTERM nella console dell'IDE. \nQuindi ho creato un "),o("a",{attrs:{href:"https://docs.python.org/3/library/itertools.html#itertools.permutations",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("iteratore")]),e._v(" e ho iniziato il processo.\nMi ci è voluto un po' di tempo, non so esattamente quanto, ma entro 30 secondi, per calcolare il numero di combinazioni.\nSolo una corsa valutativa. Ma la cosa è: il mio laptop non ha nemmeno fatto girare i suoi ventilatori al massimo! Un singolo core era caricato. ")]),o("p",[e._v("Ho cercato un pacchetto Python "),o("a",{attrs:{href:"https://docs.python.org/3/library/multiprocessing.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("multiprocessing")]),e._v(" per caricare tutti \ni core logici della mia CPU (20 di essi) per parallelizzare i calcoli. Altrimenti, sarebbe stato un viaggio eterno. \nMa con questo ho dovuto dividere il mio iteratore in 12 parti. I pacchetti di multiprocessing di itertools funzionano insieme, \nma quando un intero set di opzioni è nella RAM. Questo non era il mio caso, quindi è stato eseguito quanto segue:")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/1.png",alt:"Parallelizing"}}),o("p",[e._v("Da quel momento in poi avrei usato questa strategia per far apparire il monitor del carico della CPU in questo modo:")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/1_1.png",alt:"CPU Load"}}),o("p",[e._v("Credo che questo abbia ridotto il tempo di esecuzione a circa 5 secondi. Ho trovato il modo migliore per iterare attraverso \nle combinazioni ma ce n'erano semplicemente troppe! Il primo passo consisteva nell'eseguire circa 480 milioni \nesterni nella rete. Il nodo mi avrebbe semplicemente bandito per DDOS e anche senza quello ci vorrebbe per sempre!")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/2.png",alt:"1st Attempt"}}),o("p",[e._v("Solo per motivi di debug ho avviato lo script (per la comunicazione con il nodo ho usato un \n"),o("a",{attrs:{href:"https://pypi.org/project/substrate-interface/1.0.3/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("py-substrate-interface")]),e._v(" pacchetto) e ho notato che prima di chiamare \neseguire ho ottenuto errori come "),o("em",[e._v("frase mnemonica non valida")]),e._v(". Un indizio! Se potessi convalidare la combinazione in premessa, \nrisparmierei un sacco di tempo! Il parsing di GitHub mi ha portato a \n"),o("a",{attrs:{href:"https://github.com/polkascan/py-substrate-interface/blob/master/substrateinterface/keypair.py#L170",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("questo")]),e._v(" \nriga di codice e ho aggiunto una convalida della combinazione al mio script. Questo ha ridotto il numero di esterni potenziali a circa 39’000’000 12 volte più veloce!\nMa ancora, 39 milioni di chiamate mi bandirebbero per sempre, quindi ho dovuto scavare di più. Come potevo tagliare significativamente il")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/3.png",alt:"2nd Attempt"}}),o("p",[e._v("numero di calcoli? Beh, tradendo un po' la mia strategia iniziale. Vedi, stavo per evitare di guardare video, \n“un hacker, che nemmeno avrà bisogno di un video”, ma la matematica mi ha fatto cambiare idea. Cambiarla in una strategia 132 volte più veloce. \nDi seguito è spiegato: \nCon questo dovevo solo conoscere due posizioni corrette delle parole in una frase (una richiederebbe troppo tempo, sperimento convalidato).")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/4.png",alt:"2 Words Insertion"}}),o("p",[e._v("Avrei iterato attraverso un 10! combinazioni, inserito due parole nelle posizioni corrette e convalidato la frase, \nriducendo le opzioni a circa 300’000 una notevole diminuzione! Inoltre, il set di combinazioni 10! si adattava alla mia RAM, eccellente! \nil mio nodo Robonomics locale sincronizzato con la catena e chiedergli il saldo di un account risultante!")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/5.png",alt:"3rd Attempt"}}),o("p",[e._v("Inoltre, invece di provare a trasferire tutti i token ogni 300k volte e chiamare un nodo pubblico per questo, ho deciso di impostare il mio nodo Robonomics locale sincronizzato con la catena e chiedergli un saldo dell'indirizzo del conto risultante! La query è molto più \"facile\" di un'estrinseca. Dopo un'intera notte di sincronizzazione (ho impostato un limite di cache in modo che il mio laptop non esplodesse con i dati della catena nella sua ROM), ci ho provato e... è stato un disastro. Le transazioni di rete (anche all'interno di un localhost) hanno richiesto troppo tempo. Non ho nemmeno aspettato fino alla fine, era ovviamente molto più lento che guardare un intero video. Se solo potessi conoscere l'indirizzo esatto del conto! Ma per quello ho bisogno di una frase mnemonica... "),o("strong",[e._v("O forse sì?")])]),o("p",[e._v("Guarda. Le regole dicono che l'account desiderato ha "),o("strong",[e._v("esattamente")]),e._v(" 42 XRT. Perché non dovrei ottenere tutti gli indirizzi attivi nella rete,\nfiltrarli avendo esattamente 42 XRT e confrontare ciascun indirizzo generato con un elenco di possibili obiettivi \n(circa 20, diminuendo a 1 alla fine). Facile da dire e da fare. ")]),o("p",[e._v("Ora, dopo aver modificato di nuovo il mio script, sono finalmente riuscito a fare solo una query e una transazione che sicuramente \nmi darebbe il premio desiderato.")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/6.png",alt:"4th Attempt"}}),o("p",[e._v("Ora, dopo aver guardato 25 secondi del video (nel frattempo compilando le parole di un mnemonico), \navrei bisogno solo di 30 secondi al massimo per rubare la ricompensa. Hacked it.")]),o("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/7.png",alt:"Discord Bot Notification"}})],1)}),[],!1,null,null,null);"function"==typeof c&&c(m),"function"==typeof u&&u(m);o.default=m.exports},UQSp:function(e,o,i){"use strict";o.a={name:"VueRemarkRoot",render(e){return e("div",null,this.$slots.default)}}}}]);