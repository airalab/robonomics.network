(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{"2edI":function(t,e,a){"use strict";a.r(e);var s={components:{Spinner:()=>Promise.all([a.e(0),a.e(8)]).then(a.bind(null,"rLID"))},props:{book:{type:Object,required:!0},gateway:{type:String,required:!0,default:""}},data:()=>({booksLinks:{},loading:!0}),methods:{async fetchGateway(t){try{return(await fetch(t)).ok}catch{return!1}},async checkLocalStorage(t,e){const a={link:await this.fetchGateway(e+t.link)&&e?e+t.link:t.static,date:(new Date).toISOString()};return localStorage.setItem(t.name,JSON.stringify(a)),a},async checkLink(t){const e=localStorage.getItem(t.name);if(e){const a=JSON.parse(e),s=new Date,o=new Date(a.date);if(o.setDate(o.getDate()+7),s>o)return localStorage.removeItem(t.name),(await this.checkLocalStorage(t,this.gateway)).link;this.booksLinks[t.name]=a.link}else this.booksLinks[t.name]=(await this.checkLocalStorage(t,this.gateway)).link},async resolveLinks(){for(const t of this.book.options)await this.checkLink(t);this.loading=!1}},async mounted(){await this.resolveLinks()}},o=(a("e35W"),a("KHd+")),n=Object(o.a)(s,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"e-books__item"},[e("g-link",{staticClass:"e-books__img",attrs:{to:t.gateway+t.book.options[0].link}},[e("g-image",{attrs:{src:a("GSoK")("./"+t.book.img),quality:"75"}})],1),e("div",{staticClass:"e-books__content"},[e("div",{staticClass:"e-book__header"},[e("span",[t._v(t._s(t.book.year))]),e("h3",[t._v(" "+t._s(t.book.title)+" ")])]),t.loading?e("div",[e("Spinner")],1):e("div",{staticClass:"e-books__links"},t._l(t.book.options,(function(a){return e("g-link",{key:a.id,attrs:{to:t.booksLinks[a.name]||"#"}},[t._v("\n      "+t._s(a.text)+"\n      ")])})),1)])],1)}),[],!1,null,"08513558",null);e.default=n.exports},e35W:function(t,e,a){"use strict";a("gVKs")},gVKs:function(t,e,a){}}]);