(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{UQSp:function(e,a,o){"use strict";a.a={name:"VueRemarkRoot",render(e){return e("div",null,this.$slots.default)}}},Xv0x:function(e,a,o){"use strict";o.r(a);var r=o("KHd+"),i=o("UQSp"),s=o("Kw5r");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s.a.config.optionMergeStrategies;var t={VueRemarkRoot:i.a},m=function(e){var a=e.options.components=e.options.components||{},o=e.options.computed=e.options.computed||{};Object.keys(t).forEach((function(e){"object"===n(t[e])&&"function"==typeof t[e].render||"function"==typeof t[e]&&"function"==typeof t[e].options.render?a[e]=t[e]:o[e]=function(){return t[e]}}))},d=s.a.config.optionMergeStrategies,c="__vueRemarkFrontMatter",u={excerpt:null,title:"Laboratório do Johnny Hackeado",date:"2024-06-25T00:00:00.000Z",published:!0,locale:"pt",tags:["Events","Online school","Web3"],cover_image:"../images/hacked-johnnys-lab/cover.png",description:"Houve um evento recente “Hack Johnny’s Lab” pela Robonomics e eu acredito que consegui hackeá-lo de alguma forma! Além da primeira tentativa que perdi devido a um mal-entendido das regras, ganhei todas as rodadas das quais participei e aqui está uma breve história de “como fazer”.",abstract:"Olá! PaTara na linha. Houve um evento recente “Hack Johnny’s Lab” pela Robonomics e eu acredito que consegui hackeá-lo de alguma forma! Além da primeira tentativa que perdi devido a um mal-entendido das regras, ganhei todas as rodadas das quais participei e aqui está uma breve história de “como fazer”. "};var p=function(e){e.options[c]&&(e.options[c]=u),s.a.util.defineReactive(e.options,c,u),e.options.computed=d.computed({$frontmatter:function(){return e.options[c]}},e.options.computed)},l=Object(r.a)({},(function(){var e=this,a=e._self._c;return a("VueRemarkRoot",[a("p",[e._v("Assim, uma rápida e necessária recapitulação das regras: 12 palavras em ordem mista, um vídeo de 5 minutos de um TurtleBot 4 a vaguear por um laboratório\ne estragando a ordem das palavras da frase mnemónica, 5 a 20 participantes dispostos a ganhar e um domingo livre para pensar numa estratégia.")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/0.png",alt:"Game Interface"}}),a("p",[e._v("Eu sou meio familiarizado com programação e tenho um laptop decente e quase nenhuma habilidade em reconhecimento de imagem. Mais do que isso, \nDecidi jogar de forma justa, o que significa sem baixar vídeos, sem abuso de velocidade de reprodução, sem navegação na barra de reprodução. \nEntão a estratégia escolhida foi um bom e velho bruteforce. Parece mais hacking do que qualquer outra coisa.\nO que temos aqui: um conjunto de 12 palavras em uma ordem misturada. Isso nos dá 12! (fatorial) opções de frases \n(479’001’600 para ser preciso). Uma quantidade considerável para processar!")]),a("h2",{attrs:{id:"estratégia-1-burra-e-direta"}},[a("a",{attrs:{href:"#estrat%C3%A9gia-1-burra-e-direta","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),e._v("Estratégia 1: burra e direta.")]),a("p",[e._v("Bem, o que mais eu preciso, apenas vá e ordene! Mas aqui está o primeiro truque: 12! frases mnemônicas simplesmente não se encaixaram \nmeus 64 GB de RAM! Recebi um erro SIGTERM no console do IDE. \nAssim, criei um "),a("a",{attrs:{href:"https://docs.python.org/3/library/itertools.html#itertools.permutations",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("iterador")]),e._v(" e iniciei o processo.\nDemorei algum tempo, não sei exatamente quanto, mas em 30 segundos, a calcular o número de combinações.\nApenas uma execução avaliativa. Mas o fato é: meu laptop nem chegou a girar seus ventiladores no máximo! Um único núcleo estava carregado. ")]),a("p",[e._v("Pesquisei um pacote Python "),a("a",{attrs:{href:"https://docs.python.org/3/library/multiprocessing.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("multiprocessing")]),e._v(" para carregar todos \nos núcleos lógicos da minha CPU (20 deles) para paralelizar os cálculos. Caso contrário, teria sido uma jornada eterna. \nMas com isso tive que dividir meu iterador em 12 partes. Os pacotes de multiprocessing do itertools funcionam juntos, \nmas quando um conjunto inteiro de opções está na RAM. Esse não era o meu caso, então o seguinte foi realizado:")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/1.png",alt:"Parallelizing"}}),a("p",[e._v("A partir desse momento e sempre eu usaria essa estratégia para fazer meu monitor de carga da CPU parecer assim:")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/1_1.png",alt:"CPU Load"}}),a("p",[e._v("Acredito que isso reduziu o tempo de execução para cerca de 5 segundos. Descobri a melhor maneira de iterar através \ndas combinações, mas havia simplesmente muitas delas! O primeiro passo envolveu realizar aproximadamente 480 milhões \nextrínsecos na rede. O nó simplesmente me baniria por DDOS e mesmo sem isso levaria uma eternidade!")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/2.png",alt:"1st Attempt"}}),a("p",[e._v("Apenas por razões de depuração, iniciei o script (para comunicação com o nó usei um \n"),a("a",{attrs:{href:"https://pypi.org/project/substrate-interface/1.0.3/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("py-substrate-interface")]),e._v(" pacote) e notei que antes de chamar \nrealizar eu recebia erros como "),a("em",[e._v("frase mnemônica inválida")]),e._v(". Uma pista! Se eu pudesse validar a combinação localmente, \neu economizaria toneladas de tempo! A análise do GitHub me levou a \n"),a("a",{attrs:{href:"https://github.com/polkascan/py-substrate-interface/blob/master/substrateinterface/keypair.py#L170",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("este")]),e._v(" \nlinha de código e adicionei uma validação de combinação ao meu script. Isso reduziu o número de extrínsecos potenciais para aproximadamente 39’000’000 12 vezes mais rápido!\nMas ainda assim, 39 milhões de chamadas me baniriam para sempre, então eu precisava cavar mais fundo. Como eu poderia cortar significativamente o")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/3.png",alt:"2nd Attempt"}}),a("p",[e._v("número de cálculos? Bem, traindo um pouco minha estratégia inicial. Veja, eu ia evitar assistir vídeos, \n“um hacker, que nem precisará de um vídeo”, mas a matemática me fez mudar de ideia. Mudar para uma estratégia 132 vezes mais rápida. \nAbaixo está a explicação: \nCom isso, eu só precisava saber duas posições corretas de palavras em uma frase (uma levaria muito tempo, validada por experimento).")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/4.png",alt:"2 Words Insertion"}}),a("p",[e._v("Eu iteraria através de 10! combinações, inseriria duas palavras nas posições corretas e validaria a frase, \nreduzindo as opções para aproximadamente 300’000, uma grande diminuição! Além disso, o conjunto de 10! combinações cabia na minha RAM, excelente! \nmeu próprio nó Robonomics local sincronizado com a cadeia e perguntaria a ele pelo saldo de uma conta resultante!")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/5.png",alt:"3rd Attempt"}}),a("p",[e._v("Além disso, em vez de tentar transferir todos os tokens 300 mil vezes a cada e chamar um nó público para isso, decidi definir\nconfigurar o meu próprio nó Robonomics local sincronizado com a cadeia e solicitar o saldo do endereço da conta resultante!\nA consulta é muito “mais fácil” do que uma consulta extrínseca. Depois de uma noite inteira de sincronização (defini um limite de cache para que o meu\nportátil não explode com dados de string na sua ROM). Transações de rede\n(mesmo dentro de um host local) demorava muito tempo. Nem esperei até ao fim, obviamente foi bem mais lento do que\nassistindo a um vídeo inteiro. Se ao menos pudesse saber o endereço exato da conta! Mas para isso preciso de uma frase mnemónica... "),a("strong",[e._v("Ou preciso mesmo?")])]),a("p",[e._v("Olha. As regras dizem que a conta desejada tem "),a("strong",[e._v("exatamente")]),e._v(" 42 XRT. Por que eu não pegaria todos os endereços ativos na rede,\nfiltrá-los tendo exatamente 42 XRT e comparar cada endereço gerado com uma lista de possíveis alvos \n(cerca de 20, diminuindo para 1 no final). Fácil de dizer e fazer. ")]),a("p",[e._v("Agora, depois de modificar meu script mais uma vez, finalmente consegui chegar a apenas uma consulta e uma transação que com certeza \nme daria o prêmio desejado.")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/6.png",alt:"4th Attempt"}}),a("p",[e._v("Agora, depois de assistir 25 segundos do vídeo (enquanto preenchia as palavras de um mnemônico), \neu só precisaria de 30 segundos no máximo para roubar a recompensa. Hackeado.")]),a("rb-image",{attrs:{zoom:"",src:"./images/hacked-johnnys-lab/7.png",alt:"Discord Bot Notification"}})],1)}),[],!1,null,null,null);"function"==typeof m&&m(l),"function"==typeof p&&p(l);a.default=l.exports}}]);