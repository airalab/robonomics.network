---
title: Robonomics Helps Enable Rust for ROS 2
date: 2022-12-29
published: true
locale: 'uk'
tags: ['ROS 2', 'Використання', 'Співпраця']
cover_image: /blog/images/ros-2-rust-report-2022/cover.jpg
description: "Це історія нашої співпраці з Естеве Фернандесом, колишнім членом оригінальної команди, яка створила Robot Operating System 2. Він розробляв зв'язки Rust для ROS 2 протягом кількох років. Ми хочемо поділитися історією цього проєкту, пояснити, як ми допомогли Естеве, і чому наявність Rust корисна для робототехнічних застосувань."
abstract: "Це історія нашої співпраці з Естеве Фернандесом, колишнім членом оригінальної команди, яка створила Robot Operating System 2. Він розробляв зв'язки Rust для ROS 2 протягом кількох років. Ми хочемо поділитися історією цього проєкту, пояснити, як ми допомогли Естеве, і чому наявність Rust корисна для робототехнічних застосувань."
---

## Від ROS 1 до ROS 2

ROS спочатку був створений як середовище розробки для конкретних типів роботів. Перш за все, перша версія операційної системи була призначена для одиночних роботів з обчислювальними ресурсами на борту та надійним мережевим з'єднанням без потреби в реальному часі управління. Відповідно, розробники спочатку вважали, що ROS 1 найбільше підходить для дослідницьких та академічних застосувань.

Однак ROS з часом вийшов за межі дослідницької спільноти та був прийнятий для комерційного використання. Щоб відповісти на потреби нових використань, розробники вирішили додати нові функції, такі як підтримка для багатьох роботів та невеликих вбудованих систем, інтеграція з реальним часом. Вони також вирішили покращити API та включити нові технології, які з'явилися після випуску ROS 1. У той же час вони вирішили не змінювати існуючу версію Robot Operating System, оскільки це могло б суттєво позначитися на існуючих застосуваннях. В результаті народився [ROS 2](https://design.ros2.org/).

## Про Естеве

Естеве був одним з оригінальної команди, яка [почала розробку](https://www.ros.org/news/2016/04/dirk-thomas-esteve-fernandez-and-william-woodall-osrf-state-of-ros-2.html) другої версії ROS. Він є інженером-робототехніком з більш ніж двадцятирічним досвідом у сфері розробки відкритого коду та автономних автомобілів. Навіть після виходу з основноїКоманда ROS 2 продовжує активно вносити свій внесок у репозиторії проекту.

Однією з особистих цілей Естеве було розробити проекти, які дозволять розробникам писати додатки ROS 2 на Rust (зв'язки, генератор коду та інше), надаючи їм потужний інструмент для створення ефективних, надійних програм для робототехніки. Проте проект спочатку розвивався досить повільно, оскільки Естеве працював над ним практично самостійно протягом 4 років у вільний час.

Близько півтора року тому ми зустрілися з Естеве і погодилися допомогти йому у розробці ros2-rust. Завдяки цьому Естеве зміг виділити додатковий час для роботи над проектом і привернути до нього більше уваги. Спільнота ROS2 на Rust зросла, і інші також почали вносити свій внесок у проект з оглядами від Естеве. Зараз у [основному репозиторії](https://github.com/ros2-rust/ros2_rust) є 27 учасників, 75 розділених гілок та 466 зірок на Github.

## Прогрес розробки

На даний момент ros2-rust вже реалізував підтримку генерації повідомлень, механізм видавця/підписника, клієнтів та сервісів. Одна з наших великих цілей - розробити Robonomics як проміжний шар ROS 2, що потребує додавання транспортного рівня Robonomics для ros2-rust. Для реалізації цієї функціональності додається підтримка бібліотеки комунікації libP2P замість стандартної Служби розподілу даних (DDS) для ROS2. DDS надає транспорт типу публікація-підписка у спосіб розподіленого виявлення, що дозволяє будь-яким двом програмам спілкуватися без необхідності централізованого інструмента, такого як майстер ROS. Але DDS потребує розробки додаткового моста для додавання Robonomics до ROS2, тоді як libP2P дозволяє нативну інтеграцію Robonomics.

![ros-2-stack](/blog/images/ros-2-rust-report-2022/ros-client-library-api-stack.png)

*Діаграма стеку API бібліотеки клієнта ROS, що показує положення проміжного ПЗ ROS 2 (rmw). Джерело: [Документація ROS 2](https://docs.ros.org/en/foxy/Concepts/About-Internal-Interfaces.html)*

## Чому ROS2 на Rust?

Крім того, що Rust є основною мовою для Robonomics на Substrate, у Rust є значні переваги для робототехнічних застосувань.

Загалом, для найбільш поширених робототехнічних платформ, призначених для комерційного та масштабного впровадження, використовується C++, і тому він був доданий першим для ROS. Це пов'язано з його здатністю працювати "близько до"'обладнання' та його придатність для робототехнічних застосувань з обмеженими обчислювальними ресурсами. Однак це також робить C++ більш небезпечною мовою, оскільки дуже легко допустити критичну помилку під час розробки, і ці помилки виявляються лише пізніше на реальному (і несправному) обладнанні.

Ось де виявляються переваги Rust. Він дозволяє розробку на низькому рівні, як C++, але з додатковою безпекою пам'яті. Ця безпека надається без додаткових витрат на час виконання, зберігаючи високу швидкість виконання додатку. Крім того, Rust робить розробку складних та ризикованих робототехнічних проектів більш ефективною.

## Плани на майбутнє

У найближчому майбутньому Esteve планує додати дії (асинхронні виклики функціональності вузла) в ros2-rust. Вони дозволяють клієнту відстежувати прогрес запиту, отримувати кінцевий результат та за необхідності скасувати запит до його завершення. Це, зокрема, дозволяє роботам створювати запити, наприклад, для навігації та локалізації.

Довгострокові плани включають створення прототипу ROS 2, запущеного на платформі мережі Robonomics. Це дозволить нам використовувати Robonomics на Substrate для створення додатка WebAssembly, який може запускати ROS2 з браузера на децентралізованому хмарному середовищі Robonomics. Ми очікуємо новий курс в [Академії Robonomics](https://robonomics.academy), присвячений ROS 2 та роботі безпосередньо з будь-якого браузера!