---
title: "Controllo Remoto Sicuro dei Robot: Soluzione Robonomics"
date: 2024-04-19
published: true
locale: 'it'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "La connessione remota e il controllo del proprio dispositivo intelligente sono funzionalità molto popolari tra gli utenti. Tuttavia, compiti apparentemente banali come questi causano ancora molte difficoltà agli utenti inesperti, dalle problematiche legate al NAT ai problemi di sicurezza. In un nuovo articolo, mostreremo come queste difficoltà possano essere superate con l'aiuto di Robonomics."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "La connessione remota e il controllo del proprio dispositivo intelligente sono funzionalità molto popolari tra gli utenti. Tuttavia, compiti apparentemente banali come questi causano ancora molte difficoltà agli utenti inesperti, dalle problematiche legate al NAT ai problemi di sicurezza. In un nuovo articolo, mostreremo come queste difficoltà possano essere superate con l'aiuto di Robonomics."
tags: ['ROS 2', 'Casa Intelligente']
---

Nell'articolo precedente, abbiamo parlato di come sfruttiamo i vantaggi delle soluzioni industriali nell'infrastruttura di una casa intelligente robotizzata. Abbiamo mostrato come il framework ROS 2 e il suo protocollo middleware offrano la scoperta automatica dei dispositivi e un'interazione intensiva (anche in tempo reale) tra di essi all'interno di una rete locale, il che è molto conveniente. Tuttavia, questo approccio è principalmente adatto alla cosiddetta Zona Affidabile - quella parte della rete informatica dove è improbabile la comparsa di attori terzi. In questo caso, ci fidiamo di tutti i programmi in esecuzione e non è necessario utilizzare la crittografia allo stesso modo in cui non viene utilizzata all'interno di un singolo computer quando i programmi scambiano dati tra di loro.

Ma cosa succede se è necessario garantire il funzionamento dei dispositivi ROS 2 con un servizio esterno o fornire loro l'accesso remoto dall'esterno? In quei momenti, sorge un problema di sicurezza: ottenendo l'accesso a un nodo ROS 2, un servizio esterno (e potenzialmente una persona malintenzionata) ottiene essenzialmente l'accesso a tutti gli altri nodi: può ascoltare completamente tutto il traffico DDS interno e accedere a tutti i servizi di sistema disponibili.

Il classico compromesso tra sicurezza e velocità/convenienza viene risolto dividendo il sistema di casa intelligente sovrano in due parti - sicura e non sicura.

## Sicurezza ROS 2

Designare una zona con requisiti di sicurezza speciali nello spazio di lavoro dei nodi ROS 2 è un compito piuttosto non banale. Il pacchetto di sicurezza standard ROS 2 ([sros2](https://docs.ros.org/it/rolling/Concepts/Intermediate/About-Security.html)) fa parte di [ros-core](https://ros.org/reps/rep-2001.html#id32), su cui sono basate tutte le distribuzioni ROS 2, e secondo gli sviluppatori principali, è pensato per risolvere questo problema. Fornisce la capacità di configurare un'infrastruttura a chiave pubblica (PKI) relativamente semplice all'interno di una singola rete locale. Per ciascun nodo ROS 2 vengono impostate le politiche di accesso ai dati degli altri nodi, nonché un insieme di file standard per tali scenari - chiavi crittografiche e certificati. Durante l'esecuzione del programma, i nodi "vedono" solo le fonti di dati a cui è esplicitamente consentito l'accesso nella configurazione al momento del lancio del progetto. Tuttavia, questo approccio ha un grosso svantaggio: tutto il traffico nel sistema è crittografato, il che può influire sulle prestazioni sotto il carico di rete creato da DDS. Sarà necessario scrivere tutte le politiche di accesso e generare chiavi per tutti i nodi. Questo è molto difficile da configurare e mantenere. E, cosa più importante, stiamo perdendo il principale vantaggio del Middleware ROS 2 - le prestazioni.

## Ponti

Un'altra soluzione è creare dei cosiddetti gateway, che trasmettono i dati necessari mantenendo tutto il resto privato. Tipicamente, ciò viene realizzato utilizzando tunnel VPN o SSH. Viene creato un nodo separato nello spazio di scambio dati sicuro, che ha un indirizzo pubblico per le connessioni esterne. In questo caso, la gestione della sicurezza viene effettuata solo a livello di questo nodo (essenzialmente una finestra verso il mondo esterno), senza influenzare tutti gli altri. Questo approccio è utilizzato nei progetti [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) e [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds), ma ha anche i suoi svantaggi. In questo scenario, è necessario stabilire un canale di comunicazione sicuro strettamente legato all'indirizzo IP o al nome di dominio del controparte. Questi possono cambiare, essere bloccati o essere vulnerabili agli attacchi. Al momento della creazione di SSH, questo non è stato considerato. Inoltre, SSH si basa principalmente sul sistema di controllo degli accessi del sistema operativo, con tutti i suoi svantaggi intrinseci.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Controllo remoto classico tramite IP pubblico e SSH/VPN" />

*Ecco come gli utenti di solito si connettono ai loro robot in remoto al giorno d'oggi. Tuttavia, questo approccio ha alcuni svantaggi. Richiede un IP pubblico e/o un nome DNS, che possono essere bloccati in alcuni paesi. Inoltre, richiede la memorizzazione di chiavi private aggiuntive in posizioni potenzialmente non sicure (ad esempio, ~/.ssh).*

SSH, utilizzato principalmente dagli amministratori di sistema e dagli specialisti IT, richiede una conoscenza di base della riga di comando Bash e la fiducia nel sistema operativo, poiché le chiavi di crittografia sono memorizzate direttamente nel file system o nell'agente SSH. Gestire le chiavi di accesso rimane un compito piuttosto complesso per l'utente medio per mantenere un modo sicuro per proteggere i propri dati.

## Soluzione Web3

Come possiamo vedere, i metodi sopra descritti non sono privi di svantaggi, quindi considereremo una possibile soluzione al problema utilizzando tecnologie di rete peer-to-peer, su cui si basa Robonomics. In questo caso, il cloud decentralizzato di Robonomics può essere visto come una tabella di routing sicura, gli indirizzi dei controparti dei quali sono le chiavi pubbliche dei nodi. È necessario un nodo Robonomics locale e la conoscenza della chiave pubblica della controparte, in modo da non dipendere dal sistema DNS (compresi i registrar di nomi di dominio e i server) e dal blocco degli indirizzi IP. La libreria [libP2P](https://libp2p.io/), utilizzata da Robonomics, può utilizzare diversi protocolli di trasporto per la consegna dei messaggi.

Inoltre, con l'avanzamento delle tecnologie Web3, sono emersi metodi più efficienti per gestire informazioni critiche, inclusi le chiavi private. Uno di essi è una frase mnemonica o seed - un insieme di 12 o 24 parole, utilizzato per creare account in reti decentralizzate. Questo metodo è comodo e sicuro, poiché il seed viene scritto su un supporto esterno (ad esempio, su carta) una volta durante l'inizializzazione e viene utilizzato solo per ripristinare l'account. Da una frase mnemonica viene creato un master key, da cui può essere creata una gerarchia di chiavi per compiti diversi (vedi **[Chiavi deterministiche gerarchiche](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)**). Questo semplifica la gestione delle chiavi e il loro recupero se vengono perse. Se una persona malintenzionata ottiene accesso a una delle tue coppie di chiavi, non potrà ottenere informazioni su altre chiavi create dalla frase mnemonica. La funzionalità della chiave derivata soft consente di confermare la proprietà dell'account principale senza rivelarla. Poiché le chiavi soft possono essere derivate utilizzando la chiave pubblica genitore, possono essere utilizzate per identificare il genitore.chiave senza esporre il seed genitore.

## Controllo remoto in Home Assistant

Esaminiamo il processo di connessione in modo più dettagliato. L'applicazione decentralizzata [Robonomics](https://robonomics.app/) (o semplicemente DApp) funziona direttamente nel tuo browser, non richiede l'installazione di alcun software aggiuntivo o la necessità di memorizzare chiavi nel file system in un ambiente con un gran numero di programmi, la sicurezza dei quali non è garantita. La gestione delle chiavi di accesso avviene tramite l'estensione Polkadot JS, nonché con l'aiuto di un dispositivo di archiviazione chiavi hardware esterno (ad esempio, [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault)) per una maggiore affidabilità. Oltre al software specializzato per l'interazione con Robonomics, la DApp include anche un nodo libP2P leggero, con il quale avviene la connessione a Home Assistant.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="Controllo Remoto in Home Assistant" />

Il proprietario di un abbonamento al servizio web di Robonomics gestisce i diritti di accesso all'infrastruttura della casa intelligente attraverso ciò che è noto come controller - un account che gestisce tutte le informazioni sensibili in forma crittografata in un gemello digitale. Solo gli utenti aggiunti all'abbonamento possono decifrare questi dati. Oltre alle chiavi di accesso, il Gemello Digitale memorizza anche la configurazione della DApp e, il cosiddetto, multi-indirizzo libP2P a cui la DApp si connette per una connessione sicura. Il multi-indirizzo è una delle innovazioni che rende così unico e flessibile l'approccio libP2P. Si tratta di un formato speciale di indirizzo per i nodi, che implica la presenza di molti indirizzi IP, identificatori di trasporto e di rete, protocolli e porte, attraverso i quali è possibile contattare un nodo specifico. L'elenco completo dei protocolli supportati è presentato nella [specifica](https://github.com/multiformats/multiaddr/blob/master/protocols.csv).

Quindi, l'utente aggiunto all'abbonamento estrae un multi-indirizzo dal gemello digitale di Robonomics e stabilisce una connessione sicura con un Peer ID conosciuto solo da lui. Successo!

## Controllo Remoto in ROS 2

Analogamente, è possibile utilizzare le funzionalità esistenti di Robonomics per interagire con i robot. Il team di Robossembler, nell'ambito del Programma di Finanziamento di Robonomics, ha sviluppato un progetto Proof of Concept noto come [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge). Questo ponte consenteI tuoi nodi ROS 2 possono connettersi con qualsiasi servizio esterno, workstation remota o un altro sistema ROS 2.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="Controllo remoto ROS 2 con Robonomics" />

*Un'illustrazione di come potrebbe apparire il controllo remoto di un robot domestico nel caso di ROS 2. Questo approccio offre diversi vantaggi significativi: non c'è bisogno di un IP pubblico, l'accesso al robot è disponibile anche attraverso i firewall di rete (NAT), le chiavi crittografiche private non sono memorizzate su disco e sono protette in modo affidabile.*

Il protocollo utilizzato in ROS 2, DDS, si combina naturalmente con libP2P a causa del suo modello simile di pubblicazione-sottoscrizione per l'interazione dei nodi. Con l'aiuto del ponte Robonomics, i nodi ROS 2 e le loro interfacce - argomenti, servizi, tipi di messaggi (ad esempio, utilizzando il Servizio di Integrazione eProsima) possono essere configurati in modo dichiarativo, attraverso i quali è possibile interagire con il robot da remoto. Ciò consente anche un livello aggiuntivo di sicurezza durante la connessione a un computer remoto. Il meccanismo per ottenere l'ID peer della controparte può essere lo stesso del caso con Home Assistant - attraverso una richiesta di Digital Twin dal nodo Robonomics, con l'unica differenza che invece del Server Home Assistant ci sarà un robot ROS 2, e invece del libP2P-websocker-proxy ci sarà un Wrapper Robonomics ROS 2 collegato al robot.

## Opportunità potenziali in futuro

Tuttavia, queste non sono tutte le possibilità che una cloud decentralizzata basata su tecnologie Web3 può offrire. Nell'esempio descritto sopra, queste tecnologie vengono utilizzate per la trasmissione relativamente semplice di flussi di dati di messaggi tra computer remoti.

Questo può essere definito il livello di trasporto di base nello stack di rete Robonomics, che è alla base dell'implementazione di protocolli di livello superiore più complessi. Partendo dagli analoghi SSH, che implicano un'interazione più interattiva degli utenti con i loro sistemi cibernetici-fisici, e finendo con protocolli di applicazione che implicano l'interazione di un gran numero di utenti di infrastrutture robotiche autonome.

Ad esempio, la decisione di avviare la produzione di un determinato prodotto può essere collegata a votazioni all'interno di un'organizzazione di potenziali consumatori di questo prodotto, considerando la fattibilità economica. Attualmente, la decisione di avviare qualsiasi produzione avviene attraverso meccanismi di investimento, dove gli investitori, avendo ricevuto informazioni sulla domanda potenziale, possono acquisire azioni di singole aziende che possono soddisfare questa domanda in futuro.Se i consumatori possono partecipare più attivamente allo sviluppo e alla determinazione dei prezzi dei nuovi prodotti, a lungo termine possiamo passare a un tale modo di operare in cui la produzione si ristrutturerà automaticamente per soddisfare la domanda in base ai dati forniti dai consumatori nella rete.