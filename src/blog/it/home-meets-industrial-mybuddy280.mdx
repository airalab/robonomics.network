---
title: "Automazione: Casa incontra Industriale"
date: 2024-03-24
published: true
locale: 'it'
cover_image: /blog/images/automation-home-meets-industrial-mybuddy280/Cover.png
description: "ROS 2 è un framework che sta diventando rapidamente popolare per lo sviluppo di applicazioni robotiche. Include l'esperienza accumulata dall'industria e la condivide con la comunità globale. Il nostro team è attivamente coinvolto nello sviluppo di nuovi pacchetti ROS 2 per i robot che utilizziamo, nonché nell'integrazione in rete Robonomics decentralizzata."
related: ['Robonomics Helps Enable Rust for ROS 2']
abstract: "ROS 2 è un framework che sta diventando rapidamente popolare per lo sviluppo di applicazioni robotiche. Include l'esperienza accumulata dall'industria e la condivide con la comunità globale. Il nostro team è attivamente coinvolto nello sviluppo di nuovi pacchetti ROS 2 per i robot che utilizziamo, nonché nell'integrazione in rete Robonomics decentralizzata."
tags: ['ROS 2', 'Casa Intelligente']
---

Le tecnologie sviluppate in un settore trovano spesso ampia applicazione in altri settori, anche se non erano state originariamente progettate per loro. Così, internet, sviluppato originariamente per uso militare, ha rivelato il suo pieno potenziale nella sfera civile, diventando parte integrante della vita moderna. Una tendenza simile potrebbe verificarsi anche nell'industria, dove le tecnologie sviluppate per scenari aziendali possono beneficiare anche gli utenti finali.

Storicamente, l'automazione domestica e la robotica industriale si sono evolute separatamente. A causa dei loro elevati costi e delle preoccupazioni per la sicurezza, i robot industriali sono stati principalmente limitati alla produzione su larga scala. Il software per la gestione della produzione era confinato all'interno di sistemi proprietari di esecuzione della produzione e di produzione assistita da computer. Allo stesso tempo, l'automazione domestica rappresentava di solito un sistema di dispositivi piuttosto semplici per interagire con i gadget degli utenti, gli elettrodomestici, l'illuminazione, il riscaldamento, la comunicazione. L'enfasi nella comunicazione era sulla comunicazione wireless.

Tuttavia, stiamo osservando delle tendenze. Da un lato, i protocolli di comunicazione wireless dalla sfera dei consumatori stanno gradualmente venendo adattati per applicazioni industriali — ad esempio, stanno apparendo versioni industriali di Wi-Fi o Bluetooth. Dall'altro lato, i robot manipolatori stanno diventando più accessibili e stanno iniziando a essere considerati per utilizzi al di là dell'industria. Già ora possiamo riflettere su come in futuro, ad esempio, i robot collaborativi sicuri diventeranno parte integrante della casa e saranno in grado di rendere la nostra vita più comoda, aiutando in cucina e in altre mansioni domestiche di routine. Inoltre, implementazioni open source di protocolli di comunicazione industriali — come il protocollo middleware DDS sottopinnare il framework ROS 2 - stanno diventando il patrimonio degli appassionati di tutto il mondo.

ROS 1 è stato sviluppato per la gestione di singoli robot e non poteva soddisfare i requisiti delle imprese manifatturiere: operazioni in tempo reale, tolleranza ai guasti in condizioni di comunicazione instabili, interazione con un gran numero di dispositivi. Così è iniziato lo sviluppo di ROS 2, inizialmente pensato appositamente per le esigenze dell'industria e ora sta diventando mainstream nella robotica. A metà del 2023, si è verificato un evento importante - 5 anni dopo l'apparizione di ROS 2 Dashing nel 2019, il numero di pacchetti ROS 2 utilizzati dagli ingegneri, secondo [metrics.ros.org](https://metrics.ros.org/packages_rosdistro.html), ha superato i pacchetti ROS 1 e ora circa il 70% dei pacchetti software scaricati dai repository ufficiali sono per ROS 2.

## Vantaggi di ROS 2 per scenari di automazione domestica

Il team di Robonomics è in prima linea in questo processo e supporta attivamente la community di ROS 2. Con il nostro supporto, sono in corso lo sviluppo dei binding ROS 2 per Rust (vedilo [nel nostro blog](https://robonomics.network/blog/ros-2-rust-report-2022/)), così come un [Wrapper ROS 2](https://github.com/Fingerling42/robonomics-ros2) per utilizzare le funzioni principali del cloud decentralizzato di Robonomics. Testiamo anche regolarmente dispositivi che supportano ROS 2, per verificare specificamente il funzionamento del nostro software su di essi. Come uno di questi robot, abbiamo recentemente acquisito myBuddy 280 - un manipolatore bimanuale economico per la formazione e la ricerca da [Elephant Robotics](https://www.elephantrobotics.com/en/). Il robot può sollevare fino a circa 250 grammi e ha un prezzo di circa $1700, rendendolo relativamente accessibile per gli utenti alle prime armi.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_1_myBuddy_280.png" alt="myBuddy 280 robot manipolatore bimanuale" />

Utilizzando l'esempio di questo robot, i vantaggi di ROS 2 sono molto chiaramente visibili, consentendo l'uso potenziale di questo framework in scenari di automazione domestica. In particolare, grazie al protocollo middleware DDS, è possibile utilizzare myBuddy insieme a un PC desktop relativamente performante e aggiungere un robot completo in una struttura tipica di una casa intelligente. Se il robot e il computer sono collegati tramite ilnella stessa rete locale e utilizzano lo stesso [DOMAIN_ID](https://docs.ros.org/en/rolling/Concepts/Intermediate/About-Domain-ID.html), possono comunicare senza alcuna configurazione aggiuntiva. Software di base come driver e pacchetti di descrizione dell'hardware vengono eseguiti sul Raspberry Pi del robot. Il resto del software dell'applicazione richiesto come pianificatori di "smart" movimento come MoveIt, simulatori come Gazebo, strumenti di monitoraggio e visualizzazione come RViz, nodo Robonomics, apprendimento automatico, elaborazione batch dei log, nodo di trasmissione dati distribuita IPFS e altre attività che richiedono una notevole potenza computazionale possono essere eseguite su questa macchina più potente.

Questo arrangiamento consente una distribuzione ottimale delle risorse computazionali, creando essenzialmente un'architettura simile a quella dei microservizi. Grazie alla piattaforma ROS 2 e al protocollo middleware DDS sottostante, questa flessibilità è possibile, consentendo a ciascun dispositivo di svolgere i compiti più adatti alle proprie capacità. Attraverso i meccanismi di rilevamento automatico dei dispositivi integrati in DDS, i topic e i servizi di ROS 2 troveranno reciprocamente senza alcuna impostazione aggiuntiva.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_2_ros2_dds_smart_home.png" alt="Casa intelligente con ROS 2 e DDS" />

Va anche notato che l'architettura di ROS 2 implica una separazione del protocollo di trasporto (come DDS) in uno strato distinto chiamato Middleware ROS, rendendo più facile passare da un'implementazione del protocollo all'altra. Così, dopo lunghe discussioni, la comunità ROS ha recentemente deciso di passare a un protocollo più leggero chiamato Zenoh, previsto per il 2024. Per approfondire questo argomento, consigliamo di fare riferimento al [rapporto sulle alternative al Middleware ROS 2](https://discourse.ros.org/uploads/short-url/o9ihvSjCwB8LkzRklpKdeesRTDi.pdf), che contiene informazioni su tutte le alternative DDS considerate nel 2023.

## Le Avventure di myBuddy e il Driver Compatibile con Robonomics

Nonostante il myBuddy 280 sia stato commercializzato come compatibile con ROS 2, si è rivelato insufficiente per un'operatività a pieno titolo in ROS 2 (anche senza software di pianificazione del movimento come MoveIt2). Prima, abbiamo dovuto sostituire il modello Raspberry Pi 4B fornito di default con uno più potente con 8 GB di RAM per soddisfare le nostre esigenze. In secondo luogo, dopo aver testato il pacchetto ROS 2 per myBuddy dal produttore, abbiamo riscontrato problemi. Come è comuneNel mondo open-source, il fatto che qualcosa sia pubblicato in un repository pubblico non garantisce la sua funzionalità. Il robot era preinstallato con la distribuzione ROS 2 Galactic attualmente non supportata, scaduta nel 2022 (a proposito, puoi leggere sui periodi di supporto delle distribuzioni [qui](https://docs.ros.org/en/rolling/Releases.html)). Nonostante tutto, abbiamo provato ad avviare il robot con la distribuzione obsoleta e ci siamo rapidamente imbattuti nei cosiddetti deadlock - un comportamento in cui i sottoprogrammi avviati (o processi di calcolo) si bloccano a vicenda. Dopo alcune ricerche, abbiamo scoperto che questi errori erano stati risolti nella distribuzione LTS di ROS 2 Humble.

Sfortunatamente, gli sviluppatori di Elephant Robotics hanno smesso di aggiornare i pacchetti diversi anni fa e, cosa più importante, non tutti i pacchetti necessari per il robot sono stati trasferiti da ROS 1 a ROS 2. Così, abbiamo deciso di assumerci il compito noi stessi. A causa dell'indisponibilità dell'API a basso livello per ROS 2, abbiamo trovato più semplice sviluppare la nostra [implementazione](https://github.com/Fingerling42/mybuddy280-ros2-robonomics) del pacchetto ROS 2, dove abbiamo potuto aggiungere il controllo di myBuddy attraverso Robonomics. Per fare ciò, abbiamo preso il modulo Python [pymycobot](https://pypi.org/project/pymycobot/) e implementato il nostro driver ROS 2.

Il driver personalizzato attuale può ottenere gli stati di ciascuna articolazione per entrambe le braccia e il polso, nonché inviare angoli ad esse, pubblicare gli stati delle articolazioni del robot utilizzando Robonomics datalog e controllare le articolazioni in remoto inviando una funzione di avvio all'indirizzo del robot. Se desideri provarlo, tieni presente che l'aggiornamento della versione di ROS 2 reinstallando una nuova immagine con pacchetti su Raspberry Pi 4B può richiedere un tempo significativo (circa 2-4 ore).

In futuro, prevediamo di espandere le funzioni del driver e fornire il controllo remoto di questo robot attraverso Robonomics all'interno del nostro laboratorio a Cipro. Vogliamo inoltre includere il Robonomics ROS 2 Wrapper nell'elenco ufficiale dei pacchetti rosdistro, in modo che gli utenti possano installarlo automaticamente durante l'inizializzazione del progetto ROS 2.

Resta sintonizzato per i nostri aggiornamenti!