---
title: "Sichere Fernsteuerung von Robotik: Robonomics-Lösung"
date: 2024-04-19
published: true
locale: 'de'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "Die Fernverbindung und Steuerung Ihres eigenen intelligenten Geräts ist eine sehr beliebte Funktion bei Benutzern. Allerdings bereitet eine solch banale Aufgabe immer noch vielen unerfahrenen Benutzern Schwierigkeiten - von der Überwindung von NAT bis hin zu Sicherheitsproblemen. In einem neuen Artikel zeigen wir, wie diese Schwierigkeiten mit Hilfe von Robonomics überwunden werden können."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "Die Fernverbindung und Steuerung Ihres eigenen intelligenten Geräts ist eine sehr beliebte Funktion bei Benutzern. Allerdings bereitet eine solch banale Aufgabe immer noch vielen unerfahrenen Benutzern Schwierigkeiten - von der Überwindung von NAT bis hin zu Sicherheitsproblemen. In einem neuen Artikel zeigen wir, wie diese Schwierigkeiten mit Hilfe von Robonomics überwunden werden können."
tags: ['ROS 2', 'Smart Home']
---

Im vorherigen Artikel haben wir darüber gesprochen, wie wir die Vorteile industrieller Lösungen in der Infrastruktur eines robotisierten Smart Homes nutzen. Wir haben gezeigt, wie das ROS 2-Framework und sein Middleware-Protokoll automatische Geräteerkennung und intensive Interaktion (einschließlich in Echtzeit) innerhalb eines lokalen Netzwerks ermöglichen, was sehr praktisch ist. Allerdings ist dieser Ansatz hauptsächlich für die sogenannte Trusted Zone geeignet - den Teil des Computernetzwerks, in dem das Erscheinen von Drittanbietern unwahrscheinlich ist. In diesem Fall vertrauen wir allen laufenden Programmen und müssen keine Verschlüsselung verwenden, genauso wenig wie innerhalb eines Computers, wenn Programme Daten miteinander austauschen.

Aber was ist, wenn Sie den Betrieb von ROS 2-Geräten mit einem externen Dienst sicherstellen müssen oder einen Remote-Zugriff von außen darauf ermöglichen möchten? In solchen Momenten entsteht ein Sicherheitsproblem - nachdem ein externer Dienst (und potenziell eine bösartige Person) Zugriff auf einen ROS 2-Node erhalten hat, erhält er im Wesentlichen Zugriff auf alle anderen Nodes - er kann den gesamten internen DDS-Verkehr vollständig abhören und auf alle verfügbaren Systemdienste zugreifen.

Der klassische Kompromiss zwischen Sicherheit und Geschwindigkeit/Bequemlichkeit wird durch die Aufteilung des souveränen Smart-Home-Systems in zwei Teile gelöst - sicher und unsicher.

## ROS 2 Sicherheit

Die Kennzeichnung einer Zone mit speziellen Sicherheitsanforderungen im Arbeitsbereich von ROS 2-Nodes ist eine ziemlich nicht triviale Aufgabe. Das Standard ROS 2 Security-Paket ([sros2](https://docs.ros.org/de/rolling/Concepts/Intermediate/About-Security.html)) ist Teil von [ros-core](https://ros.org/reps/rep-2001.html#id32), auf dem alle ROS 2-Distributionen aufbauen, und laut den Kernentwicklern ist es beabsichtigt, dieses Problem zu lösen. Es bietet die Möglichkeit, eine relativ einfache Public-Key-Infrastruktur (PKI) innerhalb eines einzigen lokalen Netzwerks einzurichten. Für jeden ROS 2-Knoten werden Zugriffsrichtlinien für die Daten anderer Knoten festgelegt sowie eine Reihe von Standarddateien für solche Szenarien - kryptografische Schlüssel und Zertifikate. Während der Programmausführung "sehen" Knoten nur diejenigen Datenquellen, auf die explizit im Konfigurationsbereich beim Projektstart zugegriffen wird. Dieser Ansatz hat jedoch einen großen Nachteil - der gesamte Datenverkehr im System ist verschlüsselt, was sich bei Netzwerklasten, die von DDS erzeugt werden, auf die Leistung auswirken kann. Es wird erforderlich sein, alle Zugriffsrichtlinien auszuschreiben und Schlüssel für alle Knoten zu generieren. Dies ist sehr schwierig einzurichten und zu pflegen. Und vor allem verlieren wir den Hauptvorteil des ROS 2-Middleware - die Leistung.

## Brücken

Eine weitere Lösung besteht darin, sogenannte Gateways zu erstellen, die die erforderlichen Daten übertragen, während alles andere privat bleibt. Dies wird in der Regel durch die Verwendung von VPN- oder SSH-Tunneln erreicht. Ein separater Knoten wird im sicheren Datenaustauschraum erstellt, der eine öffentliche Adresse für externe Verbindungen hat. In diesem Fall wird das Sicherheitsmanagement nur auf der Ebene dieses Knotens durchgeführt (im Wesentlichen ein Fenster zur Außenwelt), ohne alle anderen zu beeinträchtigen. Dieser Ansatz wird in den Projekten [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) und [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds) verwendet, hat aber auch seine Nachteile. In diesem Szenario müssen Sie einen sicheren Kommunikationskanal einrichten, der streng an die IP-Adresse oder den Domainnamen des Vertragspartners gebunden ist. Diese können sich ändern, blockiert werden oder anfällig für Angriffe sein. Zum Zeitpunkt der Erstellung von SSH wurde dies nicht berücksichtigt. Darüber hinaus stützt sich SSH hauptsächlich auf das Zugriffskontrollsystem des Betriebssystems, mit all seinen inhärenten Nachteilen.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Klassische Fernsteuerung über öffentliche IP und SSH/VPN" />

*So verbinden Benutzer heutzutage in der Regel remote mit ihren Robotern. Dieser Ansatz hat jedoch einige Nachteile. Er erfordert eine öffentliche IP und/oder einen DNS-Namen, die in einigen Ländern blockiert werden können. Außerdem erfordert er die Speicherung zusätzlicher privater Schlüssel an potenziell unsicheren Orten (z. B. ~/.ssh).*

SSH, hauptsächlich von Systemadministratoren und IT-Spezialisten verwendet, erfordert grundlegende Kenntnisse der Bash-Befehlszeile und Vertrauen in das Betriebssystem, da Verschlüsselungsschlüssel direkt im Dateisystem oder im SSH-Agenten gespeichert sind. Die Verwaltung von Zugriffsschlüsseln bleibt eine ziemlich komplexe Aufgabe für den durchschnittlichen Benutzer, um einen sicheren Weg zum Schutz ihrer Daten zu gewährleisten.

## Web3-Lösung

Wie wir sehen können, sind die oben genannten Methoden nicht ohne ihre Nachteile, daher werden wir eine mögliche Lösung für das Problem unter Verwendung von Peer-to-Peer-Netzwerktechnologien in Betracht ziehen, auf denen Robonomics aufgebaut ist. In diesem Fall kann die dezentralisierte Robonomics-Cloud als sichere Routing-Tabelle betrachtet werden, deren Adressen die öffentlichen Schlüssel der Knoten sind. Sie benötigen einen lokalen Robonomics-Knoten und das Wissen darüber, welchen öffentlichen Schlüssel Ihr Vertragspartner hat, um nicht vom DNS-System (einschließlich Domain-Registrare und Server) und der IP-Adressenblockierung abhängig zu sein. Die von Robonomics verwendete [libP2P](https://libp2p.io/) Bibliothek kann verschiedene Transportprotokolle für die Nachrichtenzustellung verwenden.

Darüber hinaus sind mit dem Fortschritt der Web3-Technologien effizientere Methoden zur Verwaltung kritischer Informationen, einschließlich privater Schlüssel, entstanden. Eine davon ist eine mnemonische Phrase oder ein Seed - eine Reihe von 12 oder 24 Wörtern, die zur Erstellung von Konten in dezentralen Netzwerken verwendet werden. Diese Methode ist bequem und sicher, da der Seed während der Initialisierung einmal auf einem externen Medium (z. B. auf Papier) geschrieben wird und nur zur Wiederherstellung des Kontos verwendet wird. Aus der mnemonischen Phrase wird ein Master-Schlüssel erstellt, aus dem eine beliebige Schlüsselhierarchie für verschiedene Aufgaben erstellt werden kann (siehe **[Hierarchisch deterministische Schlüssel](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)**). Dies vereinfacht die Schlüsselverwaltung und ihre Wiederherstellung, wenn sie verloren gegangen sind. Wenn eine bösartige Person Zugriff auf eines Ihrer Schlüsselpaare erhält, kann sie keine Informationen über andere Schlüssel erhalten, die aus der mnemonischen Phrase erstellt wurden. Das Feature der weichen abgeleiteten Schlüssel ermöglicht es Ihnen, den Besitz des Stammkontos zu bestätigen, ohne ihn offenzulegen. Da weiche Schlüssel unter Verwendung des übergeordneten öffentlichen Schlüssels abgeleitet werden können, können sie verwendet werden, um den übergeordnetenSchlüssel, ohne den übergeordneten Seed freizulegen.

## Fernsteuerung in Home Assistant

Lassen Sie uns den Verbindungsvorgang genauer betrachten. Die dezentralisierte [Robonomics-Anwendung](https://robonomics.app/) (oder einfach DApp) funktioniert direkt in Ihrem Browser, ohne dass Sie zusätzliche Software installieren müssen oder Schlüssel im Dateisystem in einer Umgebung vieler Programme speichern müssen, deren Sicherheit Sie nicht sicher sein können. Die Verwaltung der Zugriffsschlüssel erfolgt über die Polkadot JS-Erweiterung sowie mithilfe einer externen Hardware-Schlüsselspeicherung (zum Beispiel [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault)) für zusätzliche Zuverlässigkeit. Neben spezialisierter Software zur Interaktion mit Robonomics enthält die DApp auch einen leichten libP2P-Knoten, über den die Verbindung zu Home Assistant hergestellt wird.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="Home Assistant Fernsteuerung" />

Der Besitzer eines Robonomics-Webdienstabonnements verwaltet die Zugriffsrechte auf die Smart-Home-Infrastruktur über das, was als Controller bekannt ist - ein Konto, das alle sensiblen Informationen in verschlüsselter Form in einem digitalen Zwilling verwaltet. Nur Benutzer, die dem Abonnement hinzugefügt wurden, können diese Daten entschlüsseln. Neben Zugriffsschlüsseln speichert der digitale Zwilling auch die DApp-Konfiguration und die sogenannte libP2P-Multi-Adresse, mit der die DApp für eine sichere Verbindung verbunden ist. Die Multi-Adresse ist eine der Innovationen, die den libP2P-Ansatz so einzigartig und flexibel machen. Dies ist ein spezielles Adressformat für Knoten, das das Vorhandensein vieler IP-Adressen, Transport- und Netzwerkidentifikatoren, Protokolle und Ports impliziert, über die Sie einen bestimmten Knoten kontaktieren können. Die vollständige Liste der unterstützten Protokolle finden Sie in der [Spezifikation](https://github.com/multiformats/multiaddr/blob/master/protocols.csv).

Daher extrahiert der dem Abonnement hinzugefügte Benutzer eine Multi-Adresse aus dem Robonomics-Digitalzwilling und stellt eine sichere Verbindung mit einer Peer-ID her, die nur ihm bekannt ist. Erfolg!

## Fernsteuerung in ROS 2

Ebenso können Sie die vorhandenen Funktionen von Robonomics nutzen, um mit Robotern zu interagieren. Das Robossembler-Team hat im Rahmen des Robonomics Grant-Programms ein Proof-of-Concept-Projekt namens [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge) entwickelt. Diese Brücke ermöglichtIhre ROS 2-Knoten können mit einem externen Dienst, einem entfernten Arbeitsplatz oder einem anderen ROS 2-System verbunden werden.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="ROS 2 Remote Control with Robonomics" />

*Eine Illustration, wie die Fernsteuerung eines Heimroboters im Fall von ROS 2 aussehen könnte. Dieser Ansatz bietet eine Reihe von signifikanten Vorteilen: Es ist keine öffentliche IP-Adresse erforderlich, der Zugriff auf den Roboter ist auch durch Netzwerk-Firewalls (NAT) möglich, private kryptografische Schlüssel werden nicht auf der Festplatte gespeichert und sind zuverlässig geschützt.*

Das in ROS 2 verwendete Protokoll DDS kombiniert sich auf natürliche Weise mit libP2P aufgrund seines ähnlichen Publisher-Subscriber-Modells für die Knoteninteraktion. Mit Hilfe der Robonomics-Brücke können ROS 2-Knoten und ihre Schnittstellen - Themen, Dienste, Nachrichtentypen (zum Beispiel unter Verwendung des eProsima Integration Service) deklarativ konfiguriert werden, durch die eine Interaktion mit dem Roboter von außen möglich ist. Dies ermöglicht auch eine zusätzliche Sicherheitsebene bei der Verbindung zu einem entfernten Computer. Der Mechanismus zum Abrufen der PeerID des Gegenübers kann derselbe sein wie im Fall von Home Assistant - über eine Digital Twin-Anfrage vom Robonomics-Knoten, wobei der einzige Unterschied darin besteht, dass anstelle des Home Assistant Servers ein ROS 2-Roboter und anstelle des libP2P-Websocker-Proxy ein mit dem Roboter verbundener Robonomics ROS 2 Wrapper vorhanden sein wird.

## Potenzielle Möglichkeiten in der Zukunft

Dies sind jedoch nicht alle Möglichkeiten, die eine dezentralisierte Cloud auf Web3-Technologien bieten kann. Im oben beschriebenen Beispiel werden diese Technologien für die vergleichsweise einfache Übertragung von Nachrichtendatenströmen zwischen entfernten Computern verwendet.

Dies kann als das grundlegende Transportniveau im Robonomics-Netzwerkstapel bezeichnet werden, das die Grundlage für die Implementierung komplexerer Protokolle auf höherer Ebene bildet. Angefangen bei SSH-Analoga, die eine interaktivere Interaktion von Benutzern mit ihren cyber-physischen Systemen implizieren, bis hin zu Anwendungsprotokollen, die die Interaktion einer großen Anzahl von Benutzern der autonomen robotischen Infrastruktur implizieren.

Beispielsweise kann die Entscheidung, mit der Produktion eines bestimmten Produkts zu beginnen, mit einer Abstimmung innerhalb einer Organisation potenzieller Verbraucher dieses Produkts in Bezug auf wirtschaftliche Machbarkeit verknüpft werden. Derzeit wird die Entscheidung, mit der Produktion zu beginnen, durch Investitionsmechanismen getroffen, bei denen Investoren, nachdem sie Informationen über die potenzielle Nachfrage erhalten haben, Anteile einzelner Unternehmen erwerben können, die diese Nachfrage in Zukunft befriedigen können.. Wenn Verbraucher aktiver an der Entwicklung und Preisgestaltung neuer Produkte teilnehmen können, können wir langfristig zu einem Betriebsmodus übergehen, bei dem die Produktion automatisch umstrukturiert wird, um die Nachfrage gemäß den von Verbrauchern in das Netzwerk eingegebenen Daten zu befriedigen.