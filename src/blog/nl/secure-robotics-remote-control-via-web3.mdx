---
title: "Beveiligde Robotica Afstandsbediening: Robonomics Oplossing"
date: 2024-04-19
published: true
locale: 'nl'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "Op afstand verbinding maken en controle hebben over je eigen slimme apparaat is een zeer populaire functie onder gebruikers. Echter, zo'n triviaal taak veroorzaakt nog steeds veel moeilijkheden voor onervaren gebruikers - van het overwinnen van NAT tot beveiligingsproblemen. In een nieuw artikel zullen we laten zien hoe deze moeilijkheden kunnen worden overwonnen met behulp van Robonomics."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "Op afstand verbinding maken en controle hebben over je eigen slimme apparaat is een zeer populaire functie onder gebruikers. Echter, zo'n triviaal taak veroorzaakt nog steeds veel moeilijkheden voor onervaren gebruikers - van het overwinnen van NAT tot beveiligingsproblemen. In een nieuw artikel zullen we laten zien hoe deze moeilijkheden kunnen worden overwonnen met behulp van Robonomics."
tags: ['ROS 2', 'Slim Thuis']
---

In het vorige artikel spraken we over hoe we de voordelen van industriële oplossingen gebruiken in de infrastructuur van een gerobotiseerd slim huis. We lieten zien hoe het ROS 2-framework en het bijbehorende protocol automatische apparaatdetectie en intensieve interactie (inclusief in realtime) tussen hen binnen een lokaal netwerk bieden, wat zeer handig is. Echter, deze aanpak is voornamelijk geschikt voor de zogenaamde Vertrouwde Zone - dat deel van het computernetwerk waar de verschijning van externe actoren onwaarschijnlijk is. In dit geval vertrouwen we alle draaiende programma's en hoeven we geen versleuteling te gebruiken op dezelfde manier als het niet wordt gebruikt binnen één computer wanneer programma's gegevens met elkaar uitwisselen.

Maar wat als je de werking van ROS 2-apparaten moet garanderen met een externe service of externe toegang tot hen moet bieden? Op zulke momenten ontstaat er een beveiligingsprobleem - door toegang te krijgen tot één ROS 2-node, krijgt een externe service (en potentieel een kwaadwillende persoon) in feite toegang tot alle andere nodes - het kan volledig luisteren naar al het interne DDS-verkeer en toegang krijgen tot alle beschikbare systeemdiensten.

Het klassieke compromis tussen beveiliging en snelheid/gemak wordt opgelost door het soevereine slimme huissysteem op te delen in twee delen - beveiligd en onbeveiligd.

## ROS 2 Beveiliging

Het aanduiden van een zone met speciale beveiligingseisen in de werkruimte van ROS 2-nodes is een vrij niet-triviale taak. Het standaard ROS 2 Security-pakket ([sros2](https://docs.ros.org/nl/rolling/Concepts/Intermediate/About-Security.html)) maakt deel uit van [ros-core](https://ros.org/reps/rep-2001.html#id32), waarop alle ROS 2 distributies zijn gebouwd, en volgens de kernontwikkelaars is het bedoeld om dit probleem op te lossen. Het biedt de mogelijkheid om een relatief eenvoudige public key infrastructure (PKI) op te zetten binnen een enkel lokaal netwerk. Voor elke ROS 2 node worden toegangsbeleidsregels voor de gegevens van andere nodes ingesteld, evenals een set standaardbestanden voor dergelijke scenario's - cryptografische sleutels en certificaten. Tijdens de uitvoering van het programma "zien" nodes alleen die gegevensbronnen waartoe expliciet toegang is geschreven in de configuratie bij de lancering van het project. Deze aanpak heeft echter een groot nadeel - al het verkeer in het systeem is versleuteld, wat de prestaties kan beïnvloeden onder de netwerkbelasting die wordt gecreëerd door DDS. Het zal nodig zijn om alle toegangsbeleidsregels uit te schrijven en sleutels te genereren voor alle nodes. Dit is zeer moeilijk in te stellen en te onderhouden. En het belangrijkste is dat we het belangrijkste voordeel van ROS 2 Middleware verliezen - prestaties.

## Bruggen

Een andere oplossing is om zogenaamde gateways te creëren, die de benodigde gegevens doorgeven terwijl ze alles anders privé houden. Dit wordt meestal bereikt met behulp van VPN- of SSH-tunnels. Er wordt een aparte node gecreëerd in de veilige gegevensuitwisselingsruimte, die een openbaar adres heeft voor externe verbindingen. In dit geval wordt het beheer van de beveiliging alleen op het niveau van deze node uitgevoerd (wezenlijk een venster naar de buitenwereld), zonder invloed op alle anderen. Deze aanpak wordt gebruikt in de projecten [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) en [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds), maar het heeft ook zijn nadelen. In dit scenario moet u een veilig communicatiekanaal opzetten dat strikt is gekoppeld aan het IP-adres of domeinnaam van de tegenpartij. Deze kunnen veranderen, geblokkeerd worden of kwetsbaar zijn voor aanvallen. Ten tijde van de creatie van SSH werd hier geen rekening mee gehouden. Bovendien vertrouwt SSH voornamelijk op het toegangscontrolesysteem van het besturingssysteem, met al zijn inherente nadelen.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Klassieke externe bediening via openbaar IP en SSH/VPN"/>

*Hier is hoe gebruikers tegenwoordig meestal verbinding maken met hun robots op afstand. Deze aanpak heeft echter enkele nadelen. Het vereist een openbaar IP-adres en/of DNS-naam, die in sommige landen geblokkeerd kunnen worden. Het vereist ook de opslag van extra privésleutels op mogelijk onveilige locaties (bijv. ~/.ssh).*

SSH, voornamelijk gebruikt door systeembeheerders en IT-specialisten, vereist basiskennis van de Bash-opdrachtregel en vertrouwen in het besturingssysteem, aangezien versleutelingssleutels rechtstreeks in het bestandssysteem of SSH-agent worden opgeslagen. Het beheren van toegangssleutels blijft een vrij complexe taak voor de gemiddelde gebruiker om op een veilige manier hun gegevens te beschermen.

## Web3 Oplossing

Zoals we kunnen zien, zijn de bovenstaande methoden niet zonder hun nadelen, dus zullen we een mogelijke oplossing voor het probleem overwegen met behulp van peer-to-peer netwerktechnologieën, waarop Robonomics is gebouwd. In dit geval kan de gedecentraliseerde Robonomics-cloud worden beschouwd als een veilige routeringstabel, waarvan de adressen van de tegenpartijen de openbare sleutels van de knooppunten zijn. U heeft een lokale Robonomics-node nodig en kennis van welke openbare sleutel uw tegenpartij heeft, om niet afhankelijk te zijn van het DNS-systeem (inclusief domeinnaamregistrars en servers) en IP-adresblokkering. De [libP2P](https://libp2p.io/) bibliotheek, die Robonomics gebruikt, kan verschillende transportprotocollen gebruiken voor berichtaflevering.

Verder, met de vooruitgang van Web3-technologieën, zijn er efficiëntere methoden ontstaan voor het beheren van kritieke informatie, inclusief privésleutels. Een daarvan is een mnemonische zin of zaad - een reeks van 12 of 24 woorden, gebruikt om accounts aan te maken in gedecentraliseerde netwerken. Deze methode is handig en veilig, aangezien het zaad slechts één keer tijdens de initialisatie op een extern medium (bijvoorbeeld op papier) wordt geschreven en alleen wordt gebruikt om het account te herstellen. Vanuit de mnemonische zin wordt een hoofdsleutel gemaakt, waaruit elke sleutelhiërarchie voor verschillende taken kan worden gemaakt (zie **[Hiërarchisch deterministische sleutels](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)**). Dit vereenvoudigt het sleutelbeheer en hun herstel als ze verloren zijn gegaan. Als een kwaadwillende toegang krijgt tot een van uw sleutelparen, kunnen ze geen informatie krijgen over andere sleutels die zijn gemaakt vanuit de mnemonische zin. De functie voor zachte afgeleide sleutels stelt u in staat om eigendom van het hoofdaccount te bevestigen zonder het bekend te maken. Omdat zachte sleutels kunnen worden afgeleid met behulp van de ouderpublieke sleutel, kunnen ze worden gebruikt om de ouder te identificeren.sleutel zonder de ouderzaad bloot te stellen.

## Afstandsbediening in Home Assistant

Laten we het verbindingsproces gedetailleerder bekijken. De gedecentraliseerde [Robonomics-toepassing](https://robonomics.app/) (of gewoon DApp) werkt rechtstreeks in uw browser, het vereist niet dat u extra software installeert of sleutels opslaat in het bestandssysteem in een omgeving met een groot aantal programma's waarvan de beveiliging niet gegarandeerd kan worden. Toegangsbeheer van sleutels wordt uitgevoerd via de Polkadot JS-extensie, evenals met behulp van een externe hardware sleutelopslag (bijvoorbeeld [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault)) voor extra betrouwbaarheid. Naast gespecialiseerde software voor interactie met Robonomics, omvat DApp ook een lichtgewicht libP2P-node, waarmee de verbinding met Home Assistant tot stand komt.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="Home Assistant Afstandsbediening" />

De eigenaar van een Robonomics Web Service-abonnement beheert de toegangsrechten tot de slimme huisinfrastructuur via wat bekend staat als een controller - een account dat alle gevoelige informatie in gecodeerde vorm beheert in een digitale tweeling. Alleen gebruikers die aan het abonnement zijn toegevoegd, kunnen deze gegevens decoderen. Naast toegangssleutels slaat de digitale tweeling ook de DApp-configuratie en de zogenaamde libP2P multi-adres op waarmee de DApp verbinding maakt voor een veilige verbinding. Multi-adres is een van die innovaties die de libP2P-benadering zo uniek en flexibel maken. Dit is een speciaal adresformaat voor knooppunten, wat impliceert dat er veel IP-adressen, transport- en netwerkidentificatoren, protocollen en poorten aanwezig zijn waarmee u contact kunt opnemen met een specifiek knooppunt. De volledige lijst van ondersteunde protocollen wordt gepresenteerd in de [specificatie](https://github.com/multiformats/multiaddr/blob/master/protocols.csv).

Dus, de gebruiker die aan het abonnement is toegevoegd, haalt een multi-adres uit de Robonomics digitale tweeling en legt een veilige verbinding met een Peer ID die alleen aan hem bekend is. Succes!

## Afstandsbediening in ROS 2

Op dezelfde manier kunt u de bestaande functies van Robonomics gebruiken om met robots te communiceren. Het Robossembler-team, onder het Robonomics Grant Programma, ontwikkelde een Proof of Concept-project genaamd [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge). Deze brug maakt het mogelijkJe ROS 2-nodes om verbinding te maken met een externe service, een externe werkstation of een ander ROS 2-systeem.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="ROS 2 Remote Control met Robonomics" />

*Een illustratie van hoe de externe bediening van een huisrobot eruit zou kunnen zien in het geval van ROS 2. Deze aanpak biedt een aantal belangrijke voordelen: er is geen behoefte aan een openbaar IP-adres, toegang tot de robot is zelfs beschikbaar via netwerkfirewalls (NAT), privécryptografische sleutels worden niet opgeslagen op de schijf en zijn betrouwbaar beschermd.*

Het protocol dat wordt gebruikt in ROS 2, DDS, combineert natuurlijk met libP2P vanwege zijn vergelijkbare uitgever-abonnee model voor node-interactie. Met behulp van de Robonomics-brug kunnen ROS 2-nodes en hun interfaces - onderwerpen, services, berichttypen (bijvoorbeeld door gebruik te maken van de eProsima Integration Service) declaratief geconfigureerd worden, waardoor interactie met de robot van buitenaf mogelijk is. Dit zorgt ook voor een extra beveiligingsniveau bij het verbinden met een extern computersysteem. Het mechanisme om de PeerID van de tegenpartij te verkrijgen kan hetzelfde zijn als in het geval van Home Assistant - via een Digitaal Tweelingverzoek van de Robonomics-node, met als enige verschil dat in plaats van de Home Assistant Server er een ROS 2-robot zal zijn, en in plaats van de libP2P-websocker-proxy er een Robonomics ROS 2 Wrapper verbonden zal zijn met de robot.

## Potentiële kansen in de toekomst

Dit zijn echter niet alle mogelijkheden die een gedecentraliseerde cloud op Web3-technologieën kan bieden. In het bovenstaande voorbeeld worden deze technologieën gebruikt voor de relatief eenvoudige overdracht van berichtgegevensstromen tussen externe computers.

Dit kan worden beschouwd als het basis transportniveau in de Robonomics-netwerkstack, dat de basis vormt voor de implementatie van meer complexe protocollen op een hoger niveau. Beginnend bij SSH-analogen, wat meer interactieve interactie van gebruikers met hun cyber-fysieke systemen impliceert, en eindigend met toepassingsprotocollen die de interactie van een groot aantal gebruikers van autonome robotinfrastructuur impliceren.

Bijvoorbeeld kan de beslissing om met de productie van een bepaald product te beginnen worden gekoppeld aan een stemming binnen een organisatie van potentiële consumenten van dit product, rekening houdend met de economische haalbaarheid. Momenteel wordt de beslissing om met een productie te starten genomen via investeringsmechanismen, waarbij investeerders, na informatie te hebben ontvangen over de potentiële vraag, aandelen kunnen verwerven van individuele bedrijven die in de toekomst aan deze vraag kunnen voldoen.. Als consumenten actiever kunnen deelnemen aan de ontwikkeling en prijsstelling van nieuwe producten, kunnen we op de lange termijn overschakelen naar een modus waarbij de productie automatisch wordt herstructureerd om aan de vraag te voldoen op basis van gegevens die door consumenten in het netwerk worden verstrekt.