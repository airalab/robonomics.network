---
title: "Automatisering: Thuis ontmoet Industrieel"
date: 2024-03-24
published: true
locale: 'nl'
cover_image: /blog/images/automation-home-meets-industrial-mybuddy280/Cover.png
description: "ROS 2 is een framework dat snel populair wordt voor het ontwikkelen van robotica-toepassingen. Het omvat de opgebouwde ervaring van de industrie en deelt deze met de wereldwijde gemeenschap. Ons team is actief betrokken bij de ontwikkeling van nieuwe ROS 2-pakketten voor de robots die we gebruiken, evenals bij het integreren ervan in het gedecentraliseerde Robonomics-netwerk."
related: ['Robonomics Helps Enable Rust for ROS 2']
abstract: "ROS 2 is een framework dat snel populair wordt voor het ontwikkelen van robotica-toepassingen. Het omvat de opgebouwde ervaring van de industrie en deelt deze met de wereldwijde gemeenschap. Ons team is actief betrokken bij de ontwikkeling van nieuwe ROS 2-pakketten voor de robots die we gebruiken, evenals bij het integreren ervan in het gedecentraliseerde Robonomics-netwerk."
tags: ['ROS 2', 'Slimme Thuis']
---

Technologieën die ontwikkeld zijn in de ene industrie vinden vaak brede toepassing in andere industrieën, zelfs als ze oorspronkelijk niet voor hen bedoeld waren. Zo onthulde het internet, oorspronkelijk ontwikkeld voor militair gebruik, zijn volledige potentieel in de civiele sfeer en werd het een integraal onderdeel van het moderne leven. Een vergelijkbare trend kan zich voordoen in de industrie, waar technologieën die zijn ontwikkeld voor bedrijfsscenario's ook voordelen kunnen bieden voor eindgebruikers.

Historisch gezien hebben thuisautomatisering en industriële robotica zich afzonderlijk ontwikkeld. Vanwege hun hoge kosten en veiligheidsproblemen zijn industriële robots voornamelijk beperkt gebleven tot grootschalige productie. De software voor het beheren van de productie was beperkt tot eigen productie-uitvoering en computerondersteunde productiesystemen. Thuisautomatisering vertegenwoordigde tegelijkertijd meestal een systeem van vrij eenvoudige apparaten voor interactie met gebruikersgadgets, huishoudelijke apparaten, verlichting, verwarming, communicatie. De nadruk in communicatie lag op draadloze communicatie.

We zien echter trends. Aan de ene kant worden draadloze communicatieprotocollen uit de consumentensfeer geleidelijk aangepast voor industriële toepassingen — bijvoorbeeld verschijnen er industriële versies van Wi-Fi of Bluetooth. Aan de andere kant worden manipulatorrobots betaalbaarder en worden ze overwogen voor gebruik buiten de industrie. Zelfs nu kunnen we bedenken hoe in de toekomst bijvoorbeeld veilige collaboratieve robots een integraal onderdeel van het huis zullen worden en ons leven gemakkelijker zullen maken door te helpen bij koken en andere routinematige huishoudelijke taken. Ook open source-implementaties van industriële communicatieprotocollen — zoals het DDS-middlewareprotocol onderhet vastzetten van het ROS 2-framework — worden het erfgoed van enthousiastelingen van over de hele wereld.

ROS 1 werd ontwikkeld voor het beheer van enkele robots en kon niet voldoen aan de eisen van productiebedrijven: realtime werking, fouttolerantie in onstabiele communicatieomstandigheden, interactie met een groot aantal apparaten. Zo begon de ontwikkeling van ROS 2, dat oorspronkelijk specifiek werd gepositioneerd voor de behoeften van de industrie en nu mainstream wordt in de robotica. In het midden van 2023 vond een belangrijke gebeurtenis plaats — 5 jaar na de verschijning van ROS 2 Dashing in 2019, het aantal ROS 2-pakketten dat door ingenieurs wordt gebruikt, volgens [metrics.ros.org](https://metrics.ros.org/packages_rosdistro.html), overtrof ROS 1-pakketten, en nu is ongeveer 70% van de softwarepakketten die worden gedownload van de officiële repositories bedoeld voor ROS 2.

## Voordelen van ROS 2 voor scenario's voor thuisautomatisering

Het Robonomics-team staat aan de voorhoede van dit proces en ondersteunt actief de ROS 2-community. Met onze ondersteuning worden ROS 2-bindings voor Rust ontwikkeld (zie het [in ons blog](https://robonomics.network/blog/ros-2-rust-report-2022/)), evenals een [ROS 2 Wrapper](https://github.com/Fingerling42/robonomics-ros2) voor het gebruik van de belangrijkste functies van de gedecentraliseerde cloud van Robonomics. We testen ook regelmatig apparaten die ROS 2 ondersteunen, om specifiek onze software in actie op hen te controleren. Als een van dergelijke robots hebben we onlangs de myBuddy 280 aangeschaft — een goedkope dubbelarmige manipulator voor training en onderzoek van [Elephant Robotics](https://www.elephantrobotics.com/en/). De robot kan tot ongeveer 250 gram tillen en heeft een prijs van ongeveer $1700, waardoor hij relatief betaalbaar is voor beginnende gebruikers.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_1_myBuddy_280.png" alt="myBuddy 280 dual arm robot manupulator" />

Aan de hand van dit voorbeeld van deze robot zijn de voordelen van ROS 2 zeer duidelijk zichtbaar, waardoor het potentiële gebruik van dit framework in scenario's voor thuisautomatisering mogelijk is. Met name dankzij het DDS-middlewareprotocol kunt u myBuddy gebruiken in combinatie met een relatief krachtige desktop-pc en een volwaardige robot toevoegen aan een typische slimme woningstructuur. Als de robot en de computer zijn verbonden via deop hetzelfde lokale netwerk en gebruik dezelfde [DOMAIN_ID](https://docs.ros.org/nl/rolling/Concepts/Intermediate/About-Domain-ID.html), kunnen ze communiceren zonder extra configuratie. Basissoftware zoals stuurprogramma's en hardwarebeschrijvingspakketten draaien op de Raspberry Pi van de robot. De rest van de benodigde toepassingssoftware zoals "slimme" bewegingsplanners zoals MoveIt, simulatoren zoals Gazebo, monitoring- en visualisatietools zoals RViz, Robonomics-node, machine learning, batch log processing, IPFS gedistribueerde gegevensoverdrachtnode en andere taken die aanzienlijke rekenkracht vereisen, kunnen worden uitgevoerd op deze krachtigere machine.

Deze opstelling zorgt voor een optimale verdeling van rekenresources en creëert in feite een architectuur die lijkt op microservices. Dankzij het ROS 2-platform en het onderliggende DDS-middlewareprotocol is deze flexibiliteit mogelijk, waardoor elk apparaat de taken kan uitvoeren die het beste passen bij zijn mogelijkheden. Via automatische apparaatdetectiemechanismen die zijn ingebouwd in DDS, zullen ROS 2-onderwerpen en services elkaar vinden zonder extra instellingen.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_2_ros2_dds_smart_home.png" alt="Slim huis met ROS 2 en DDS" />

Het moet ook worden opgemerkt dat de architectuur van ROS 2 een scheiding van het transportprotocol (zoals DDS) impliceert in een afzonderlijke laag genaamd ROS Middleware, waardoor het gemakkelijker wordt om over te schakelen van de ene protocolimplementatie naar de andere. Na langdurige discussies heeft de ROS-gemeenschap onlangs besloten over te stappen naar een lichter protocol genaamd Zenoh, dat gepland staat voor 2024. Voor een diepere duik in dit onderwerp raden we aan om te verwijzen naar het [ROS 2 MIddleware Alternatives-rapport](https://discourse.ros.org/uploads/short-url/o9ihvSjCwB8LkzRklpKdeesRTDi.pdf), waarin informatie staat over alle DDS-alternatieven die in 2023 zijn overwogen.

## Avonturen van myBuddy en Robonomics-compatibele stuurprogramma

Ondanks dat de myBuddy 280 wordt gepromoot als ROS 2-compatibel, bleek het onvoldoende te zijn voor volledige werking in ROS 2 (zelfs zonder bewegingsplanningssoftware zoals MoveIt2). Ten eerste moesten we de standaard meegeleverde Raspberry Pi 4B vervangen door een krachtiger model met 8 GB RAM om aan onze behoeften te voldoen. Ten tweede, na het testen van het ROS 2-pakket voor myBuddy van de fabrikant, liepen we tegen problemen aan. Zoals gebruikelijkIn de open-source wereld betekent het feit dat iets is gepubliceerd in een openbare repository niet dat het functionaliteit garandeert. De robot was vooraf geïnstalleerd met de momenteel niet-ondersteunde ROS 2 Galactic distributie, die in 2022 is verlopen (je kunt overigens meer lezen over de ondersteuningsperiodes van distributies [hier](https://docs.ros.org/en/rolling/Releases.html)). Ondanks alles hebben we geprobeerd de robot te laten werken op de verouderde distributie en zijn we snel zogenaamde deadlocks tegengekomen - dit gedrag waarbij gelanceerde subprogramma's (of rekenprocessen) elkaars werk blokkeren. Na wat onderzoek kwamen we erachter dat deze fouten waren opgelost in de LTS Distributie van ROS 2 Humble.

Helaas zijn de ontwikkelaars van Elephant Robotics enkele jaren geleden gestopt met het bijwerken van pakketten, en nog belangrijker, niet alle benodigde pakketten voor de robot zijn overgezet van ROS 1 naar ROS 2. Daarom hebben we besloten om de taak zelf op ons te nemen. Vanwege de onbeschikbaarheid van de low-level API voor ROS 2 vonden we het gemakkelijker om onze eigen [implementatie](https://github.com/Fingerling42/mybuddy280-ros2-robonomics) van het ROS 2 pakket te ontwikkelen, waar we de controle over myBuddy via Robonomics konden toevoegen. Hiervoor hebben we de Python-module [pymycobot](https://pypi.org/project/pymycobot/) genomen en onze eigen ROS 2 driver geïmplementeerd.

De huidige aangepaste driver kan de status van elk gewricht voor zowel armen als pols ophalen en hoeken naar hen sturen, robotgewrichtsstatussen publiceren met behulp van Robonomics datalog en externe gewrichtsbesturing mogelijk maken door een lanceerfunctie naar het adres van de robot te sturen. Als je het wilt proberen, houd er dan rekening mee dat het bijwerken van de ROS 2-versie door het opnieuw installeren van een nieuwe image met pakketten op Raspberry Pi 4B aanzienlijk wat tijd kan kosten (ongeveer 2-4 uur).

In de toekomst zijn we van plan de functies van de driver uit te breiden en externe controle van deze robot via Robonomics te bieden binnen ons laboratorium in Cyprus. We willen ook de Robonomics ROS 2 Wrapper opnemen in de officiële lijst van rosdistro-pakketten, zodat gebruikers het automatisch kunnen installeren bij het initialiseren van het ROS 2-project.

Blijf op de hoogte van onze updates!