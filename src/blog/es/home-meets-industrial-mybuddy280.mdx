---
title: "Automatización: Hogar se encuentra con Industrial"
date: 2024-03-24
published: true
locale: 'es'
cover_image: /blog/images/automation-home-meets-industrial-mybuddy280/Cover.png
description: "ROS 2 es un marco que rápidamente se está volviendo popular para desarrollar aplicaciones de robótica. Incluye la experiencia acumulada de la industria y la comparte con la comunidad global. Nuestro equipo está activamente involucrado en el desarrollo de nuevos paquetes ROS 2 para los robots que utilizamos, así como en integrarlos en la red descentralizada de Robonomics."
related: ['Robonomics Helps Enable Rust for ROS 2']
abstract: "ROS 2 es un marco que rápidamente se está volviendo popular para desarrollar aplicaciones de robótica. Incluye la experiencia acumulada de la industria y la comparte con la comunidad global. Nuestro equipo está activamente involucrado en el desarrollo de nuevos paquetes ROS 2 para los robots que utilizamos, así como en integrarlos en la red descentralizada de Robonomics."
tags: ['ROS 2', 'Hogar Inteligente']
---

Las tecnologías desarrolladas en una industria a menudo se encuentran siendo ampliamente aplicadas en otras industrias, incluso si no fueron diseñadas originalmente para ellas. Así, internet, desarrollada originalmente para uso militar, reveló su máximo potencial en el ámbito civil, convirtiéndose en una parte integral de la vida moderna. Una tendencia similar puede ocurrir en la industria, donde las tecnologías desarrolladas para escenarios empresariales también pueden beneficiar a los usuarios finales.

Históricamente, la automatización del hogar y la robótica industrial han evolucionado por separado. Debido a su alto costo y preocupaciones de seguridad, los robots industriales han estado principalmente limitados a la producción a gran escala. El software para gestionar la producción estaba confinado dentro de sistemas de ejecución de fabricación y fabricación asistida por computadora propietarios. La automatización del hogar, al mismo tiempo, generalmente representaba un sistema de dispositivos bastante simples para interactuar con dispositivos de usuario, electrodomésticos, iluminación, calefacción, comunicación. El énfasis en la comunicación estaba en la comunicación inalámbrica.

Sin embargo, estamos viendo tendencias. Por un lado, los protocolos de comunicación inalámbrica del ámbito del consumidor se están adaptando gradualmente para aplicaciones industriales, por ejemplo, están apareciendo versiones industriales de Wi-Fi o Bluetooth. Por otro lado, los robots manipuladores se están volviendo más asequibles y están comenzando a ser considerados para su uso más allá de la industria. Incluso ahora, podemos reflexionar sobre cómo en el futuro, por ejemplo, los robots colaborativos seguros se convertirán en una parte integral del hogar y podrán hacer nuestras vidas más convenientes, ayudando en la cocina y otras tareas domésticas rutinarias. Además, las implementaciones de código abierto de protocolos de comunicación industrial, como el protocolo de middleware DDS bajoel anclaje del marco de ROS 2 — se está convirtiendo en el patrimonio de entusiastas de todo el mundo.

ROS 1 fue desarrollado para la gestión de robots individuales y no pudo cumplir con los requisitos de las empresas manufactureras: operación en tiempo real, tolerancia a fallos en condiciones de comunicación inestables, interacción con un gran número de dispositivos. Así comenzó el desarrollo de ROS 2, que originalmente se posicionó específicamente para las necesidades de la industria y ahora se está convirtiendo en la corriente principal en robótica. A mediados de 2023, tuvo lugar un evento importante — 5 años después de la aparición de ROS 2 Dashing en 2019, el número de paquetes de ROS 2 utilizados por ingenieros, según [metrics.ros.org](https://metrics.ros.org/packages_rosdistro.html), superó a los paquetes de ROS 1, y ahora aproximadamente el 70% de los paquetes de software descargados de los repositorios oficiales son para ROS 2.

## Ventajas de ROS 2 para escenarios de automatización del hogar

El equipo de Robonomics está en la vanguardia de este proceso y apoya activamente a la Comunidad de ROS 2. Con nuestro apoyo, se están desarrollando enlaces de ROS 2 para Rust (véalo [en nuestro blog](https://robonomics.network/blog/ros-2-rust-report-2022/)), así como un [Envoltorio de ROS 2](https://github.com/Fingerling42/robonomics-ros2) para utilizar las funciones principales de la nube descentralizada de Robonomics. También probamos regularmente dispositivos que admiten ROS 2, para verificar específicamente nuestro software en acción en ellos. Como uno de esos robots, recientemente adquirimos el myBuddy 280 — un manipulador de doble brazo económico para entrenamiento e investigación de [Elephant Robotics](https://www.elephantrobotics.com/en/). El robot puede levantar hasta aproximadamente 250 gramos y tiene un precio de alrededor de $1700, lo que lo hace relativamente asequible para usuarios principiantes.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_1_myBuddy_280.png" alt="Robot manipulador de doble brazo myBuddy 280" />

Usando el ejemplo de este robot, las ventajas de ROS 2 son muy claramente visibles, lo que permite el uso potencial de este marco en escenarios de automatización del hogar. En particular, gracias al protocolo de middleware DDS, puedes usar myBuddy en conjunto con una PC de escritorio relativamente potente y agregar un robot completo a una estructura típica de hogar inteligente. Si el robot y la computadora están vinculados a través de elen la misma red local y usan el mismo [DOMAIN_ID](https://docs.ros.org/en/rolling/Concepts/Intermediate/About-Domain-ID.html), pueden comunicarse sin necesidad de ninguna configuración adicional. El software básico como controladores y paquetes de descripción de hardware se ejecuta en la Raspberry Pi del robot. El resto del software de aplicación requerido, como planificadores de movimiento "inteligentes" como MoveIt, simuladores como Gazebo, herramientas de monitoreo y visualización como RViz, nodo Robonomics, aprendizaje automático, procesamiento de registros por lotes, nodo de transmisión de datos distribuidos IPFS y otras tareas que requieren una cantidad significativa de potencia computacional pueden ejecutarse en esta máquina más potente.

Esta disposición permite una distribución óptima de recursos computacionales, creando esencialmente una arquitectura similar a la de microservicios. Gracias a la plataforma ROS 2 y al protocolo de middleware DDS subyacente, esta flexibilidad es posible, permitiendo que cada dispositivo realice las tareas más adecuadas a sus capacidades. A través de mecanismos de detección automática de dispositivos incorporados en DDS, los temas y servicios de ROS 2 se encontrarán entre sí sin necesidad de configuraciones adicionales.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_2_ros2_dds_smart_home.png" alt="Hogar inteligente con ROS 2 y DDS" />

También cabe destacar que la arquitectura de ROS 2 implica una separación del protocolo de transporte (como DDS) en una capa distinta llamada Middleware de ROS, lo que facilita cambiar de una implementación de protocolo a otra. Por lo tanto, después de largas discusiones, la comunidad de ROS decidió recientemente cambiar a un protocolo más ligero llamado Zenoh, que está previsto para 2024. Para profundizar en este tema, recomendamos consultar el [informe de Alternativas de Middleware de ROS 2](https://discourse.ros.org/uploads/short-url/o9ihvSjCwB8LkzRklpKdeesRTDi.pdf), que contiene información sobre todas las alternativas de DDS consideradas en 2023.

## Las Aventuras de myBuddy y el Controlador Compatible con Robonomics

A pesar de que el myBuddy 280 se comercializa como compatible con ROS 2, resultó ser insuficiente para una operación completa en ROS 2 (incluso sin software de planificación de movimiento como MoveIt2). En primer lugar, tuvimos que reemplazar el modelo predeterminado suministrado de Raspberry Pi 4B por uno más potente con 8 GB de RAM para satisfacer nuestras necesidades. En segundo lugar, después de probar el paquete ROS 2 para myBuddy del fabricante, nos encontramos con problemas. Como es comúnEn el mundo del código abierto, el hecho de que algo se publique en un repositorio público no garantiza su funcionalidad. El robot venía preinstalado con la distribución ROS 2 Galactic, que actualmente no tiene soporte y expiró en 2022 (por cierto, puedes leer sobre los períodos de soporte de las distribuciones [aquí](https://docs.ros.org/en/rolling/Releases.html)). A pesar de todo, intentamos ejecutar el robot en la distribución obsoleta y rápidamente nos encontramos con los llamados bloqueos, un comportamiento en el que los subprogramas lanzados (o procesos informáticos) bloquean el trabajo de los demás. Después de investigar, descubrimos que estos errores se corrigieron en la Distribución LTS de ROS 2 Humble.

Desafortunadamente, los desarrolladores de Elephant Robotics dejaron de actualizar los paquetes hace varios años y, lo que es más importante, no todos los paquetes necesarios para el robot se transfirieron de ROS 1 a ROS 2. Por lo tanto, decidimos asumir la tarea nosotros mismos. Debido a la falta de disponibilidad de la API de bajo nivel para ROS 2, encontramos más fácil desarrollar nuestra propia [implementación](https://github.com/Fingerling42/mybuddy280-ros2-robonomics) del paquete ROS 2, donde pudimos agregar el control de myBuddy a través de Robonomics. Para esto, tomamos el módulo de Python [pymycobot](https://pypi.org/project/pymycobot/) e implementamos nuestro propio controlador de ROS 2.

El controlador personalizado actual puede obtener los estados de cada articulación de ambos brazos y muñeca, así como enviar ángulos a ellos, publicar los estados de las articulaciones del robot utilizando Robonomics datalog y controlar remotamente las articulaciones enviando una función de inicio a la dirección del robot. Si deseas probarlo, ten en cuenta que actualizar la versión de ROS 2 reinstalando una nueva imagen con paquetes en Raspberry Pi 4B puede llevar una cantidad significativa de tiempo (aproximadamente de 2 a 4 horas).

En el futuro, planeamos ampliar las funciones del controlador y proporcionar control remoto de este robot a través de Robonomics dentro de nuestro laboratorio en Chipre. También queremos incluir el Robonomics ROS 2 Wrapper en la lista oficial de paquetes de rosdistro, para que los usuarios puedan instalarlo automáticamente al inicializar el proyecto de ROS 2.

¡Mantente atento a nuestras actualizaciones!