---
title: "Contrôle à distance sécurisé des robots : solution Robonomics"
date: 2024-04-19
published: true
locale: 'fr'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "La connexion à distance et le contrôle de votre propre appareil intelligent sont des fonctionnalités très populaires parmi les utilisateurs. Cependant, une tâche en apparence simple pose encore de nombreuses difficultés aux utilisateurs inexpérimentés, allant de la résolution des problèmes NAT aux questions de sécurité. Dans un nouvel article, nous montrerons comment ces difficultés peuvent être surmontées avec l'aide de Robonomics."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "La connexion à distance et le contrôle de votre propre appareil intelligent sont des fonctionnalités très populaires parmi les utilisateurs. Cependant, une tâche en apparence simple pose encore de nombreuses difficultés aux utilisateurs inexpérimentés, allant de la résolution des problèmes NAT aux questions de sécurité. Dans un nouvel article, nous montrerons comment ces difficultés peuvent être surmontées avec l'aide de Robonomics."
tags: ['ROS 2', 'Maison intelligente']
---

Dans l'article précédent, nous avons parlé de la manière dont nous utilisons les avantages des solutions industrielles dans l'infrastructure d'une maison intelligente robotisée. Nous avons montré comment le framework ROS 2 et son protocole middleware permettent la découverte automatique des appareils et une interaction intensive (y compris en temps réel) entre eux au sein d'un réseau local, ce qui est très pratique. Cependant, cette approche est principalement adaptée à la zone dite de confiance - cette partie du réseau informatique où l'apparition de tout acteur tiers est peu probable. Dans ce cas, nous faisons confiance à tous les programmes en cours d'exécution et n'avons pas besoin d'utiliser le chiffrement de la même manière qu'il n'est pas utilisé à l'intérieur d'un ordinateur lorsque les programmes échangent des données entre eux.

Mais que se passe-t-il si vous devez garantir le fonctionnement des appareils ROS 2 avec un service externe ou fournir un accès à distance à ces appareils depuis l'extérieur ? À ces moments-là, un problème de sécurité se pose - en ayant accès à un nœud ROS 2, un service externe (et potentiellement une personne malveillante) obtient essentiellement l'accès à tous les autres nœuds - il peut écouter complètement tout le trafic DDS interne et accéder à tous les services système disponibles.

Le compromis classique entre la sécurité et la vitesse/la commodité est résolu en divisant le système de maison intelligente souverain en deux parties - sécurisée et non sécurisée.

## Sécurité ROS 2

Définir une zone avec des exigences de sécurité spéciales dans l'espace de travail des nœuds ROS 2 est une tâche assez complexe. Le package de sécurité standard ROS 2 ([sros2](https://docs.ros.org/fr/rolling/Concepts/Intermediate/About-Security.html)) fait partie de [ros-core](https://ros.org/reps/rep-2001.html#id32), sur lequel toutes les distributions ROS 2 sont construites, et selon les développeurs principaux, il est destiné à résoudre ce problème. Il offre la possibilité de mettre en place une infrastructure de clés publiques (PKI) relativement simple au sein d'un seul réseau local. Pour chaque nœud ROS 2, des politiques d'accès aux données des autres nœuds sont définies, ainsi qu'un ensemble de fichiers standard pour de tels scénarios - clés cryptographiques et certificats. Pendant l'exécution du programme, les nœuds "voient" uniquement les sources de données auxquelles l'accès est explicitement écrit dans la configuration au lancement du projet. Cependant, cette approche présente un inconvénient majeur - tout le trafic dans le système est crypté, ce qui peut affecter les performances sous la charge réseau créée par DDS. Il sera nécessaire de définir toutes les politiques d'accès et de générer des clés pour tous les nœuds. Cela est très difficile à configurer et à maintenir. Et surtout, nous perdons l'avantage principal du Middleware ROS 2 - les performances.

## Ponts

Une autre solution consiste à créer des passerelles, qui transmettent les données nécessaires tout en gardant tout le reste privé. En général, cela est réalisé en utilisant des tunnels VPN ou SSH. Un nœud séparé est créé dans l'espace d'échange de données sécurisé, qui a une adresse publique pour les connexions externes. Dans ce cas, la gestion de la sécurité est effectuée uniquement au niveau de ce nœud (essentiellement une fenêtre sur le monde extérieur), sans affecter tous les autres. Cette approche est utilisée dans les projets [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) et [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds), mais elle a également ses inconvénients. Dans ce scénario, vous devez établir un canal de communication sécurisé strictement lié à l'adresse IP ou au nom de domaine du correspondant. Ceux-ci peuvent changer, être bloqués ou être vulnérables aux attaques. Au moment de la création de SSH, cela n'a pas été pris en compte. De plus, SSH repose principalement sur le système de contrôle d'accès de l'exploitation, avec tous ses inconvénients inhérents.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Contrôle à distance classique via IP publique et SSH/VPN" />

*Voici comment les utilisateurs se connectent généralement à leurs robots à distance de nos jours. Cependant, cette approche présente certains inconvénients. Elle nécessite une adresse IP publique et/ou un nom DNS, qui peuvent être bloqués dans certains pays. Cela nécessite également le stockage de clés privées supplémentaires dans des emplacements potentiellement non sécurisés (par exemple, ~/.ssh).*

SSH, principalement utilisé par les administrateurs système et les spécialistes en informatique, nécessite des connaissances de base de la ligne de commande Bash et une confiance dans le système d'exploitation, car les clés de chiffrement sont stockées directement dans le système de fichiers ou dans l'agent SSH. La gestion des clés d'accès reste une tâche assez complexe pour l'utilisateur moyen afin de protéger de manière sécurisée leurs données.

## Solution Web3

Comme nous pouvons le constater, les méthodes ci-dessus ne sont pas sans inconvénients, nous envisagerons donc une solution possible au problème en utilisant des technologies de réseau pair à pair, sur lesquelles Robonomics est construit. Dans ce cas, le cloud décentralisé de Robonomics peut être considéré comme une table de routage sécurisée, les adresses des contreparties étant les clés publiques des nœuds. Vous avez besoin d'un nœud Robonomics local et de connaître la clé publique de votre contrepartie, afin de ne pas dépendre du système DNS (y compris des registrars de noms de domaine et des serveurs) et du blocage des adresses IP. La bibliothèque [libP2P](https://libp2p.io/), utilisée par Robonomics, peut utiliser différents protocoles de transport pour la livraison des messages.

De plus, avec l'avancée des technologies Web3, des méthodes plus efficaces pour gérer des informations critiques, y compris des clés privées, ont émergé. L'une d'entre elles est une phrase mnémonique ou une graine - un ensemble de 12 ou 24 mots, utilisé pour créer des comptes dans des réseaux décentralisés. Cette méthode est pratique et sûre, car la graine est écrite sur un support externe (par exemple, sur papier) une fois lors de l'initialisation et est utilisée uniquement pour récupérer le compte. Une clé maîtresse est créée à partir de la phrase mnémonique, à partir de laquelle toute hiérarchie de clés pour différentes tâches peut être créée (voir **[Clés déterministes hiérarchiques](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)**). Cela simplifie la gestion des clés et leur récupération en cas de perte. Si une personne malveillante obtient l'accès à l'une de vos paires de clés, elle ne pourra pas obtenir d'informations sur les autres clés créées à partir de la phrase mnémonique. La fonction de clé dérivée souple vous permet de confirmer la propriété du compte racine sans la divulguer. Parce que les clés souples peuvent être dérivées en utilisant la clé publique parente, elles peuvent être utilisées pour identifier le parentclé sans exposer la graine parente.

## Contrôle à distance dans Home Assistant

Examinons le processus de connexion plus en détail. L'application décentralisée [Robonomics](https://robonomics.app/) (ou simplement DApp) fonctionne directement dans votre navigateur, sans nécessiter l'installation de logiciels supplémentaires ou le stockage des clés dans le système de fichiers dans un environnement de nombreux programmes, dont la sécurité n'est pas garantie. La gestion des clés d'accès est effectuée via l'extension Polkadot JS, ainsi qu'à l'aide d'un stockage de clés matériel externe (par exemple, [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault)) pour une fiabilité supplémentaire. En plus du logiciel spécialisé pour interagir avec Robonomics, la DApp comprend également un nœud libP2P léger, avec lequel la connexion à Home Assistant a lieu.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="Contrôle à distance dans Home Assistant" />

Le propriétaire d'un abonnement au service Web Robonomics gère les droits d'accès à l'infrastructure domotique via ce qu'on appelle un contrôleur - un compte qui gère toutes les informations sensibles sous forme chiffrée dans un jumeau numérique. Seuls les utilisateurs ajoutés à l'abonnement peuvent décrypter ces données. En plus des clés d'accès, le jumeau numérique stocke également la configuration de la DApp et, le soi-disant, multi-adresse libP2P à laquelle la DApp se connecte pour une connexion sécurisée. La multi-adresse est l'une de ces innovations qui rendent l'approche libP2P si unique et flexible. Il s'agit d'un format spécial d'adresse pour les nœuds, qui implique la présence de nombreuses adresses IP, d'identifiants de transport et de réseau, de protocoles et de ports, à travers lesquels vous pouvez contacter un nœud spécifique. La liste complète des protocoles pris en charge est présentée dans la [spécification](https://github.com/multiformats/multiaddr/blob/master/protocols.csv).

Ainsi, l'utilisateur ajouté à l'abonnement extrait une multi-adresse du jumeau numérique Robonomics et établit une connexion sécurisée avec un identifiant de pair connu de lui seul. Réussite !

## Contrôle à distance dans ROS 2

De la même manière, vous pouvez utiliser les fonctionnalités existantes de Robonomics pour interagir avec des robots. L'équipe Robossembler, dans le cadre du programme de subventions Robonomics, a développé un projet de preuve de concept appelé [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge). Ce pont permetVos nœuds ROS 2 peuvent se connecter à tout service externe, poste de travail distant ou autre système ROS 2.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="Contrôle à distance ROS 2 avec Robonomics" />

*Une illustration de ce à quoi pourrait ressembler le contrôle à distance d'un robot domestique dans le cas de ROS 2. Cette approche offre plusieurs avantages significatifs : il n'est pas nécessaire d'avoir une IP publique, l'accès au robot est disponible même à travers les pare-feu réseau (NAT), les clés cryptographiques privées ne sont pas stockées sur le disque et sont protégées de manière fiable.*

Le protocole utilisé dans ROS 2, DDS, se combine naturellement avec libP2P en raison de son modèle éditeur-abonné similaire pour l'interaction des nœuds. Avec l'aide du pont Robonomics, les nœuds ROS 2 et leurs interfaces - sujets, services, types de messages (par exemple, en utilisant le service d'intégration eProsima) peuvent être configurés de manière déclarative, grâce à quoi l'interaction avec le robot depuis l'extérieur est possible. Cela permet également un niveau supplémentaire de sécurité lors de la connexion à un ordinateur distant. Le mécanisme pour obtenir l'ID de pair de la contrepartie peut être le même que dans le cas de Home Assistant - via une demande de jumeau numérique du nœud Robonomics, la seule différence étant qu'au lieu du serveur Home Assistant, il y aura un robot ROS 2, et au lieu du proxy libP2P-websocker, il y aura un Enveloppe Robonomics ROS 2 connectée au robot.

## Opportunités potentielles à l'avenir

Cependant, ce ne sont pas toutes les possibilités qu'un cloud décentralisé sur les technologies Web3 peut offrir. Dans l'exemple décrit ci-dessus, ces technologies sont utilisées pour la transmission relativement simple de flux de données de messages entre des ordinateurs distants.

On peut appeler cela le niveau de transport de base dans la pile réseau Robonomics, qui est la base de la mise en œuvre de protocoles de niveau supérieur plus complexes. À partir d'analogues SSH, impliquant une interaction plus interactive des utilisateurs avec leurs systèmes cyber-physiques, et se terminant par des protocoles d'application impliquant l'interaction d'un grand nombre d'utilisateurs de l'infrastructure robotique autonome.

Par exemple, la décision de commencer la production d'un certain produit peut être liée à un vote au sein d'une organisation de consommateurs potentiels de ce produit, en tenant compte de la rentabilité économique. Actuellement, la décision de commencer une production quelconque est prise par le biais de mécanismes d'investissement, où les investisseurs, ayant reçu des informations sur la demande potentielle, peuvent acquérir des actions de sociétés individuelles capables de satisfaire cette demande à l'avenir.Si les consommateurs peuvent participer de manière plus active au développement et à la tarification de nouveaux produits, alors à long terme, nous pourrons passer à un tel mode de fonctionnement où la production se restructurera automatiquement pour satisfaire la demande en fonction des données fournies par les consommateurs sur le réseau.