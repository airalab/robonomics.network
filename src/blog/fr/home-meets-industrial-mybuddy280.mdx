---
title: "Automatisation : la maison rencontre l'industrie"
date: 2024-03-24
published: true
locale: 'fr'
cover_image: /blog/images/automation-home-meets-industrial-mybuddy280/Cover.png
description: "ROS 2 est un cadre qui devient rapidement populaire pour le développement d'applications robotiques. Il intègre l'expérience accumulée de l'industrie et la partage avec la communauté mondiale. Notre équipe est activement impliquée dans le développement de nouveaux packages ROS 2 pour les robots que nous utilisons, ainsi que dans leur intégration dans le réseau décentralisé de Robonomics."
related: ['Robonomics Helps Enable Rust for ROS 2']
abstract: "ROS 2 est un cadre qui devient rapidement populaire pour le développement d'applications robotiques. Il intègre l'expérience accumulée de l'industrie et la partage avec la communauté mondiale. Notre équipe est activement impliquée dans le développement de nouveaux packages ROS 2 pour les robots que nous utilisons, ainsi que dans leur intégration dans le réseau décentralisé de Robonomics."
tags: ['ROS 2', 'Maison intelligente']
---

Les technologies développées dans une industrie se retrouvent souvent largement appliquées dans d'autres industries, même si elles n'ont pas été initialement conçues pour elles. Ainsi, l'internet, initialement développé à des fins militaires, a révélé tout son potentiel dans le domaine civil, devenant une partie intégrante de la vie moderne. Une tendance similaire pourrait se produire dans l'industrie, où les technologies développées pour des scénarios d'entreprise peuvent également bénéficier aux utilisateurs finaux.

Historiquement, l'automatisation résidentielle et la robotique industrielle ont évolué séparément. En raison de leur coût élevé et des préoccupations en matière de sécurité, les robots industriels ont principalement été limités à la production à grande échelle. Les logiciels de gestion de la production étaient confinés dans des systèmes de fabrication exécution et de fabrication assistée par ordinateur propriétaires. L'automatisation résidentielle représentait quant à elle généralement un système de dispositifs assez simples pour interagir avec les gadgets des utilisateurs, les appareils électroménagers, l'éclairage, le chauffage, la communication. L'accent était mis sur la communication sans fil.

Cependant, nous observons des tendances. D'une part, les protocoles de communication sans fil du domaine grand public sont progressivement adaptés aux applications industrielles — par exemple, des versions industrielles de Wi-Fi ou de Bluetooth font leur apparition. D'autre part, les robots manipulateurs deviennent plus abordables et commencent à être envisagés pour une utilisation au-delà de l'industrie. Déjà, nous pouvons réfléchir à la manière dont, à l'avenir, par exemple, des robots collaboratifs sûrs deviendront une partie intégrante de la maison et pourront rendre notre vie plus pratique, en aidant à cuisiner et à effectuer d'autres tâches ménagères routinières. De plus, des implémentations open source de protocoles de communication industriels — tels que le protocole middleware DDS sousl'épinglage du framework ROS 2 — devient l'héritage des passionnés du monde entier.

ROS 1 a été développé pour la gestion d'un seul robot et ne pouvait pas répondre aux exigences des entreprises de fabrication : fonctionnement en temps réel, tolérance aux pannes dans des conditions de communication instables, interaction avec un grand nombre d'appareils. Ainsi a commencé le développement de ROS 2, qui était initialement positionné spécifiquement pour les besoins de l'industrie et est maintenant devenu courant dans le domaine de la robotique. Au milieu de 2023, un événement important s'est produit — 5 ans après l'apparition de ROS 2 Dashing en 2019, le nombre de packages ROS 2 utilisés par les ingénieurs, selon [metrics.ros.org](https://metrics.ros.org/packages_rosdistro.html), a dépassé celui des packages ROS 1, et maintenant environ 70% des packages logiciels téléchargés depuis les dépôts officiels sont pour ROS 2.

## Avantages de ROS 2 pour les scénarios d'automatisation domestique

L'équipe Robonomics est à l'avant-garde de ce processus et soutient activement la communauté ROS 2. Avec notre soutien, des liaisons ROS 2 pour Rust sont en cours de développement (consultez [notre blog](https://robonomics.network/blog/ros-2-rust-report-2022/)), ainsi qu'un [Wrapper ROS 2](https://github.com/Fingerling42/robonomics-ros2) pour utiliser les fonctions principales du cloud décentralisé Robonomics. Nous testons également régulièrement des appareils prenant en charge ROS 2, pour vérifier spécifiquement notre logiciel en action sur eux. Comme l'un de ces robots, nous avons récemment acquis myBuddy 280 — un manipulateur à double bras peu coûteux pour la formation et la recherche chez [Elephant Robotics](https://www.elephantrobotics.com/en/). Le robot peut soulever jusqu'à environ 250 grammes et est vendu autour de 1700 $, le rendant relativement abordable pour les utilisateurs novices.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_1_myBuddy_280.png" alt="myBuddy 280 dual arm robot manupulator" />

En utilisant l'exemple de ce robot, les avantages de ROS 2 sont très clairement visibles, ce qui permet une utilisation potentielle de ce framework dans les scénarios d'automatisation domestique. En particulier, grâce au protocole middleware DDS, vous pouvez utiliser myBuddy en conjonction avec un PC de bureau relativement performant et ajouter un robot complet dans une structure domotique typique. Si le robot et l'ordinateur sont connectés via lesur le même réseau local et utilisent le même [DOMAIN_ID](https://docs.ros.org/fr/rolling/Concepts/Intermediate/About-Domain-ID.html), ils peuvent communiquer sans aucune configuration supplémentaire. Des logiciels de base tels que des pilotes et des packages de description matérielle s'exécutent sur le Raspberry Pi du robot. Le reste des logiciels d'application requis tels que les planificateurs de mouvement "intelligents" comme MoveIt, les simulateurs comme Gazebo, les outils de surveillance et de visualisation comme RViz, le nœud Robonomics, l'apprentissage automatique, le traitement de lots de journaux, le nœud de transmission de données distribuées IPFS et d'autres tâches nécessitant une puissance de calcul importante peuvent être exécutés sur cette machine plus puissante.

Cette disposition permet une distribution optimale des ressources de calcul, créant essentiellement une architecture de type microservices. Grâce à la plateforme ROS 2 et au protocole middleware DDS sous-jacent, cette flexibilité est possible, permettant à chaque appareil d'effectuer les tâches les mieux adaptées à ses capacités. Grâce aux mécanismes de détection automatique des appareils intégrés dans DDS, les sujets et les services ROS 2 se trouveront mutuellement sans aucun paramétrage supplémentaire.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_2_ros2_dds_smart_home.png" alt="Maison intelligente avec ROS 2 et DDS" />

Il convient également de noter que l'architecture de ROS 2 implique une séparation du protocole de transport (comme DDS) en une couche distincte appelée Middleware ROS, ce qui facilite le passage d'une implémentation de protocole à une autre. Ainsi, après de longues discussions, la communauté ROS a récemment décidé de passer à un protocole plus léger appelé Zenoh, prévu pour 2024. Pour approfondir ce sujet, nous vous recommandons de consulter le [rapport sur les alternatives Middleware ROS 2](https://discourse.ros.org/uploads/short-url/o9ihvSjCwB8LkzRklpKdeesRTDi.pdf), qui contient des informations sur toutes les alternatives DDS envisagées en 2023.

## Les aventures de myBuddy et le pilote compatible avec Robonomics

Malgré le fait que le myBuddy 280 soit commercialisé comme compatible avec ROS 2, il s'est avéré insuffisant pour un fonctionnement complet sous ROS 2 (même sans logiciel de planification de mouvement comme MoveIt2). Tout d'abord, nous avons dû remplacer le modèle Raspberry Pi 4B fourni par défaut par un modèle plus puissant avec 8 Go de RAM pour répondre à nos besoins. Deuxièmement, après avoir testé le package ROS 2 pour myBuddy du fabricant, nous avons rencontré des problèmes. Comme c'est courantDans le monde de l'open source, le fait qu'un projet soit publié dans un dépôt public ne garantit pas sa fonctionnalité. Le robot était préinstallé avec la distribution ROS 2 Galactic actuellement non prise en charge, qui a expiré en 2022 (au fait, vous pouvez en savoir plus sur les périodes de support des distributions [ici](https://docs.ros.org/en/rolling/Releases.html)). Malgré tout, nous avons essayé de faire fonctionner le robot avec cette distribution obsolète et avons rapidement rencontré ce qu'on appelle des impasses - un comportement dans lequel les sous-programmes lancés (ou les processus informatiques) se bloquent mutuellement. Après quelques recherches, nous avons découvert que ces erreurs avaient été corrigées dans la distribution LTS de ROS 2 Humble.

Malheureusement, les développeurs d'Elephant Robotics ont cessé de mettre à jour les packages il y a plusieurs années, et surtout, tous les packages nécessaires pour le robot n'ont pas été transférés de ROS 1 à ROS 2. Nous avons donc décidé de prendre en charge cette tâche nous-mêmes. En raison de l'indisponibilité de l'API de bas niveau pour ROS 2, nous avons trouvé plus facile de développer notre propre [implémentation](https://github.com/Fingerling42/mybuddy280-ros2-robonomics) du package ROS 2, où nous pourrions ajouter le contrôle de myBuddy via Robonomics. Pour cela, nous avons utilisé le module Python [pymycobot](https://pypi.org/project/pymycobot/) et avons mis en œuvre notre propre pilote ROS 2.

Le pilote personnalisé actuel peut obtenir les états de chaque articulation pour les deux bras et le poignet, ainsi que leur envoyer des angles, publier les états des articulations du robot en utilisant les données de Robonomics et contrôler à distance les articulations en envoyant une fonction de lancement à l'adresse du robot. Si vous souhaitez l'essayer, veuillez noter que la mise à jour de la version de ROS 2 en réinstallant une nouvelle image avec des packages sur Raspberry Pi 4B peut prendre un certain temps (environ 2 à 4 heures).

À l'avenir, nous prévoyons d'étendre les fonctions du pilote et de permettre le contrôle à distance de ce robot via Robonomics au sein de notre laboratoire à Chypre. Nous souhaitons également inclure le Robonomics ROS 2 Wrapper dans la liste officielle des packages rosdistro, afin que les utilisateurs puissent l'installer automatiquement lors de l'initialisation du projet ROS 2.

Restez à l'écoute pour nos mises à jour!