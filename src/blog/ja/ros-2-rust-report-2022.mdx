---
title: RobonomicsがRustをROS 2に有効にするのを支援
date: 2022-12-29
published: true
locale: 'ja'
tags: ['ROS 2', 'ユースケース', 'コラボレーション']
cover_image: /blog/images/ros-2-rust-report-2022/cover.jpg
description: "これは、Robot Operating System 2を作成した元チームのメンバーであるEsteve Fernandezとのコラボレーションの物語です。彼は数年間、ROS 2用のRustバインディングを開発してきました。このプロジェクトの物語を共有し、Esteveを支援した方法、およびRustがロボティクスアプリケーションにとって有用である理由を説明したいと思います。"
abstract: "これは、Robot Operating System 2を作成した元チームのメンバーであるEsteve Fernandezとのコラボレーションの物語です。彼は数年間、ROS 2用のRustバインディングを開発してきました。このプロジェクトの物語を共有し、Esteveを支援した方法、およびRustがロボティクスアプリケーションにとって有用である理由を説明したいと思います。"
---

## ROS 1からROS 2へ

ROSはもともと特定の種類のロボットの開発環境として作成されました。最初のバージョンのオペレーティングシステムは、ボード上のコンピューティングリソースを持ち、リアルタイム制御の必要がない信頼性のあるネットワーク接続を持つ単一のロボット向けに意図されていました。そのため、開発者たちは当初、ROS 1が研究や学術アプリケーションに最適であると考えていました。

しかし、ROSは最終的に研究コミュニティを超えて商業利用されるようになりました。新しいユースケースのニーズを満たすために、開発者たちは新機能の追加を始めました。例えば、マルチロボットや小規模な組み込みシステムのサポート、リアルタイムとの統合、ROS 1のリリース以降に登場した新技術の組み込みなどです。同時に、既存のバージョンのRobot Operating Systemを変更しないことを選択しました。これは既存のアプリケーションに大きな影響を与える可能性があったためです。その結果、[ROS 2](https://design.ros2.org/)が誕生しました。

## Esteveについて

EsteveはROSの第2バージョンの開発を始めた元のチームの一員でした。彼はオープンソース開発と自動運転車の経験を持つロボティクスエンジニアです。彼はROS 2用のRustバインディングを数年間開発してきました。中核から離れた後も、彼はロボット技術やROSコミュニティに貢献し続けています。ROS 2 チームは、プロジェクトのリポジトリに積極的に貢献し続けています。

Esteve の個人的な目標の1つは、開発者が Rust で ROS 2 アプリケーションを書くことができるプロジェクトを開発することでした（バインディング、コードジェネレータなど）、これにより、効率的で堅牢なロボティクスプログラムを作成するための強力なツールを提供します。しかし、最初はプロジェクトが遅く進展しました。Esteve は4年間、自由な時間にほぼ一人で取り組んでいました。

約1年半前、私たちはEsteveと出会い、ros2-rustの開発を手伝うことに同意しました。これにより、Esteve はプロジェクトに追加の時間を割り当て、それにさらなる注目を集めることができました。RustのROS2コミュニティは成長し、他の人々もEsteveによるレビューでプロジェクトに貢献し始めました。現在、[メインリポジトリ](https://github.com/ros2-rust/ros2_rust)には27人の貢献者、75のフォーク、Githubで466のスターがついています。

## 開発の進捗

現時点で、ros2-rust はすでにメッセージ生成、パブリッシャー/サブスクライバーメカニズム、クライアントおよびサービスのサポートを実装しています。私たちの大きな目標の1つは、RobonomicsをROS 2 ミドルウェアとして開発することであり、これにはros2-rustにRobonomicsトランスポートレイヤーを追加する必要があります。この機能を実装するために、ROS2の標準データ配信サービス（DDS）の代わりに libP2P 通信ライブラリのサポートが追加されています。DDS は分散型の発見方法でパブリッシュ-サブスクライブトランスポートを提供し、ROS マスターのような中央集権型のツールなしに任意の2つのプログラムが通信できるようにします。しかし、DDS は Robonomics を ROS2 に追加するための追加のブリッジの開発が必要ですが、libP2P はネイティブ Robonomics 統合を可能にします。

![ros-2-stack](/blog/images/ros-2-rust-report-2022/ros-client-library-api-stack.png)

*ROSクライアントライブラリAPIスタックの図。ROS 2 ミドルウェア（rmw）の位置を示しています。出典: [ROS 2 Documentation](https://docs.ros.org/en/foxy/Concepts/About-Internal-Interfaces.html)*

## なぜ ROS2 on Rust？

Robonomics on Substrate の主要言語であるだけでなく、Rust はロボティクスアプリケーションにとって重要な利点を持っています。

一般的に、商用および大規模展開向けの最も広く使用されているロボティックプラットフォームでは、C++ が使用され、そのため最初に ROS に追加されました。これは、C++ が「近くで動作する」という能力によるものです。ハードウェア'とその限られたコンピューティングリソースを持つロボットアプリケーションに適しているかどうかを考慮しています。ただし、これはC++をより危険にする一方、開発中に致命的なミスを簡単に com し、これらのミスは後で実際の（壊れた）ハードウェアでのみ発見されます。

ここで、Rustの利点が現れます。それはC++のような低レベルの開発を可能にしますが、追加のメモリセーフティを備えています。この安全性は追加のランタイムコストなしに提供され、アプリケーションの高速な実行速度を維持します。さらに、Rustは複雑でリスクのあるロボットプロジェクトの開発を効率化します。

## 将来の計画

近い将来、Esteve はros2-rustにアクション（ノードの機能への非同期呼び出し）を追加する予定です。これにより、クライアントはリクエストの進行状況を追跡し、最終結果を取得し、リクエストが完了する前にオプションでキャンセルすることができます。これにより、ロボットがナビゲーションや位置特定などのクエリを作成できるようになります。

長期的な計画には、Robonomics Networkの上に立てられたROS 2プロトタイプの構築が含まれます。これにより、Robonomics on Substrateを使用して、Robonomics分散型クラウド上のブラウザからROS2を実行できるWebAssemblyアプリを作成できます。私たちは、[Robonomics Academy](https://robonomics.academy)で直接ブラウザから作業するROS 2に特化した新しいコースを楽しみにしています！