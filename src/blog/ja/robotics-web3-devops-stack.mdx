---
title: ロボティクス Web3 DevOps スタック
date: 2024-06-12
published: true
locale: 'ja'
tags: ['DevOps', 'Web3']
cover_image: /blog/images/web3-devops-stack/web3-devops-stack-Cover.png
description: "DevOps運動はITの世界を革命し、効果的で継続的なシステム改善の理解を再構築しました。ロボティクス分野もこのアプローチを探求し始めています。本記事では、Web3テクノロジーを使用したロボティクスのためのDevOpsの潜在的な未来を想像しています。また、この未来の基盤となるいくつかのプロジェクトに焦点を当てています。"
abstract: "DevOps運動はITの世界を革命し、効果的で継続的なシステム改善の理解を再構築しました。ロボティクス分野もこのアプローチを探求し始めています。本記事では、Web3テクノロジーを使用したロボティクスのためのDevOpsの潜在的な未来を想像しています。また、この未来の基盤となるいくつかのプロジェクトに焦点を当てています。"
---

## 開発と運用の起源

ロボットは、外部世界を動かし感知するデバイスとして、コンピューターの特別なケースです。エンジニアたちがよく言うように、飛行機は飛ぶコンピューターであり、このサイバー物理システムの生存性を維持するために搭載されたコンピューティングデバイスの重要性を強調しています。したがって、21世紀に情報システムの世界がどのように発展してきたかを見て、ロボティクスに固有の傾向を特定し、非常に近い将来にロボティクスに固有の傾向を特定することができます。

ソフトウェアとその開発に使用されるプラクティスは、エンジニアリングや他のすべての活動での作業アプローチを大きく変えました。まず第一に、変更はいわゆるウォーターフォールアプローチに影響を与えました。プロジェクトが長い交互の段階と見なされるアプローチです：要件 - 開発 - 検証 - 検証 - 運用。時間の経過とともに、段階に分けることが管理者にとって便利であることがわかりましたが、それが生活の中でどのように起こるかとはあまり一致せず、常に変化する外部世界の状況で製品を迅速に適応させることを複雑にします。ウォーターフォールモデルの活動（および管理）を置き換えるために、小さな計画間隔でプロジェクトに同期して作業することを意味するアジャイルメソッドが登場しました。マイルストーン付きの大きな段階の代わりに、小さなスプリントがあり、開発されたシステムの小さなが頻繁な変更と迅速なリリースがありました。このような作業ペースは、リリースが複雑な管理手続きと手動チェックで伴う場合には到達できません。したがって、開発と運用の運動は、開発者から消費者に価値を損なうことなく転送するプラクティスを実装するために生まれ、新しい職業であるDevOpsが誕生しました。オペレーションズ エンジニアは、システムを迅速に稼働させるプロセスを自動化しています。

![devops origins](/blog/images/web3-devops-stack/devops-evolution.png)

これらのプラクティスには、自動化テスト、継続的インテグレーション、デリバリー、展開、ソフトウェアモニタリングが含まれます。自動化テストはバグをチェックし、継続的インテグレーションはコード変更を頻繁に統合して問題を早期に検出します。デリバリーと展開は、ソフトウェアをユーザーに提供し、彼らの環境にインストールすることを意味します。

最初は、これらのプラクティスは世界中の数百万人のユーザーにサービスを提供する大規模なWebサービスの分野で勢いを増していました。このようなコンテキストでは、これらのプラクティスは、そのようなサービスから期待される高いパフォーマンスと信頼性を維持するために重要です。しかし、時間の経過とともに、自動化ツールがよりアクセスしやすくなり（オープンソースの貢献の一部による）、DevOpsはより伝統的なエンジニアリング活動でも使用されるようになりました。したがって、これらのプラクティスは、初期のドメインを超えて、さまざまなセクターで効率、信頼性、およびソフトウェア製品の品質を向上させるために現在使用されています。

## DevOpsのコンテキストでのロボットの主な特徴

ロボットは、静止したサーバーやデータセンターとは異なり、空間を移動し外部環境を感知します。このようなデバイスがますます増えています。時間とともにその計算能力が向上しており、多くの技術的なソリューションは、強力なオンボードプロセッサーなしでは単純に不可能でしょう。

エッジコンピューティングの増加に伴い、つまりモバイルデバイス自体でのコンピューティングを指すことで、DevOpsの使用がより一般的になっています。このアプローチにより、新しく開発された機能を消費者に迅速に提供できます。ロボットはネットワークに常時接続され、Dockerや他の実績のあるツールを使用してソフトウェアを迅速に更新できます。

ただし、追加の機能は追加のリスクを生み出します - コンピューターに外部環境やインターネットと同時に密接にやり取りする能力を与えることで、これらのデバイスが悪意のある者の制御下に置かれた場合に引き起こす可能性のある被害の前提条件を作り出しています。徐々に私たちの家を満たしているスマートデバイスは突然暴走するかもしれません！ここでセキュリティの問題は常に変化する世界で極めて重要です、なぜならこれらのデバイスは私たちの身体に近接しています。ミスは非常に高価になる可能性があります。

ロボティクスを他のコンピューターと区別し、特別なものにするのは何でしょうか？これらの特別な機能には次のものが含まれます：

1. ハードウェアプラットフォームの多様性（比較的少数の中央プロセッサーアーキテクチャタイプと比較して）
2. 予測不可能な環境での作業、つまり緊急事態の存在 - たとえば、通信チャネルの利用可能性がない場合
3. オンボードコンピューティングデバイスのリソースの制約 - 弱いプロセッサー、比較的少量のメモリ、低いネットワーク帯域幅4. 安全要件の増加
5. 更新と新機能が必要なデバイスの多数

これらの制約を考慮して、少なくともコードの記述、ビルド、および展開に関して、Web3テクノロジーに基づくロボットのためのDevOpsの概念的基盤を策定しようとします。分散型DevOpsコンベアの機能を確保することができる最も興味深いWeb3プロジェクトを紹介し、Robonomicsがライフサイクルの最終段階であるプログラムの外部世界への実装時にそれが不可欠な部分になる方法を示そうとします。

## Web3とブロックチェーン

Web3について話すとき、主にブロックチェーン技術を指します。これらはもちろん密接に関連していますが、完全に同一ではありません。この概念の下では、楕円曲線暗号、P2Pネットワーク、コンセンサスアルゴリズムなど、一連の技術が含まれることがよくあります。最初の2つは独自のものではなく、IT業界で広く使用されていますが、後者は本当にブロックチェーンに特別な機能を与え、このソリューションを強力なツールにしています。しかし、すべての生活状況（およびDevOpsコンベアの一部）でコンセンサスが必要なのでしょうか？それを理解しようとしてみましょう。

コンセンサスには異なる文脈で異なる意味がありますが、その本質は常に変わりません - 分散型ネットワークを構成するシステム、アクター、または自律エージェントが作業で使用するプロトコルと共通データの状態について合意に達します。当事者が合意に達しないと、いわゆるフォークが発生します。歴史的に、フォークはブロックチェーンの分裂を意味し、ネットワークノードが2つの部分に分かれることを導きました - 一部のノードは古いバージョンのプロトコルに「忠実」のままであり、残りのノードは新しいバージョンに切り替えました。この出来事は常に否定的な文脈を持っていました - コミュニティは統合する代わりに減少し、プロジェクトはどこか弱くなりました。同時に、生物学的進化と同様に、私たちが今見ている経済の形で観察されるように、分岐は常に発生し、さらに新しい生命形態の発生につながります。生命の木を見てください。それにある各枝は、古代に起こったフォークです - 突然変異が新しい種を生み出し、それは仲間と互換性がなくなりました。このメカニズムがなければ、現代の理解における生命は不可能でしょう。生物が変異する能力こそが、環境の変化に適応することを可能にします。

したがって、私たちはコンセンサスが多くのアクターを調整することを可能にする良いものであるという結論に至りそしてスケーラビリティには良い面もありますが、同時に悪い面もあります。なぜなら、合意から逸脱する者は常に異端者と見なされ、システムが彼らをある種の「排除」するためです。

生物進化とは異なり、私たちは技術進化を行っており、この進化がどのように進行するかは私たち次第です。技術の変異の源はエンジニアであり、科学的手法と創造的思考を用いて、技術の新しい、より有望で実現可能なバージョンを生み出しています。より頻繁な変異から利益を得ており、技術や組織に関する新しい効果的な解決策の生成において分散化から利益を得ています。逆に、一つの見解が「勝利」し、完全かつ無条件の合意が達成される状況は、特定の状況下で崩壊のリスクを伴います。そのため、自然は惑星サイズの超生物を作り出す道を選ばず、分散化の道を選びました - すべての生物が生態的ニッチや生態系に散在していることで、生活全体が安定し、[デイジーワールドモデル](https://en.wikipedia.org/wiki/Daisyworld)に従って地球自体が安定化する（要するに、生物圏とその多様性により、惑星がより安定する）。

では、なぜこの話をしたのでしょうか？主に、すべてのデータが強制的な合意を必要としないことを強調したいためであり、すべてのシナリオにブロックチェーンが適しているわけではないことを示したいためです。合意が必要となるのは、協調しない行動が不可逆的な結果をもたらす可能性がある場合です。たとえば、交差点では重要です。進む時と止まる時に関する交通ルールに合意がない場合、潜在的な混乱が想像できます！

記事の主題に戻りますと、リスクが高い場合には合意が適切であり、逆にリスクが小さい場合には完全に分散化された合意のないシステムを選択する方が適しています。コード開発自体は比較的安全な活動ですが、ソースの状態やビルドサーバー上の実行可能ファイルの状態である限りです。しかし、これらのファイルを現実世界の物理インフラに展開する際には、一貫性を保つことが非常に重要です。そのため、DevOpsスタックの最初の2つのポイント（開発とビルド）では、合意のあるプロジェクトを選択しました。

## 第1フェーズ - 開発 - Radicle

![](/blog/images/web3-devops-stack/1st-phase-development.png)

したがって、コード開発では完全な自由と分散化が必要です。最高のソリューションを直接作者から生成します。私たちにとって幸運なことに、コード開発業界では、デファクトスタンダードが分散型設計のバージョン管理システムになっています。もちろん、私が話しているのはgitです。gitは事前に単一の「真実のソース」の存在を意味しません - コードを使用する前に、ユーザーはリポジトリを自分のコンピュータにクローンして、ローカルコピーで作業する必要があります。さらに、gitのデータ保存方法は、コード変更の固定された事実であるブロックの連鎖に過ぎず（コミット）、これにより履歴の不変性が保証されます。つまり、git自体が一種のブロックチェーンであり、その合意は作者自身によってブランチングやマージリクエストを通じて手動で達成されます。

しかし、gitの分散型の性質にもかかわらず、web2プラットフォームがその場を占めています。現在、コード開発はほぼ完全にGithub、Bitbucket、Gitlabなどの比較的少数のプラットフォームを中心に集中しています。これは、追加ツールの導入によって起こったことです：DevOps（CI/CDパイプライン、ソースコード依存関係の脆弱性の検出などの組み込み機能）およびソーシャルネットワーキング（開発者報酬システム、課題追跡、プロジェクト管理）。これらのツールは元のgitプロトコルの一部ではなく、プラットフォーム間でのプロジェクトの移行を複雑にします。

プロジェクト[Radicle](https://radicle.xyz/)は、コード開発者が大規模なプラットフォームに依存する必要性から解放することを目的として設立されました。これは、私たちのWeb3-DevOpsスタックの最初のコンポーネントと見なしています。このプロジェクトには[長い歴史](https://docs.radworks.org/community/our-story)があり、現在の瞬間に至るまでいくつかの重要な変革があります。最初は、Radicleは当時人気を博していたInter Planetary File System（IPFS）の上に構築されていましたが、ある時点で開発者たちは、IPFSでコードリポジトリデータを保存およびハッシュ化する方法がgitでの保存方法と互換性がないことに気付き、情報の重複と小さな更新の場合でも過剰なトラフィック消費をもたらしていました。徐々に、よりミニマリストな解決策に切り替える決定がなされました - ネイティブの[packプロトコル](https://git-scm.com/docs/pack-protocol/en)を使用して、gitパッチを直接交換し、これを「codekeeper」ネットワークでのデータ伝送の主要な方法にしました。この決定は、プロジェクトをGoからRustに大規模なリファクタリングおよび書き直しの始まりとして機能しました。Heartwoodと呼ばれる新しいプロトコルバージョンが誕生しました。プロジェクトは、Secure Scuttlebutt（SSB）やBitcoinの[Lightning Network](https://en.wikipedia.org/wiki/Lightning_Network)などのプロジェクトからインスピレーションを得ています。

その後、2021年には、分散型自治組織（または単にDAO）であるRadworksがEthereumブロックチェーン上に設立され、RADガバナンストークンが発行され、プロジェクトのさらなる開発のための必要な資金が調達されました。プロジェクトチームは、コード開発における社会的および経済的要素の重要性を否定していないようですが、同時に、すべてのサポートツールを自分たちの実装に統合しようとはしていません。そのような取り組みの1つが、プロジェクトと同名のスマートコントラクト[Drips](https://www.drips.network/)であり、「依存関係を資金提供する」というスローガンのもと、オープンソース開発者の間での寄付の自動配布を目指しています。このスマートコントラクトでは、各開発プロジェクトが、受け取った寄付金をその依存関係（パッケージ、ライブラリ）のセットに自動的に再配分することができます。

つい最近、2024年3月には、Heartwoodプロトコルの実装の1.0.0リリースがリリースされ、これにより分散型開発パイプラインの本番シナリオでの検討が可能となりました。

## 第2フェーズ - ビルド、テスト、継続的インテグレーション - Fluence

![web3 build software](/blog/images/web3-devops-stack/2nd-phase-build.png)

私たちの簡略化されたDevOpsパイプラインの次のステップは、コードのコンパイルだけでなく、さまざまな計算リソースの強度を持つプロセスを含むビルド段階です。ただし、これらの計算が常に具体的な変更につながるわけではありません。言い換えれば、すべてのコード変更やビルドの開始がリリースにつながるわけではありません。しばしば、継続的インテグレーション（CI）パイプラインはスケジュールに従って実行されます。それらが生成する成果物は通常、短命であり、リリースに含まれない場合は削除されます。したがって、開発ライフサイクルのこの段階を、結果の検証にブロックチェーンを使用する多くのクラウドコンピューティングプロジェクトと同様に、コンセンサスを必要とする段階とは見なしていません。

[Fluence](https://fluence.dev/)の開発者たちも同様の立場を取っています。これは、Robonomicsに非常に近いプロジェクトであり、トランスポートレイヤーとしてlibP2Pを、ストレージレイヤーとしてipfsを積極的に使用し、中央集権化されたプラットフォームなしでピアのオーケストレーションと計算に焦点を当てています。これらを詳しく見てみましょう。

Fluenceには、AquaとMarineという2つの主要なコンポーネントがあります。前者は特定のドメイン向けの言語（DSL）であり、タスクのシーケンスを管理するために使用されます。コンピューティングデバイス上で、つまりピアをオーケストレートするために使用されます。一方、別の言語を習得することは多くのユーザーを妨げるかもしれませんが、他方で、これは避けられない未来に向けてすぐに準備を整える誠実な一歩です。実際、ほとんどのCIプラットフォームは、通常、YAMLやJSONなどの一般的な形式の構成ファイルを提供しています。最初はこれが本当に便利であり、プログラミングスキルを持たないユーザーでも作業を開始できますが、ニーズやそれに応じて構成の数が増えるにつれて、プログラマー向けの馴染みのあるツールの不足がボイラープレートコードの増加や複雑さの管理の困難につながります。テンプレートを使用してYAMLを構成言語にしようとする試みも問題を解決せず、これがHCL（HashiCorp Configuration Language）のようなAd-hoc構成記述言語の登場につながっています。Aquaは、計算の流れのためのアプリケーションプログラミング言語として即座の解決策を提供し、Pi計算の形で信頼性のある理論的基盤を持ち、Aquaコードはその後、ピア上での実行のためにコンパイルされます。これにより、技術への参入の敷居は少し高くなりますが、将来的にはより安定してメンテナンスしやすい作業を提供するはずです。現時点ではAquaはかなり低レベルの言語ですが、将来的には便利な数学的抽象化を使用して計算フローを設計するためのベストプラクティスを実装するライブラリが登場するかもしれません。これにより、分散計算の開発が加速されるでしょう。

Aquaは計算の順序を設定しますが、計算自体はMarineを使用して準備および実行されます。MarineはFluenceによって開発されたコンポーネントであり、相互に互換性のあるWebassemblyモジュールを組み立てるためのツールセットであるSDK（Software Developers Kit）およびそれらの実行のための汎用環境であるランタイムを含んでいます。モジュールは比較的独立したソフトウェアコンポーネントであり、それぞれが独自の状態を保持していますが、関数のインポート/エクスポートを介して互いにやり取りすることができます。相互作用するモジュールのセットはサービスを形成し、複雑な振る舞いを実装し、Fluenceピアネットワーク内のアクターとして機能します。

AquaとMarineは、進化競争で成功の可能性を高めるために外部世界でどのような行動を取るかについての意思決定を支援する計算の多様性を提供すると言えるものを完全に提供します。

[モデルベース](https://en.wikipedia.org/wiki/Model-based_systems_engineering)のロボティクス開発にはリソース集約型の計算が必要です。開発されたロボット用ソフトウェアの大部分のテストはシミュレータで行われ、強化学習ベースのアルゴリズムはそのような仮想環境を何十万も起動します。回数を繰り返すことが必要です。さまざまな物理エンジンやレンダリングエンジン、およびそれらに基づくゲームエンジンは、仮想環境として機能することができます。最近、エンティティコンポーネントシステム設計パターンがこれらの環境で広く普及しています。ちなみに、Open Roboticsのよく知られたロボットシミュレーターであるGazebo/ex-Ignitionの最新バージョン（彼らはROSも開発しています）も、[ECSを使用](https://gazebosim.org/docs/harmonic/architecture)してパフォーマンスと柔軟性を向上させています。実際、Fluenceの開発者によると、彼らの実行モデルは、この原則に基づいて構築された分散アーキテクチャの実装に適していると言います。

もちろん、コンパイルされてテストされたソフトウェアが価値をもたらすには、ハードウェアプラットフォームに展開する必要があります。仮説上、Fluenceを使用してソフトウェアを展開することも可能です。実際、開発者自身が、彼らのスタックはピア上に展開することも可能であり、実際にそうなっています。ただし、外部環境や物理機器との相互作用領域では、合意が必要で重要だと考えています。

## 第三フェーズ - 展開 - Robonomics

![robotics deployment art](/blog/images/web3-devops-stack/3rd-phase-deploy.png)

ソフトウェアの重要な特徴は、それ自体が外部世界を変えるのではなく、周囲の現実のモデルとして機能し、それについての推論を行い、行動計画を提案し、装置や人々を使用して外部世界でプロセスを開始するのに役立つことです。たとえば、課題トラッカー自体は外部世界を変えるシステムではなく、開発チームのデジタルツインと呼ばれ、それ自体が変化をもたらします。課題トラッカーのおかげで、チームはお互いの行動を調整し、助け合うことができます。言い換えれば、課題トラッカーは開発チーム内で合意を維持することを可能にします - 誰がどのタスクをいつ行うか - しかし変化自体は人々によって行われます。

世界を変えるシステムについて議論する際、スマートデバイス、ロボット、自律工場など、現実世界で運用される物理的エンティティを指します。基本的に、Robonomicsは情報システムや人々からロボットシステムを介して外部世界につながる橋として機能します。安全性の重要性は過小評価できず、それを無視すると資本損失だけでなく、実際の災害につながる可能性があります。

これらのシステムの重要性にもかかわらず、最初の安全な分散型ストレージシステムは産業部門ではなく金融部門に現れました。銀行口座がそれに証明されました。家庭用電化製品よりも魅力的な標的となっているのは、ほとんどの家庭用電化製品がネットワーク接続を欠いているためです。銀行情報システムのセキュリティに使用されている技術は、SWIFTからEthereumへと大きく進化し、現在は他の経済部門にも徐々に導入されつつあります。

Robonomicsは、これらの安全で分散型ネットワークの最前線に立ち、Web3 DevOpsコンベアーの最終段階であるデプロイメントを担当しています。

一般的に、デプロイはシステムを稼働させることを意味します。この用語のより馴染み深い同義語はインストール（install）であり、これにより製造および配信されたシステム（特定の種類の機器のインスタンス、ソフトウェアの実行可能ファイル）が上位システム内で機能を開始します。この場合、ブロックチェーンの利点は何でしょうか？まず第一に、プログラムの任意のバージョンを外部にリリースする際には、リリースされた内容を正確に把握することが常に重要です。開発中はバージョンが非常に頻繁に変更されることがあり、これは正常なことですので、それらに関するすべての情報をブロックチェーンに記載することは望ましくありません。ただし、リリースまたは起動のイベントは確定される必要があるため、フィードバックを受け取った際に、どの正確なソースコードのバージョンや図面と比較すべきかを明確に理解できるようにする必要があります。ブロックチェーンは、それに接続されたデバイスのすべてのソフトウェア更新情報の信頼性のあるリポジトリとして機能することができます。

さらに、インストールプロセスは一貫している必要があります。不一致があると、構成の衝突が発生する可能性があります。これらの衝突は、ソフトウェアモジュールのバージョンが一致しない、同じスペース内で異なるシステムを展開する、その他関連する問題から生じる可能性があります。たとえば、以前に言及した無制御な交差点での車の衝突は、そのような衝突の例です。ソフトウェアの展開の文脈では、衝突はAPIの違反、不十分なハードウェア機能、または禁止されたまたは安全でないメモリロケーションへの書き込みとして現れる可能性があります。Robonomicsは、接続された機器の構成を保存し、コンセンサスアルゴリズムレベルでそのような状態を防ぐことができます。

Robonomicsパラチェーンでソフトウェアを展開するためには、特別な[launch](https://wiki.robonomics.network/docs/launch/)呼び出しを使用できます。これにより、追加のパラメータを指定してブロックチェーンに接続されたノードを起動できます。パラメータは、IPFSコンテンツ配布ネットワーク内の一意の識別子であり、そこからソフトウェアイメージ、バイナリファイル、オペレーティングシステム構成のソースコード、さらにはbashスクリプトを取得できます！ネットワーク内の各トランザクションが暗号鍵で署名されているため、本質的には、パラチェーン内でのこのような呼び出しは公開リリース署名と同等です。

より複雑なシナリオでは、[デジタルツイン](https://wiki.robonomics.network/docs/digital-twins/ )は、任意のデータ（256ビット）とRobonomicsネットワーク内のアカウントとの対応表を設定することを可能にするものです。これにより、Robonomicsネットワーク内のデバイスアカウントの構成バージョンの変更履歴を記録することができます。従来の構成および展開システムでは、ホストは通常、ノードとして指定されます - これらはDNS名またはIPアドレスを持つコンピュータです。Web3の場合、ホストは公開暗号鍵によって識別され、その鍵にアカウントが関連付けられます。構成を変更するには、デバイスが新しいソフトウェアのバージョンを受信して更新するための新しいコンテンツ識別子を追加できます。

## すべてを組み合わせる

![web3 devops stack](/blog/images/web3-devops-stack/devop-stack-full-art.png)

では、鳥瞰図からこれを見てみましょう。人々は、私たちの大規模なサイバー物理システムの中心を成します。人々は混沌で予測不可能です... そしてそれは良いことです！彼らは新しい意味、アイデア、製品を生み出します。彼らは世界を変える意志を実現します。今、21世紀において、世界を自分の手で変える必要はありません。人類の前には、人間の手が最も適したツールではない課題があります。代わりに、私たちの意志の伝導体として機能する機械があります。機械は厳密に決定論的で予測可能です。そして人々はこれを愛します、そうです。列車が時間通りに駅に到着し、消費する製品の品質が常に予測可能に優れているとき、人々はそれを愛します。そのため、人々はネットワークを利用します。たくさんのネットワーク！彼らはRadicleネットワークでアイデアを生み出し、機械はそれらをFluenceネットワーク上の実行可能なモジュールに集めてテストし、そしてRobonomicsネットワーク上のロボットに展開します。ロボットは環境を変え、そのセンサーもRobonomicsを介して人々にフィードバックを提供して決定を下します - このサイクルは閉じられます。これは継続的な改善のサイクルであり、誰もが自分の場所を持っています。機械と人間の間に矛盾はありません - 両者が調和して新たな秩序を創り出す - 惑星間の人類です。