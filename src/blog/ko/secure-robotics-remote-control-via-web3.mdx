---
title: "로보노믹스 솔루션을 통한 안전한 로봇 공학 원격 제어"
date: 2024-04-19
published: true
locale: 'ko'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "자신의 스마트 기기를 원격으로 연결하고 제어하는 것은 사용자들 사이에서 매우 인기 있는 기능입니다. 그러나 이러한 사소한 작업조차 경험이 부족한 사용자들에게 많은 어려움을 야기합니다 - NAT 극복부터 보안 문제까지. 새로운 기사에서는 이러한 어려움을 로보노믹스의 도움으로 어떻게 극복할 수 있는지 보여드리겠습니다."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "자신의 스마트 기기를 원격으로 연결하고 제어하는 것은 사용자들 사이에서 매우 인기 있는 기능입니다. 그러나 이러한 사소한 작업조차 경험이 부족한 사용자들에게 많은 어려움을 야기합니다 - NAT 극복부터 보안 문제까지. 새로운 기사에서는 이러한 어려움을 로보노믹스의 도움으로 어떻게 극복할 수 있는지 보여드리겠습니다."
tags: ['ROS 2', '스마트 홈']
---

이전 기사에서는 산업 솔루션의 장점을 로봇화된 스마트 홈의 인프라에 어떻게 활용하는지에 대해 이야기했습니다. ROS 2 프레임워크와 그 미들웨어 프로토콜이 로컬 네트워크 내에서 자동 장치 발견 및 밀접한 상호작용(실시간 포함)을 제공하는 방법을 보여드렸습니다. 그러나 이 접근 방식은 주로 신뢰할 수 있는 영역인 '신뢰할 수 있는 영역'에 적합합니다. 여기서는 어떤 제3자의 출현이 불가능한 컴퓨터 네트워크 부분입니다. 이 경우에는 실행 중인 모든 프로그램을 신뢰하고 프로그램이 서로 데이터를 교환할 때 암호화를 사용할 필요가 없는 것과 같이 모든 프로그램이 데이터를 교환할 때 암호화를 사용하지 않습니다.

그러나 ROS 2 장치의 작동을 외부 서비스와 연동하거나 외부에서 이에 대한 원격 액세스를 제공해야 하는 경우 어떻게 해야 할까요? 이런 순간에는 보안 문제가 발생합니다 - ROS 2 노드 중 하나에 액세스 권한을 얻은 외부 서비스(잠재적으로 악의적인 사람 포함)는 사실상 다른 모든 노드에 액세스할 수 있습니다. 그는 모든 내부 DDS 트래픽을 완전히 듣고 모든 사용 가능한 시스템 서비스에 액세스할 수 있습니다.

보안과 속도/편의성 사이의 전통적인 상충 관계는 주권을 가진 스마트 홈 시스템을 안전한 부분과 안전하지 않은 부분으로 나누어 해결됩니다.

## ROS 2 보안

ROS 2 노드의 작업 공간에서 특별한 보안 요구 사항을 가진 영역을 지정하는 것은 상당히 복잡한 작업입니다. 표준 ROS 2 보안 패키지([sros2](https://docs.ros.org/rolling/Concepts/Intermediate/About-Security.html))는 [ros-core](https://ros.org/reps/rep-2001.html#id32)의 일부이며, 모든 ROS 2 배포판이 이에 기반하여 구축되었으며, 핵심 개발자들에 따르면 이 문제를 해결하기 위해 고안되었습니다. 이는 단일 로컬 네트워크 내에서 비교적 간단한 공개 키 인프라 (PKI)를 설정할 수 있는 기능을 제공합니다. 각 ROS 2 노드에 대해 다른 노드의 데이터에 대한 액세스 정책이 설정되며, 이러한 시나리오에 대한 표준 파일 집합 - 암호화 키 및 인증서가 제공됩니다. 프로그램 실행 중에 노드는 프로젝트 시작 단계에서 명시적으로 구성된 액세스만 "보는" 것입니다. 그러나 이 접근 방식에는 주요 단점이 있습니다 - 시스템 내의 모든 트래픽이 암호화되어 있어 DDS가 생성하는 네트워크 부하 아래에서 성능에 영향을 줄 수 있습니다. 모든 액세스 정책을 작성하고 모든 노드에 대한 키를 생성해야 합니다. 이는 설정 및 유지 관리가 매우 어렵습니다. 그리고 무엇보다도, ROS 2 미들웨어의 주요 장점인 성능을 잃게 됩니다.

## 브릿지

다른 해결책은 필요한 데이터를 전송하면서 모든 것을 비공개로 유지하는 이른바 게이트웨이를 만드는 것입니다. 일반적으로 VPN 또는 SSH 터널을 사용하여 이를 달성합니다. 안전한 데이터 교환 공간에 별도의 노드가 생성되어 외부 연결을 위한 공개 주소를 갖습니다. 이 경우, 보안 관리는 이 노드의 수준에서만 수행되며(본질적으로 외부 세계로의 창문), 다른 모든 것에는 영향을 미치지 않습니다. 이 접근 방식은 [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) 및 [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds) 프로젝트에서 사용되지만 이 역시 단점을 가지고 있습니다. 이 시나리오에서는 반드시 상대방의 IP 주소 또는 도메인 이름과 엄격하게 연결된 안전한 통신 채널을 설정해야 합니다. 이는 변경될 수 있고, 차단될 수 있거나 공격에 취약할 수 있습니다. SSH가 만들어진 시점에는 이러한 상황이 고려되지 않았습니다. 게다가 SSH는 주로 운영 체제의 액세스 제어 시스템에 의존하며, 그에 내재된 모든 단점을 가지고 있습니다.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Classic Remote Control via public IP and SSH/VPN" />

*요즘 사용자들이 로봇에 원격으로 연결하는 방법은 다음과 같습니다. 그러나 이 방법에는 몇 가지 단점이 있습니다. 이 방법은 일부 국가에서 차단될 수 있는 공개 IP 또는 DNS 이름이 필요합니다. 또한 잠재적으로 안전하지 않은 위치(예: ~/.ssh)에 추가 개인 키를 저장해야 합니다.*

시스템 관리자와 IT 전문가들이 주로 사용하는 SSH는 Bash 명령줄의 기본 지식과 운영 체제에 대한 신뢰가 필요합니다. 암호화 키는 파일 시스템이나 SSH 에이전트에 직접 저장되기 때문에 액세스 키를 관리하는 것은 평균 사용자에게는 꽤 복잡한 작업으로 남아 있습니다.

## Web3 솔루션

위의 방법들에는 단점이 있음을 알 수 있으므로, Robonomics가 구축된 피어 투 피어 네트워크 기술을 사용하여 문제에 대한 가능한 해결책을 고려해 보겠습니다. 이 경우 분산형 Robonomics 클라우드는 안전한 라우팅 테이블로 볼 수 있으며, 상대방의 주소는 노드의 공개 키입니다. DNS 시스템(도메인 이름 등록기 및 서버 포함) 및 IP 주소 차단에 의존하지 않도록 로컬 Robonomics 노드와 대상의 공개 키를 알아야 합니다. Robonomics가 사용하는 [libP2P](https://libp2p.io/) 라이브러리는 메시지 전달을 위해 다양한 전송 프로토콜을 사용할 수 있습니다.

또한, Web3 기술의 발전으로 개인 키를 포함한 중요한 정보를 관리하는 더 효율적인 방법이 등장했습니다. 그 중 하나는 니모닉 구절 또는 시드입니다. 이는 분산형 네트워크에서 계정을 생성하는 데 사용되는 12 또는 24개의 단어 세트입니다. 이 방법은 편리하고 안전하며, 초기화 중에 시드를 외부 매체(예: 종이)에 한 번 작성하고 계정을 복구하는 데만 사용됩니다. 니모닉 구절에서 마스터 키가 생성되며, 이를 통해 다양한 작업을 위한 키 계층 구조를 생성할 수 있습니다(자세한 내용은 **[계층적 결정 키](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)** 참조). 이는 키 관리를 간단하게 하고, 손실된 경우 키를 복구할 수 있습니다. 악의적인 사용자가 당신의 키 쌍 중 하나에 액세스하더라도, 니모닉 구절에서 생성된 다른 키에 대한 정보를 얻을 수 없습니다. 소프트 파생 키 기능을 사용하면 루트 계정의 소유권을 확인할 수 있습니다. 소프트 키는 부모 공개 키를 사용하여 파생될 수 있기 때문에 부모를 식별하는 데 사용할 수 있습니다.키를 노출시키지 않고 부모 시드를 사용하여 원격 제어합니다.

## 홈 어시스턴트에서 원격 제어

더 자세한 연결 프로세스를 살펴봅시다. 분산형 [Robonomics 애플리케이션](https://robonomics.app/) (또는 DApp)은 브라우저에서 직접 작동하며 추가 소프트웨어를 설치할 필요가 없거나 키를 파일 시스템에 저장할 필요가 없습니다. 이는 여러 프로그램이 있는 환경에서 보안을 확신할 수 없는 상황에서 중요합니다. 액세스 키 관리는 Polkadot JS 확장 프로그램을 통해 수행되며 추가 신뢰성을 위해 외부 하드웨어 키 저장소(예: [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault))를 사용할 수도 있습니다. Robonomics와 상호 작용하기 위한 전문 소프트웨어 외에도 DApp에는 Home Assistant와의 연결을 담당하는 가벼운 libP2P 노드도 포함되어 있습니다.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="홈 어시스턴트 원격 제어" />

Robonomics 웹 서비스 구독자는 컨트롤러라고 하는 것을 통해 스마트 홈 인프라의 액세스 권한을 관리합니다. 컨트롤러는 디지털 트윈에 암호화된 형태로 모든 민감한 정보를 관리하는 계정입니다. 구독에 추가된 사용자만이 이 데이터를 해독할 수 있습니다. 액세스 키뿐만 아니라 디지털 트윈에는 DApp 구성 및 DApp가 안전한 연결을 위해 연결하는 libP2P 멀티 주소도 저장됩니다.

멀티 주소는 libP2P 접근 방식을 독특하고 유연하게 만드는 혁신 중 하나입니다. 이는 노드를 위한 주소의 특별한 형식으로, 특정 노드에 연락할 수 있는 여러 IP 주소, 전송 및 네트워크 식별자, 프로토콜 및 포트가 포함되어 있다는 것을 의미합니다. 지원되는 프로토콜의 전체 목록은 [사양서](https://github.com/multiformats/multiaddr/blob/master/protocols.csv)에서 확인할 수 있습니다.

따라서 구독에 추가된 사용자는 Robonomics 디지털 트윈에서 멀티 주소를 추출하고 자신만 알고 있는 피어 ID와 안전한 연결을 설정합니다. 성공!

## ROS 2에서 원격 제어

마찬가지로, 로봇과 상호 작용하기 위해 Robonomics의 기존 기능을 활용할 수 있습니다. Robossembler 팀은 Robonomics 그랜트 프로그램 하에 [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge)라고 알려진 Proof of Concept 프로젝트를 개발했습니다. 이 브리지는ROS 2 노드를 외부 서비스, 원격 워크스테이션 또는 다른 ROS 2 시스템과 연결하십시오.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="로보노믹스를 통한 ROS 2 원격 제어" />

*집 로봇의 원격 제어가 ROS 2의 경우 어떻게 보일 수 있는지에 대한 그림입니다. 이 접근 방식은 여러 가지 중요한 이점을 제공합니다: 공개 IP가 필요하지 않으며, 로봇에 대한 액세스는 네트워크 방화벽(NAT)을 통해 가능하며, 개인 암호화 키가 디스크에 저장되지 않고 신뢰할 수 있게 보호됩니다.*

ROS 2에서 사용되는 프로토콜인 DDS는 노드 상호 작용을 위한 유사한 발행-구독 모델을 가지고 있기 때문에 libP2P와 자연스럽게 결합됩니다. Robonomics 브릿지의 도움을 받아 ROS 2 노드와 그 인터페이스 - 토픽, 서비스, 메시지 유형(예: eProsima 통합 서비스 사용)는 선언적으로 구성될 수 있으며, 이를 통해 외부에서 로봇과 상호 작용할 수 있습니다. 이는 원격 컴퓨터에 연결할 때 추가 수준의 보안도 제공합니다. 상대방의 PeerID를 얻는 메커니즘은 홈 어시스턴트의 경우와 동일할 수 있으며, 로보노믹스 노드로부터 디지털 트윈 요청을 통해 상대방의 PeerID를 얻을 수 있습니다. 다만 차이점은 홈 어시스턴트 서버 대신 ROS 2 로봇이 있고, libP2P-websocker-proxy 대신 로보노믹스 ROS 2 래퍼가 로봇에 연결된다는 것입니다.

## 미래의 잠재적 기회

그러나 이것들은 Web3 기술을 활용한 분산 클라우드가 제공할 수 있는 모든 가능성이 아닙니다. 위에서 설명한 예시에서 이러한 기술은 원격 컴퓨터 간에 메시지 데이터 스트림을 비교적 간단하게 전송하는 데 사용됩니다.

이는 로보노믹스 네트워크 스택의 기본 전송 수준이라고 할 수 있으며, 이는 더 복잡한 고수준 프로토콜의 구현을 위한 기초입니다. SSH 아날로그부터 시작하여 사용자들이 사이버-물리 시스템과 보다 상호작용적으로 상호작용하는 것을 의미하는 더 많은 상호작용을 내포하는 응용 프로토콜로 끝납니다. 또한, 자율 로봇 인프라의 많은 사용자들 간의 상호작용을 의미하는 응용 프로토콜까지 다양한 응용 프로토콜이 포함됩니다.

예를 들어, 특정 제품의 생산을 시작할 결정은 이 제품의 잠재적인 소비자들의 조직 내 투표와 연결될 수 있으며, 이는 경제적 타당성을 고려합니다. 현재, 어떤 생산을 시작할지에 대한 결정은 투자 메커니즘을 통해 이루어지며, 투자자들은 잠재적 수요에 대한 정보를 받아 이를 충족할 수 있는 개별 회사의 주식을 취득할 수 있습니다.. 소비자가 새 제품의 개발 및 가격 결정에 더 적극적으로 참여할 수 있다면, 장기적으로 생산이 소비자가 제공한 데이터에 따라 수요를 충족시키기 위해 자동으로 재구성되는 운영 모드로 전환할 수 있습니다.