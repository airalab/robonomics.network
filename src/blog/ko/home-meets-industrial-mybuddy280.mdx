---
title: "자동화: 가정과 산업이 만나다"
date: 2024-03-24
published: true
locale: 'ko'
cover_image: /blog/images/automation-home-meets-industrial-mybuddy280/Cover.png
description: "ROS 2는 로봇 응용 프로그램을 개발하는 데 빠르게 인기를 얻고 있는 프레임워크입니다. 이는 산업의 축적된 경험을 포함하고 이를 전 세계 커뮤니티와 공유합니다. 저희 팀은 사용하는 로봇을 위한 새로운 ROS 2 패키지 개발 및 탈중앙화된 Robonomics 네트워크에 통합하는 데 적극적으로 참여하고 있습니다."
related: ['Robonomics Helps Enable Rust for ROS 2']
abstract: "ROS 2는 로봇 응용 프로그램을 개발하는 데 빠르게 인기를 얻고 있는 프레임워크입니다. 이는 산업의 축적된 경험을 포함하고 이를 전 세계 커뮤니티와 공유합니다. 저희 팀은 사용하는 로봇을 위한 새로운 ROS 2 패키지 개발 및 탈중앙화된 Robonomics 네트워크에 통합하는 데 적극적으로 참여하고 있습니다."
tags: ['ROS 2', '스마트 홈']
---

한 산업에서 개발된 기술은 종종 처음에는 해당 산업을 위해 설계되지 않았더라도 다른 산업에 널리 적용되는 경우가 있습니다. 따라서 군사용으로 처음 개발된 인터넷은 민간 분야에서 그 전체 잠재력을 발휘하여 현대 삶의 중요한 부분이 되었습니다. 비슷한 추세가 산업에서도 나타날 수 있으며, 기업 시나리오를 위해 개발된 기술이 최종 사용자에게도 혜택을 줄 수 있습니다.

역사적으로, 가정 자동화와 산업 로봇 공학은 별개로 발전해 왔습니다. 고가와 안전 문제로 인해 산업용 로봇은 주로 대규모 생산에 제한되어 왔습니다. 생산 관리 소프트웨어는 사유적인 제조 실행 및 컴퓨터 지원 제조 시스템 내에서 한정되어 있었습니다. 한편, 가정 자동화는 사용자 기기, 가전제품, 조명, 난방, 통신과 상호 작용하는 상당히 간단한 장치 시스템을 대표했습니다. 통신에서 강조되는 것은 무선 통신이었습니다.

그러나 우리는 추세를 보고 있습니다. 한편으로는 소비자 분야의 무선 통신 프로토콜이 산업용으로 점차 적응되고 있습니다. 예를 들어, 산업용 Wi-Fi나 블루투스의 버전이 나타나고 있습니다. 다른 한편으로는 조작 로봇이 더 저렴해지고 산업 이외의 용도로 고려되기 시작했습니다. 지금부터라도, 미래에 안전한 협업 로봇이 가정의 필수적인 부분이 되어 우리의 삶을 더 편리하게 만들어주고 요리 및 기타 루틴 가사를 돕는 데 사용될 수 있을지에 대해 고민할 수 있습니다. 또한, DDS 미들웨어 프로토콜과 같은 산업 통신 프로토콜의 오픈 소스 구현도 있습니다.ROS 2 프레임워크의 핀링 - 전 세계의 열렬한 지지자들의 유산이 되고 있습니다.

ROS 1은 단일 로봇 관리를 위해 개발되었으며 제조 기업의 요구 사항을 충족시키지 못했습니다: 실시간 작동, 불안정한 통신 상황에서의 내결함성, 대량의 장치와의 상호 작용. 이에 ROS 2의 개발이 시작되었으며, 원래 산업의 요구에 특히 맞춰졌으며 현재는 로봇 공학에서 주류가 되고 있습니다. 2023년 중반, ROS 2 Dashing이 2019년에 등장한 후 5년 만에 엔지니어들이 사용하는 ROS 2 패키지 수가 [metrics.ros.org](https://metrics.ros.org/packages_rosdistro.html)에 따르면 ROS 1 패키지를 초과했으며, 현재 공식 저장소에서 다운로드되는 소프트웨어 패키지의 약 70%가 ROS 2용입니다.

## 가정 자동화 시나리오에 대한 ROS 2의 장점

Robonomics 팀은 이 과정의 최전선에 있으며 ROS 2 커뮤니티를 적극적으로 지원하고 있습니다. 우리의 지원으로 Rust용 ROS 2 바인딩이 개발 중에 있습니다(우리의 블로그에서 [확인하세요](https://robonomics.network/blog/ros-2-rust-report-2022/)), 그리고 Robonomics 분산 클라우드의 주요 기능을 사용하기 위한 [ROS 2 Wrapper](https://github.com/Fingerling42/robonomics-ros2)도 개발 중에 있습니다. 또한 ROS 2를 지원하는 장치들을 정기적으로 테스트하여 소프트웨어가 실제로 작동하는지 확인합니다. 최근에 우리가 획득한 myBuddy 280과 같은 로봇 중 하나는 [Elephant Robotics](https://www.elephantrobotics.com/en/)에서 제공하는 연구 및 교육용으로 비교적 저렴한 이중 팔 조작기입니다. 이 로봇은 약 250그램까지 들 수 있으며 가격은 약 1700달러로 처음 사용하는 사용자에게 비교적 저렴합니다.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_1_myBuddy_280.png" alt="myBuddy 280 이중 팔 로봇 조작기" />

이 로봇을 예로 들면, ROS 2의 장점이 매우 명확히 보이며, 이를 통해 이 프레임워크를 가정 자동화 시나리오에 잠재적으로 활용할 수 있습니다. 특히 DDS 미들웨어 프로토콜 덕분에 상대적으로 고성능 데스크톱 PC와 함께 myBuddy를 사용하고 전형적인 스마트 홈 구조에 완전한 로봇을 추가할 수 있습니다. 만약 로봇과 컴퓨터가 연결되어 있다면,같은 로컬 네트워크를 사용하고 [DOMAIN_ID](https://docs.ros.org/en/rolling/Concepts/Intermediate/About-Domain-ID.html)를 동일하게 설정한 경우 추가 구성 없이 통신할 수 있습니다. 드라이버 및 하드웨어 설명 패키지와 같은 기본 소프트웨어는 로봇의 Raspberry Pi에서 실행됩니다. "스마트" 이동 플래너(예: MoveIt), Gazebo와 같은 시뮬레이터, RViz와 같은 모니터링 및 시각화 도구, Robonomics 노드, 머신 러닝, 일괄 로그 처리, IPFS 분산 데이터 전송 노드 및 계산 능력이 많이 필요한 기타 작업을 실행할 수 있는 이 더 강력한 기계에서 나머지 필요한 응용 소프트웨어를 실행할 수 있습니다.

이러한 배치는 계산 리소스를 최적으로 분배하여 사실상 마이크로서비스와 같은 아키텍처를 만듭니다. ROS 2 플랫폼과 기본 DDS 미들웨어 프로토콜 덕분에 이러한 유연성이 가능해지며, 각 장치가 자신의 능력에 가장 적합한 작업을 수행할 수 있습니다. DDS에 내장된 자동 장치 감지 메커니즘을 통해 ROS 2 토픽 및 서비스는 추가 설정 없이 서로 찾을 수 있습니다.

<RbImage zoom src="/blog/images/automation-home-meets-industrial-mybuddy280/pic_2_ros2_dds_smart_home.png" alt="ROS 2와 DDS를 활용한 스마트 홈" />

또한 ROS 2의 아키텍처는 전송 프로토콜(예: DDS)을 ROS 미들웨어라는 별도의 레이어로 분리함을 의미하며, 이는 다른 프로토콜 구현으로의 전환을 더 쉽게 만듭니다. 따라서 ROS 커뮤니티는 오랜 토론 끝에 최근에 2024년에 계획된 Zenoh라는 가벼운 프로토콜로 전환하기로 결정했습니다. 이 주제에 대해 더 깊이 알아보려면 2023년에 고려된 모든 DDS 대안에 대한 정보를 담은 [ROS 2 미들웨어 대안 보고서](https://discourse.ros.org/uploads/short-url/o9ihvSjCwB8LkzRklpKdeesRTDi.pdf)를 참조하는 것을 권장합니다.

## myBuddy의 모험과 Robonomics 호환 드라이버

myBuddy 280이 ROS 2와 호환되는 제품으로 마케팅되었지만, ROS 2에서 완전한 작동에는 부족함이 드러났습니다 (MoveIt2와 같은 모션 플래닝 소프트웨어 없이도). 먼저, 우리는 우리의 요구 사항을 충족시키기 위해 보급된 Raspberry Pi 4B 모델을 더 강력한 8GB RAM이 장착된 모델로 교체해야 했습니다. 둘째, 제조사로부터 제공된 myBuddy용 ROS 2 패키지를 테스트한 후 문제가 발생했습니다. 일반적으로오픈 소스 세계에서는 공개 저장소에 무언가가 게시되었다고 해서 그 기능이 보장되는 것은 아닙니다. 로봇은 현재 지원되지 않는 ROS 2 Galactic 배포판이 미리 설치되어 있었는데, 이는 2022년에 만료되었습니다 (참고로, 배포판의 지원 기간에 대해 자세히 알아보려면 [여기](https://docs.ros.org/en/rolling/Releases.html)를 참조하십시오). 모든 것을 감안해도 우리는 오래된 배포판에서 로봇을 실행해 보려고 했고, 빠르게 이른바 데드락이라 불리는 문제에 직면했습니다 — 이는 시작된 하위 프로그램(또는 컴퓨팅 프로세스)이 서로의 작업을 막는 행동입니다. 조사를 거친 후, 이러한 오류들이 ROS 2 Humble의 LTS 배포판에서 수정되었음을 알게 되었습니다.

안타깝게도 Elephant Robotics의 개발자들은 몇 년 전부터 패키지 업데이트를 중단했으며, 더 중요한 것은 로봇을 위해 필요한 모든 패키지가 ROS 1에서 ROS 2로 이전되지 않았다는 것입니다. 그래서 우리는 이 작업을 스스로 맡기로 결정했습니다. ROS 2의 저수준 API가 이용 불가능한 상황에서, 우리는 우리만의 ROS 2 패키지 [구현](https://github.com/Fingerling42/mybuddy280-ros2-robonomics)을 개발하는 것이 더 쉽다고 판단했고, 여기에 우리는 myBuddy를 Robonomics를 통해 제어할 수 있도록 추가할 수 있었습니다. 이를 위해 우리는 Python 모듈 [pymycobot](https://pypi.org/project/pymycobot/)을 가져와 우리만의 ROS 2 드라이버를 구현했습니다.

현재의 사용자 정의 드라이버는 양쪽 팔과 손목의 각 관절 상태를 얻을 수 있으며, 각 관절로 각도를 보낼 수 있으며, 로보노믹스 데이터로그를 사용하여 로봇 관절 상태를 게시하고, 런치 함수를 로봇 주소로 보내어 원격 관절 제어를 할 수 있습니다. 이를 시도하려면 Raspberry Pi 4B에 새 이미지와 패키지를 다시 설치하여 ROS 2 버전을 업데이트하는 데 상당한 시간이 소요될 수 있음을 참고하십시오 (대략 2-4시간).

앞으로, 우리는 드라이버의 기능을 확장하고 키프로스의 연구소 내에서 Robonomics를 통해 이 로봇을 원격으로 제어할 수 있도록 계획하고 있습니다. 또한 사용자가 ROS 2 프로젝트를 초기화할 때 자동으로 설치할 수 있도록 Robonomics ROS 2 Wrapper를 공식 rosdistro 패키지 목록에 포함시키고 싶습니다.

우리의 업데이트 소식을 기대해 주세요!