---
title: Χακαρισμένο το εργαστήριο του Johnny
date: 2024-06-25
published: true
locale: 'el'
tags: ['Events', 'Online school', 'Web3', ]
cover_image: ../images/hacked-johnnys-lab/cover.png
description: 'Υπήρξε πρόσφατο γεγονός “Hack Johnny’s Lab” από την Robonomics και πιστεύω ότι το χάκαρα με έναν τρόπο! Εκτός από την πρώτη προσπάθεια που έχασα λόγω παρεξήγησης των κανόνων, κέρδισα σε κάθε γύρο που συμμετείχα και εδώ είναι μια σύντομη ιστορία “πώς να”.'
abstract: "Γεια σας! Ο PaTara στη γραμμή. Υπήρξε πρόσφατο γεγονός “Χάκαρε το εργαστήριο του Johnny” από την Robonomics και πιστεύω ότι το χάκαρα με κάποιον τρόπο! Εκτός από την πρώτη προσπάθεια που έχασα λόγω παρεξήγησης των κανόνων, κέρδισα σε κάθε γύρο που συμμετείχα και εδώ είναι μια σύντομη ιστορία “πώς να”. "
---

Έτσι, μια γρήγορη και απαραίτητη ανακεφαλαίωση κανόνων: 12 λέξεις με μικτή σειρά, ένα βίντεο 5 λεπτών ενός TurtleBot 4 που περιπλανιέται σε ένα εργαστήριο
και χαλώντας τη μνημονική σειρά λέξεων της φράσης, 5-20 συμμετέχοντες πρόθυμοι να κερδίσουν και μια δωρεάν Κυριακή για να σκεφτούν μια στρατηγική.

<rb-image zoom src="./images/hacked-johnnys-lab/0.png" alt="Game Interface" />

Είμαι κάπως εξοικειωμένος με την προγραμματισμό και έχω έναν αξιοπρεπή φορητό υπολογιστή και σχεδόν καθόλου δεξιότητα στην αναγνώριση εικόνας. Περισσότερο από αυτό, 
αποφάσισα να παίξω δίκαια, που σημαί��ει χωρίς λήψη βίντεο, χωρίς κατάχρηση ταχύτητας αναπαραγωγής, χωρίς πλοήγηση μπάρας αναπαραγωγής. 
Έτσι η επιλεγμένη στρατηγική ήταν μια καλή παλιά βία. Φαίνεται περισσότερο χάκινγκ από οτιδήποτε.
Τι έχουμε εδώ: ένα σύνολο 12 λέξεων σε ανάμεικτη σειρά. Αυτό μας δίνει 12! (παραγοντικό) επιλογές φράσεων 
(479.001.600 για να είμαστε ακριβείς). Αρκετό ποσό για επεξεργασία!


## Στρατηγική 1: ανόητη και απλοϊκή.

Καλά, τι ��λλο χρειάζομαι, απλά πήγαινε και ταξινόμησε! Αλλά εδώ είναι το πρώτο κόλπο: 12! μνημονικές φράσεις απλά δεν χωρούσαν 
στα 64 GB RAM μου! Πήρα ένα σφάλμα SIGTERM στην κονσόλα του IDE. 
Δημιούργησα λοιπόν έναν [iterator](https://docs.python.org/3/library/itertools.html#itertools.permutations) και ξεκίνησα τη διαδικασία.
Μου πήρε λίγο χρόνο, δεν είμαι σίγουρος ακριβώς πόσο, αλλά μέσα σε 30 δευτερόλεπτα, για να υπολογίσω τον αριθμό των συνδυασμών.
Απλά μια αξιολογική εκτέλεση. Αλλά το θέμα είναι: το laptop μου ακόμα δεν είχε αναπτύξει τους ανεμιστήρες του στο μέγιστο! Φορτώθηκε μόνο ένας πυρήνας. 

Έκανα αναζήτηση στο Python [multiprocessing](https://docs.python.org/3/library/multiprocessing.html) πακέτο για να φορτώσω όλους 
τους λογικούς πυρήνες της CPU μου (20 από αυτούς) για παράλληλους υπολογισμούς. Διαφορετικά, θα ήταν ένα αιώνιο ταξίδι. 
Αλλά με αυτό έπρεπε να χωρίσω τον επαναληπτή μου σε 12 μέρη. Τα πακέτα multiprocessing του itertools λειτουργούν μαζί, 
αλλά όταν ένα ολόκληρο σύνολο επιλογών βρίσκεται στη RAM. Αυτό δεν ήταν η περίπτωσή μου, οπότε πραγματοποιή��ηκε το ακόλουθο:

<rb-image zoom src="./images/hacked-johnnys-lab/1.png" alt="Parallelizing"/>


Από εκείνη τη στιγμή και μετά θα χρησιμοποιούσα αυτή τη στρατηγική για να κάνω τον φορτίο της CPU μου να μοιάζει με αυτόν τον τρόπο:

<rb-image zoom src="./images/hacked-johnnys-lab/1_1.png" alt="CPU Load"/>


Πιστεύω ότι αυτό μείωσε τον χρόνο εκτέλεσης σε περίπου 5 δευτερόλεπτα. Βρήκα τον καλύτερο τρόπο για να επαναλαμβάνω 
τις συνδυασμούς αλλά υπήρχαν απλά πάρα πολλοί! Το πρώτο βήμα περιλάμβανε την εκτέλεση περίπου 480 εκατομμυρίων 
εξωτερικών στο δίκτυο. Ο κόμβος απλά θα με απαγορεύσει για DDOS και ακόμη και χωρίς αυτό θα πήρε αιώνες!

<rb-image zoom src="./images/hacked-johnnys-lab/2.png" alt="1st Attempt"/>


Απλά για λόγους εντοπισμού σφαλμάτων ξεκίνησα το σενάριο (για επικοινωνία με τον κόμβο χρησιμοποίησα ένα 
[py-substrate-interface](https://pypi.org/project/substrate-interface/1.0.3/) πακέτο) και παρατήρησα ότι πριν από την κλήση 
εκτέλεσης πήρα σφάλματα όπως _μη έγκυρη φράση μνημονικού_. Ένα ίχνος! Αν μπορούσα να επικυρώσω τον συνδυασμό στον υπολογιστή μου, 
θα έσωζα πολύ χρόνο! Η ανάλυση του GitHub με οδήγησε σε 
[αυτό](https://github.com/polkascan/py-substrate-interface/blob/master/substrateinterface/keypair.py#L170) 
κομμάτι κώδικα και πρόσθεσα μια επικύρωση συνδυασμού στο σενάριό μου. Αυτό μείωσε τον αριθμό των πιθανών εξωτερικών
σε περίπου 39.000.000 12 φορές ταχύτερα!

<rb-image zoom src="./images/hacked-johnnys-lab/3.png" alt="2nd Attempt"/>


Αλλά ακόμη, 39 εκατομύρια κλήσεις θα με απαγορεύσουν για πάντα, οπότε χρειάστηκε να ψάξω περισσότερο. Πώς θα μπορούσα 
να μειώσω σημαντικά τον αριθμό των υπολογισμών; Καλά, με λίγη προδοσία της αρχικής μου στρατηγικής. Δείτε, είχα σκοπό να αποφύγω την παρακολούθηση βίντεο, 
“ένας χάκερ, που δεν θα χρειαστεί ούτε ένα βίντεο”, αλλά η μαθηματική με έκανε να αλλάξω γνώμη. Να την αλλάξω σε μια στρατηγική 132 φορές ταχύτερη. 
Παρακάτω είναι η εξήγηση:

<rb-image zoom src="./images/hacked-johnnys-lab/4.png" alt="2 Words Insertion"/>


Με αυτό χρειαζόμουν μόνο να γνωρίζω δύο σωστές θέσεις λέξεων σε μια φράση (μία θα πάρει πολύ χρόνο, επιβεβαιωμένο από πείρα). 
Θα επαναλάμβανα μέσα από έναν συνδυασμό 10!, εισήγαγα δύο λέξεις στις σωστές θέσεις και επικύρωνα τη φράση, 
μειώνοντας τις επιλογές σε περίπου 300.000, μια σημαντική μείωση! Επιπλέον, οι συνδυασμοί 10! χωρούσαν στη RAM μου, εξαιρετικό!

<rb-image zoom src="./images/hacked-johnnys-lab/5.png" alt="3rd Attempt"/>


Επίσης, αντί να προσπαθήσω να μεταφέρω όλα τα tokens κάθε 300k φορές και να καλώ ένα δημόσιο κόμβο γι' αυτό, αποφάσισα να ρυθμίσω 
τον δικό μου τοπικό κόμβο Robonomics συγχρονισμένο με την αλυσίδα και να του ζητήσω το υπόλοιπο λογαριασμού λογαριασμού! 
Το ερώτημα είναι πολύ πιο «εύκολο» από ένα εξωτερικό. Μετά από μια ολόκληρη νύχτα συγχρονισμού (έχω βάλει ένα όριο προσωρινής μνήμης, έτσι ώστε η μου
Ο φορητός υπολογιστής δεν θα εκραγεί με δεδομένα αλυσίδας στη ROM του) Το δοκίμασα και... αυτό ήταν μια καταστροφή. Συναλλαγές δικτύου
(ακόμη και μέσα σε ένα τοπικό υπολογιστή) πήραν πολύ χρόνο. Δεν περίμενα ούτε μέχρι το τέλος, ήταν προφανώς πολύ πιο αργό από 
το να παρακολουθήσω ένα ολόκληρο βίντεο. Αν μόνο μπορούσα να γνωρίζω την ακριβή διεύθυνση του λογαριασμού! Αλλά γι' αυτό χρειάζομαι μια φράση μνημονικού… **Ή μήπως όχι πραγματικά;**

Δείτε. Οι κανόνες λένε ότι ο επιθυμητός λογαριασμός έχει **ακριβώς** 42 XRT. Γιατί δεν θ�� πάρω όλες τις ενεργές διευθύνσεις στο δίκτυο,
θα τις φιλτράρω έχοντας ακριβώς 42 XRT και θα συγκρίνω κάθε δημιουργημένη διεύθυνση με μια λίστα πιθανών στόχων 
(περίπου 20, μειώνοντας σε 1 στο τέλος). Εύκολο να πεις και να κάνεις. 

Τώρα, μετά την τροποποίηση του σεναρίου μου ακόμη μια φορά, τελικά τα κατάφερα με μόνο μια ερώτηση και μια συναλλαγή που θα μου 
δώσει σίγουρα το επιθυμητό βραβείο.

<rb-image zoom src="./images/hacked-johnnys-lab/6.png" alt="4th Attempt"/>


Τώρα, μετά από την παρακολούθηση 25 δευτερολέπτων του βίντεο (ταυτόχρονα συμπληρώνοντας τις λέξεις ενός μνημονικού), 
θα χρειαζόμουν μόνο 30 δευτερόλεπτα ως μέγιστο για να κλέψω το έπαθλο. Το κατάφερα.

<rb-image zoom src="./images/hacked-johnnys-lab/7.png" alt="Discord Bot Notification"/>



