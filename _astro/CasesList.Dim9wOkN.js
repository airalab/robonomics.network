import{v as V}from"./runtime-dom.esm-bundler.BpsM3NMx.js";import{t as N}from"./translate.BxCcAe83.js";import{_ as O}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as o,a as t,b as p,t as l,F as x,g as w,h as B,d as P,r as i,o as r,n as T}from"./runtime-core.esm-bundler.Ck1WV_rV.js";import"./preload-helper.CLcXU_4U.js";import"./runtime.DElhbG0w.js";const z={__name:"CasesList",props:{items:{type:Array,default:[]}},setup(D,{expose:d}){d();const f=D,e=P(()=>f.items.cases),m=i("recent"),u=i("any progress"),s=i([]),g=i(["All",...new Set(e.value.flatMap(a=>a.tags.map(n=>n.toLowerCase())))]),v=i(1),y=i(9),M=i(3),b=i(null),h=i(!1),k=i(!1),S=P(()=>{let a=[];return s.value.length?(e.value.forEach(n=>{const c=_=>n.tags.includes(_);s.value.some(c)&&a.push(n)}),b.value=a.length):b.value=null,a.length?a=C(L(a)):a=C(L(e.value)),v.value===1?a.slice(0,v.value*y.value):a.slice(0,M.value*(v.value-1)+y.value)});function L(a){return m.value==="recent"?a.sort((n,c)=>new Date(c.updated)-new Date(n.updated)):a.sort((n,c)=>new Date(n.created)-new Date(c.created))}function C(a){if(u.value!=="any progress"){const n=a.filter(_=>_.progress&&!_.progress.indexOf(u.value)),c=a.filter(_=>_.progress&&_.progress.indexOf(u.value));return[...n,...c]}return a}function H(a){!s.value.includes(a)&&a!=="all"?s.value.push(a):s.value=s.value.filter(n=>n!==a),a==="all"&&(s.value=[])}function E(){h.value||k.value||(h.value=!0,setTimeout(()=>{S.value.length===e.value.length&&(k.value=!0),v.value++,h.value=!1},500))}const A={props:f,cases:e,caseDate:m,caseProgress:u,currTags:s,tags:g,currentPage:v,visible:y,showNext:M,tagsArrayLength:b,isLoading:h,noMorePosts:k,filteredCases:S,filterDate:L,filterProgress:C,activateTag:H,nextPage:E,ref:i,computed:P,get $tr(){return N}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},F={class:"cases__banner layout layout__content"},U={class:"cases-tags"},j={class:"cases__small-text"},q={class:"cases-tags__wrapper"},G=["onClick"],J={key:0,class:"delete-tag"},K={class:"cases-filter"},Q={class:"cases-filter__option"},W={class:"cases__small-text"},X={value:"any progress"},Y={value:"complete"},Z={value:"proceeding"},R={class:"cases-filter__option"},I={class:"cases__small-text"},$={value:"recent"},ee={value:"earliest"},se={key:0,class:"layout blog_grid text-center cases__wrapper list-simple"},te=["href"],ae=["src"],oe={class:"post-card__content"},re=["href"],ne=["innerHTML"],le=["innerHTML"],ie={class:"post-card__cases-bottom"},ce={class:"post-card__tags"},_e=["disabled"],de={key:0,class:"spinner"},ue={key:1},ge={key:2};function ve(D,d,f,e,m,u){return r(),o("div",null,[t("div",F,[t("div",U,[t("span",j,l(e.$tr("By interest:")),1),t("div",q,[(r(!0),o(x,null,w(e.tags,s=>(r(),o("div",{class:T(["cases__tag",{active:e.currTags.includes(s)}]),key:s,onClick:g=>e.activateTag(s)},[t("span",null,l(s),1),e.currTags.includes(s)?(r(),o("span",J)):p("",!0)],10,G))),128))])]),t("div",K,[t("div",Q,[t("span",W,l(e.$tr("Sort by progress:")),1),B(t("select",{"onUpdate:modelValue":d[0]||(d[0]=s=>e.caseProgress=s)},[t("option",X,l(e.$tr("Any progress")),1),t("option",Y,l(e.$tr("Complete")),1),t("option",Z,l(e.$tr("Proceeding")),1)],512),[[V,e.caseProgress]])]),t("div",R,[t("span",I,l(e.$tr("Sort by time:")),1),B(t("select",{"onUpdate:modelValue":d[1]||(d[1]=s=>e.caseDate=s)},[t("option",$,l(e.$tr("Recent")),1),t("option",ee,l(e.$tr("Earliest")),1)],512),[[V,e.caseDate]])])])]),e.filteredCases.length>0?(r(),o("ul",se,[(r(!0),o(x,null,w(e.filteredCases,s=>(r(),o("li",{class:"cases__item",key:s.id},[t("div",{class:T(["post-card oldy post-card--case",{"in-progress":!s.done}])},[t("a",{href:s.done?"/"+s.path+"/":"/cases/",target:"_blank","aria-label":"learn more about the case"},[s.cover_image?(r(),o("img",{key:0,alt:"{caseItem.title}",class:"post-card__image",src:`/images/cases/${s.cover_image}`,loading:"lazy"},null,8,ae)):p("",!0)],8,te),t("div",oe,[t("a",{href:s.done?"/"+s.path+"/":"/cases/",target:"_blank","aria-label":"learn more about the case"},[t("h4",{class:"post-card__title",innerHTML:s.title},null,8,ne)],8,re),t("p",{class:"post-card__description",innerHTML:s.description},null,8,le),t("div",ie,[t("div",ce,[(r(!0),o(x,null,w(s.tags,g=>(r(),o("span",{key:g,class:"post-card__tag"},l(g),1))),128))]),t("div",{class:T(["post-card__status",{progress:s.progress==="proceeding"}])},null,2)])])],2)]))),128))])):p("",!0),(e.tagsArrayLength?e.filteredCases.length!==e.tagsArrayLength:e.filteredCases.length!==e.cases.length)?(r(),o("button",{key:1,class:"btn-show-more",onClick:e.nextPage,disabled:e.isLoading||e.noMorePosts},[e.isLoading?(r(),o("div",de)):p("",!0),e.isLoading?(r(),o("span",ue,"Loading...")):(r(),o("span",ge,l(e.$tr("Show more")),1))],8,_e)):p("",!0)])}const ke=O(z,[["render",ve],["__scopeId","data-v-ddd7c949"]]);export{ke as default};
