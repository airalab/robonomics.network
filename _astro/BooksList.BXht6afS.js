import M from"./LoaderSpin.Dq8csXDf.js";import{_ as P}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as k,b as E,e as c,a as p,t as G,j as $,F as D,r as B,d as _,o as U,f as R}from"./runtime-core.esm-bundler.DfkMFF3I.js";import{t as f}from"./translate.ChXvXTri.js";import"./runtime-dom.esm-bundler.DgKUaoMa.js";/* empty css                         */import"./preload-helper.CLcXU_4U.js";import"./runtime.DElhbG0w.js";let T=["https://ipfs.url.today/","https://ipfs.io/","https://flk-ipfs.xyz/","https://ipfs.cyou/","https://storry.tv/","https://dweb.link/","https://gateway.pinata.cloud/","https://hardbin.com/","https://ipfs.runfission.com/","https://ipfs.eth.aragon.network/","https://nftstorage.link/","https://4everland.io/","https://w3s.link/","https://trustless-gateway.link/"],y=[],w=[],h=null;const S="ipfs-smart-gateway:",g={stopOnFirstSuccess:!1,persistStorage:!0,timeout:3e3};function j(t={}){Object.assign(g,t)}function u(t){let e=t.trim();return/^[a-z][a-z\d+\-.]*:\/\//i.test(e)||(e="https://"+e),e=e.replace(/\/ipfs\/?$/,""),e=e.replace(/\/+$/,""),e}function I(t){Array.isArray(t)&&(T=t.filter(Boolean).map(u))}function C(){return T.slice()}function O(t){if(!Array.isArray(t))return;const e=t.map(u).filter(Boolean),s=T.map(u),o=e.filter(a=>!s.includes(a)),r=v(),n=Array.from(new Set([...r,...o]));if(n.length>15)throw new Error("Maximum of 15 user gateways exceeded");y=n,g.persistStorage&&localStorage.setItem(`${S}user-gateways`,JSON.stringify(y))}function q(t){if(!Array.isArray(t))return;const e=t.map(u);y=v().filter(o=>!e.includes(o)),g.persistStorage&&localStorage.setItem(`${S}user-gateways`,JSON.stringify(y))}function v(){if(!g.persistStorage)return y.slice();try{const t=JSON.parse(localStorage.getItem(`${S}user-gateways`));return Array.isArray(t)?t.map(u):[]}catch{return[]}}function Z(){y=v()}function z(){return[...C(),...v()]}function J(){return w.slice()}function K(){return h}function L(t){h=u(t),g.persistStorage&&localStorage.setItem(`${S}picked`,h)}function V(){const t=localStorage.getItem(`${S}picked`);t&&(h=u(t))}async function W(t,e,s=g.timeout){const o=new AbortController,r=setTimeout(()=>o.abort(),s),n=performance.now();try{const a=await fetch(`${t}/ipfs/${e}`,{method:"HEAD",signal:o.signal});return clearTimeout(r),a.ok?performance.now()-n:null}catch{return clearTimeout(r),null}}async function H(t={}){const{cid:e="bafybeibwzifw52ttrkqlikfzext5akxu7lz4xiwjgwzmqcpdzmp3n5vnbe",retry:s=0,retryDelay:o=1e3,onStart:r,onSuccess:n,onFail:a}=t;Z(),V(),r&&r();const x=z();let d=[];for(let l=0;l<=s;l++){d=[],await Promise.all(x.map(async i=>{let m="unreachable",A=null;try{const N=await W(i,e);N!==null&&(m="available",A=N)}catch{}const Q={url:i,status:m,time:A};d.push(Q),m==="available"&&n&&n(Q),m!=="available"&&a&&a(Q)}));const b=d.filter(i=>i.time!==null);if(b.length>0||l===s)return w=b.sort((i,m)=>i.time-m.time),w.length&&L(w[0].url),w;await new Promise(i=>setTimeout(i,o))}return w=[],[]}async function X(t,e){switch(e){case"json":return await t.json();case"blob":return await t.blob();default:return await t.text()}}async function Y(t,e="text"){const s=w.map(n=>n.url),o=z().filter(n=>!s.includes(n)),r=[...s,...o.sort(()=>Math.random()-.5)];for(const n of r)try{const a=await fetch(`${n}/ipfs/${t}`);if(a.ok)return await X(a,e)}catch{}return null}async function tt(t,e="text"){if(!h)return null;try{const s=await fetch(`${h}/ipfs/${t}`);if(s.ok)return await X(s,e)}catch{}return null}const ot=Object.freeze(Object.defineProperty({__proto__:null,checkGateways:H,configure:j,fetchFromPicked:tt,fetchWithFallback:Y,getAllGateways:z,getDefaultGateways:C,getPickedGateway:K,getSortedGateways:J,getUserGateways:v,loadPickedGatewayFromCache:V,loadUserGatewaysFromCache:Z,measureGateway:W,normalizeGatewayUrl:u,removeUserGateways:q,setDefaultGateways:I,setPickedGateway:L,setUserGateways:O},Symbol.toStringTag,{value:"Module"})),F=15e3,et={__name:"BooksItem",props:{book:Object,gateway:String},setup(t,{expose:e}){e();const s=t,o=_(!0),r=_([]),n=async(d,l=F)=>{const b=new AbortController,i=setTimeout(()=>b.abort(),l);try{return(await fetch(d,{method:"HEAD",cache:"no-store",signal:b.signal})).ok}catch{return!1}finally{clearTimeout(i)}},a=async()=>{const d=await Promise.all(s.book.options.map(async l=>{const b=s.gateway+l.link,m=await n(b)?b:l.static;return{...l,finalUrl:m}}));r.value=d};U(async()=>{await a(),o.value=!1});const x={props:s,loading:o,resolvedOptions:r,TIMEOUT_MS:F,fetchGateway:n,resolveLinks:a,ref:_,onMounted:U,Spinner:M};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},st={key:0,class:"e-books__item"},nt=["href"],at=["src","alt"],rt={class:"e-books__content"},it={class:"e-book__header"},ct={key:1,class:"e-books__links"},lt=["href"];function mt(t,e,s,o,r,n){return s.book&&s.book.options?(c(),k("li",st,[o.resolvedOptions.length?(c(),k("a",{key:0,class:"e-books__img",href:o.resolvedOptions[0].finalUrl,"aria-label":"check the book",target:"_blank"},[p("img",{src:`/images/books/${s.book.img}`,alt:s.book.title,loading:"lazy"},null,8,at)],8,nt)):E("",!0),p("div",rt,[p("div",it,[p("span",null,G(s.book.year),1),p("h3",null,G(s.book.title),1)]),p("div",null,[o.loading?(c(),$(o.Spinner,{key:0})):(c(),k("div",ct,[(c(!0),k(D,null,B(o.resolvedOptions,a=>(c(),k("a",{key:a.name,href:a.finalUrl,target:"_blank"},G(a.text),9,lt))),128))]))])])])):E("",!0)}const kt=P(et,[["render",mt],["__scopeId","data-v-2891645d"]]),bt={__name:"BooksList",setup(t,{expose:e}){e();const s=[{id:0,title:f("Almanac"),img:"docs-book-6.webp",year:"2024>>2025",options:[{link:"QmZhbgDPFXbZUb419zt6firGHGcRTF1Bu6BsK7qTKsffQh",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2024-2025/Robonomics.network-Almanac-2024-en.pdf",name:"book2024-2025en"},{link:"QmSQZsMLfBCYPAXKHGGbzH5U56W3v5RZt55hbBnG8qEmL9",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2024-2025/Robonomics.network-Almanac-2024-ru.pdf",name:"book2024-2025ru"}]},{id:1,title:f("Robonomics R&D"),img:"docs-book-5.webp",year:" 2023 & 2024",options:[{link:"QmaCXn8RdSdh4oxX3R5nzNSfoUPiLMLM4JmLSk1WnYi5ah",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2023-2024/robonomics.network-book-2023-2024-en.pdf",name:"book2023-2024en"},{link:"Qmd8sSoGokc1UeAbbAfmEPJTubWEpWGetYGyj9MCpwmE42",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2023-2024/robonomics.network-book-2023-2024-ru.pdf",name:"book2023-2024ru"}]},{id:2,title:f("R&D 18-28"),img:"docs-book-4.webp",year:"2022",options:[{link:"QmZK64M7M31mkMsDd8yQa1dfX4a4KeDCyaUMsTuzsKq6LC",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2022/robonomics.network-book-2022-en.pdf",name:"book2022en"},{link:"QmNsiaWWFw4ZoqAnW5vuTXNz2jwYBu7ShyXSYqU1uNDjrF",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2022/robonomics.network-book-2022-ru.pdf",name:"book2022ru"}]},{id:3,title:f("R&D 1-17"),img:"docs-book-3.webp",year:"2021",options:[{link:"QmRHvtsEViqHFN6Mt66p9o5MvvzB2H5uvfMTi8maAnLmfi",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2021-cases/Robonomics.network-r-n-d-cases-2021-en.pdf",name:"book2021en"},{link:"QmUbQTQknKLuDB8SmJF9pUhkTPdJbXp5ghDwp7oXwwDb9V",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2021-cases/Robonomics.network-r-n-d-cases-2021-ru.pdf",name:"book2021ru"},{link:"QmU8CFPD9bQheKJhKdyAZ11GNhuqHKPok5Tu8bUrNjCZtg",text:"ES",id:2,static:"https://static.robonomics.network/docs/book-2021-cases/Robonomics.network-r-n-d-cases-2021-en.pdf",name:"book2021es"}]},{id:4,title:f("Robot economics"),img:"docs-book-2.webp",year:"2018",options:[{link:"QmQ3k8p9SQS5wjovPcjUtQceRZZ6nv3Eqirt1vVQ2wP2JL",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-2-2018/robonomics.network-book-the-economy-of-robots-2-2018-en.pdf",name:"book2018en"},{link:"QmUqNnzdZnic61UYTuKT9EzBNzMW6jc5uHSFk4Xzd3iM93",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-2-2018/robonomics.network-book-the-economy-of-robots-2-2018-ru.pdf",name:"book2018ru"},{link:"QmXhWarATZNTy3CweoVAdy4aTMrGMCsipo3gPSWVsUyQW6",text:"IT",id:2,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-2-2018/robonomics.network-book-the-economy-of-robots-2-2018-it.pdf",name:"book2018it"}]},{id:5,title:f("Robot economics"),img:"docs-book-1.webp",year:"2017",options:[{link:"QmWue3YfuZvuRvgcNb4vZuheX9TaZ9E1b8aCdxSoaGTbVN",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-1-2017/robonomics.network-book-the-economy-of-robots-1-2017-en.pdf",name:"book2017en"},{link:"QmUjBPgDzmHFHiDkQAG93szJQguiZiowm9sedFMhPfQP4y",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-1-2017/robonomics.network-book-the-economy-of-robots-1-2017-ru.pdf",name:"book2017ru"},{link:"QmTp3srjo3r1L2TKpAEGFafjdzSCTKJT9kkBEkCQDEF6tz",text:"DE",id:2,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-1-2017/robonomics.network-book-the-economy-of-robots-1-2017-de.pdf",name:"book2017de"}]}];j({stopOnFirstSuccess:!0,persistStorage:!1,timeout:3e3}),O(["https://gw.crust-gateway.xyz","https://gw.crust-gateway.com","https://gateway.pinata.cloud","https://ipfs.io"]);const o=_(null);U(async()=>{try{await H({cid:"QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C"});const n=K();o.value=n||"https://gw.crust-gateway.xyz/ipfs/"}catch(n){console.error("❌ Gateway fetch failed. Using fallback.",n)}});const r={books:s,gateway:o,ref:_,onMounted:U,get ipfsSmartGateway(){return ot},BooksItem:kt,Spinner:M,get $tr(){return f}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},ut={class:"books__list"},dt={key:0,class:"list-simple grid-3 animate-inside in-viewport"},ft={key:1};function pt(t,e,s,o,r,n){return c(),k("div",ut,[p("h2",null,G(o.$tr("Download books about Robonomics")),1),o.gateway?(c(),k("ul",dt,[(c(),k(D,null,B(o.books,a=>R(o.BooksItem,{key:a.id,book:a,gateway:o.gateway},null,8,["book","gateway"])),64))])):(c(),k("div",ft,[R(o.Spinner)]))])}const Gt=P(bt,[["render",pt],["__scopeId","data-v-755dc6f1"]]);export{Gt as default};
