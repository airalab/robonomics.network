import{v as B}from"./runtime-dom.esm-bundler.DgKUaoMa.js";import{t as N}from"./translate.DWVH66Y9.js";import{_ as O}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as o,b as g,a as t,t as l,F as w,r as x,w as V,g as P,d as i,e as r,n as T}from"./runtime-core.esm-bundler.DfkMFF3I.js";import"./preload-helper.CLcXU_4U.js";import"./runtime.DElhbG0w.js";const z={__name:"CasesList",props:{items:{type:Array,default:[]},tagsList:{type:Boolean,default:!1}},setup(D,{expose:_}){_();const u=D,e=P(()=>u.tagsList?u.items:u.items.cases),m=i("recent"),v=i("any progress"),s=i([]),h=i(["All",...new Set(e.value.flatMap(a=>a.tags.map(n=>n.toLowerCase())))]),p=i(1),y=i(9),M=i(3),L=i(null),f=i(!1),b=i(!1),S=P(()=>{let a=[];return s.value.length?(e.value.forEach(n=>{const c=d=>n.tags.includes(d);s.value.some(c)&&a.push(n)}),L.value=a.length):L.value=null,a.length?a=C(k(a)):a=C(k(e.value)),p.value===1?a.slice(0,p.value*y.value):a.slice(0,M.value*(p.value-1)+y.value)});function k(a){return m.value==="recent"?a.sort((n,c)=>new Date(c.updated)-new Date(n.updated)):a.sort((n,c)=>new Date(n.created)-new Date(c.created))}function C(a){if(v.value!=="any progress"){const n=a.filter(d=>d.progress&&!d.progress.indexOf(v.value)),c=a.filter(d=>d.progress&&d.progress.indexOf(v.value));return[...n,...c]}return a}function H(a){!s.value.includes(a)&&a!=="all"?s.value.push(a):s.value=s.value.filter(n=>n!==a),a==="all"&&(s.value=[])}function E(){f.value||b.value||(f.value=!0,setTimeout(()=>{S.value.length===e.value.length&&(b.value=!0),p.value++,f.value=!1},500))}const A={props:u,cases:e,caseDate:m,caseProgress:v,currTags:s,tags:h,currentPage:p,visible:y,showNext:M,tagsArrayLength:L,isLoading:f,noMorePosts:b,filteredCases:S,filterDate:k,filterProgress:C,activateTag:H,nextPage:E,ref:i,computed:P,get $tr(){return N}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},F={key:0,class:"cases__banner layout layout__content"},U={class:"cases-tags"},j={class:"cases__small-text"},q={class:"cases-tags__wrapper"},G=["onClick"],J={key:0,class:"delete-tag"},K={class:"cases-filter"},Q={class:"cases-filter__option"},W={class:"cases__small-text"},X={value:"any progress"},Y={value:"complete"},Z={value:"proceeding"},R={class:"cases-filter__option"},I={class:"cases__small-text"},$={value:"recent"},ee={value:"earliest"},se={key:1,class:"layout blog_grid text-center cases__wrapper list-simple"},te=["href"],ae=["src"],oe={class:"post-card__content"},re=["href"],ne=["innerHTML"],le=["innerHTML"],ie={class:"post-card__cases-bottom"},ce={class:"post-card__tags"},de=["disabled"],_e={key:0,class:"spinner"},ue={key:1},ge={key:2};function ve(D,_,u,e,m,v){return r(),o("div",null,[u.tagsList?g("",!0):(r(),o("div",F,[t("div",U,[t("span",j,l(e.$tr("By interest:")),1),t("div",q,[(r(!0),o(w,null,x(e.tags,s=>(r(),o("div",{class:T(["cases__tag",{active:e.currTags.includes(s)}]),key:s,onClick:h=>e.activateTag(s)},[t("span",null,l(s),1),e.currTags.includes(s)?(r(),o("span",J)):g("",!0)],10,G))),128))])]),t("div",K,[t("div",Q,[t("span",W,l(e.$tr("Sort by progress:")),1),V(t("select",{"onUpdate:modelValue":_[0]||(_[0]=s=>e.caseProgress=s)},[t("option",X,l(e.$tr("Any progress")),1),t("option",Y,l(e.$tr("Complete")),1),t("option",Z,l(e.$tr("Proceeding")),1)],512),[[B,e.caseProgress]])]),t("div",R,[t("span",I,l(e.$tr("Sort by time:")),1),V(t("select",{"onUpdate:modelValue":_[1]||(_[1]=s=>e.caseDate=s)},[t("option",$,l(e.$tr("Recent")),1),t("option",ee,l(e.$tr("Earliest")),1)],512),[[B,e.caseDate]])])])])),e.filteredCases.length>0?(r(),o("ul",se,[(r(!0),o(w,null,x(e.filteredCases,s=>(r(),o("li",{class:"cases__item",key:s.id},[t("div",{class:T(["post-card oldy post-card--case",{"in-progress":!s.done}])},[t("a",{href:s.done?"/"+s.path+"/":"/cases/","aria-label":"learn more about the case"},[s.cover_image?(r(),o("img",{key:0,alt:"{caseItem.title}",class:"post-card__image",src:`/images/cases/${s.cover_image}`,loading:"lazy"},null,8,ae)):g("",!0)],8,te),t("div",oe,[t("a",{href:s.done?"/"+s.path+"/":"/cases/","aria-label":"learn more about the case"},[t("h4",{class:"post-card__title",innerHTML:e.$tr(s.title)},null,8,ne)],8,re),t("p",{class:"post-card__description",innerHTML:e.$tr(s.description)},null,8,le),t("div",ie,[t("div",ce,[(r(!0),o(w,null,x(s.tags,h=>(r(),o("span",{key:h,class:"post-card__tag"},l(h),1))),128))]),t("div",{class:T(["post-card__status",{progress:s.progress==="proceeding"}])},null,2)])])],2)]))),128))])):g("",!0),(e.tagsArrayLength?e.filteredCases.length!==e.tagsArrayLength:e.filteredCases.length!==e.cases.length)?(r(),o("button",{key:2,class:"btn-show-more",onClick:e.nextPage,disabled:e.isLoading||e.noMorePosts},[e.isLoading?(r(),o("div",_e)):g("",!0),e.isLoading?(r(),o("span",ue,"Loading...")):(r(),o("span",ge,l(e.$tr("Show more")),1))],8,de)):g("",!0)])}const be=O(z,[["render",ve],["__scopeId","data-v-6a4d2b29"]]);export{be as default};
