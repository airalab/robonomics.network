import F from"./LoaderSpin.Dq8csXDf.js";import{_ as M}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as u,b as W,e as m,a as b,t as G,j as X,F as D,r as P,d as _,o as U,f as N}from"./runtime-core.esm-bundler.DfkMFF3I.js";import{t as p}from"./translate.ChXvXTri.js";import"./runtime-dom.esm-bundler.DgKUaoMa.js";/* empty css                         */import"./preload-helper.CLcXU_4U.js";import"./runtime.DElhbG0w.js";let Q=["https://ipfs.url.today/","https://ipfs.io/","https://flk-ipfs.xyz/","https://ipfs.cyou/","https://storry.tv/","https://dweb.link/","https://gateway.pinata.cloud/","https://hardbin.com/","https://ipfs.runfission.com/","https://ipfs.eth.aragon.network/","https://nftstorage.link/","https://4everland.io/","https://w3s.link/","https://trustless-gateway.link/"],y=[],w=[],h=null;const S="ipfs-smart-gateway:",g={stopOnFirstSuccess:!1,persistStorage:!0,timeout:3e3};function B(t={}){Object.assign(g,t)}function d(t){let e=t.trim();return/^[a-z][a-z\d+\-.]*:\/\//i.test(e)||(e="https://"+e),e=e.replace(/\/ipfs\/?$/,""),e=e.replace(/\/+$/,""),e}function $(t){Array.isArray(t)&&(Q=t.filter(Boolean).map(d))}function C(){return Q.slice()}function j(t){if(!Array.isArray(t))return;const e=t.map(d).filter(Boolean),s=Q.map(d),o=e.filter(a=>!s.includes(a)),r=v(),n=Array.from(new Set([...r,...o]));if(n.length>15)throw new Error("Maximum of 15 user gateways exceeded");y=n,g.persistStorage&&localStorage.setItem(`${S}user-gateways`,JSON.stringify(y))}function J(t){if(!Array.isArray(t))return;const e=t.map(d);y=v().filter(o=>!e.includes(o)),g.persistStorage&&localStorage.setItem(`${S}user-gateways`,JSON.stringify(y))}function v(){if(!g.persistStorage)return y.slice();try{const t=JSON.parse(localStorage.getItem(`${S}user-gateways`));return Array.isArray(t)?t.map(d):[]}catch{return[]}}function O(){y=v()}function T(){return[...C(),...v()]}function q(){return w.slice()}function Z(){return h}function K(t){h=d(t),g.persistStorage&&localStorage.setItem(`${S}picked`,h)}function H(){const t=localStorage.getItem(`${S}picked`);t&&(h=d(t))}async function I(t,e,s=g.timeout){const o=new AbortController,r=setTimeout(()=>o.abort(),s),n=performance.now();try{const a=await fetch(`${t}/ipfs/${e}`,{method:"HEAD",signal:o.signal});return clearTimeout(r),a.ok?performance.now()-n:null}catch{return clearTimeout(r),null}}async function L(t={}){const{cid:e="bafybeibwzifw52ttrkqlikfzext5akxu7lz4xiwjgwzmqcpdzmp3n5vnbe",retry:s=0,retryDelay:o=1e3,onStart:r,onSuccess:n,onFail:a}=t;O(),H(),r&&r();const x=T();let f=[];for(let c=0;c<=s;c++){f=[],await Promise.all(x.map(async i=>{let l="unreachable",z=null;try{const E=await I(i,e);E!==null&&(l="available",z=E)}catch{}const A={url:i,status:l,time:z};f.push(A),l==="available"&&n&&n(A),l!=="available"&&a&&a(A)}));const k=f.filter(i=>i.time!==null);if(k.length>0||c===s)return w=k.sort((i,l)=>i.time-l.time),w.length&&K(w[0].url),w;await new Promise(i=>setTimeout(i,o))}return w=[],[]}async function V(t,e){switch(e){case"json":return await t.json();case"blob":return await t.blob();default:return await t.text()}}async function Y(t,e="text"){const s=w.map(n=>n.url),o=T().filter(n=>!s.includes(n)),r=[...s,...o.sort(()=>Math.random()-.5)];for(const n of r)try{const a=await fetch(`${n}/ipfs/${t}`);if(a.ok)return await V(a,e)}catch{}return null}async function tt(t,e="text"){if(!h)return null;try{const s=await fetch(`${h}/ipfs/${t}`);if(s.ok)return await V(s,e)}catch{}return null}const ot=Object.freeze(Object.defineProperty({__proto__:null,checkGateways:L,configure:B,fetchFromPicked:tt,fetchWithFallback:Y,getAllGateways:T,getDefaultGateways:C,getPickedGateway:Z,getSortedGateways:q,getUserGateways:v,loadPickedGatewayFromCache:H,loadUserGatewaysFromCache:O,measureGateway:I,normalizeGatewayUrl:d,removeUserGateways:J,setDefaultGateways:$,setPickedGateway:K,setUserGateways:j},Symbol.toStringTag,{value:"Module"})),R=15e3,et=3*24*3600*1e3,st={__name:"BooksItem",props:{book:Object,gateway:String},setup(t,{expose:e}){e();const s=t,o=_(!0),r=_([]),n=async(f,c=R)=>{const k=new AbortController,i=setTimeout(()=>k.abort(),c);try{return(await fetch(f,{method:"HEAD",cache:"no-store",signal:k.signal})).ok}catch{return!1}finally{clearTimeout(i)}},a=async()=>{const f=await Promise.all(s.book.options.map(async c=>{const k=s.gateway+c.link,l=await n(k)?k:c.static;return localStorage.setItem(c.name,JSON.stringify({link:l,date:new Date().toISOString()})),{...c,finalUrl:l}}));r.value=f};U(async()=>{await a(),o.value=!1});const x={props:s,loading:o,resolvedOptions:r,TIMEOUT_MS:R,MAX_CACHE_AGE:et,fetchGateway:n,resolveLinks:a,ref:_,onMounted:U,Spinner:F};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},nt={key:0,class:"e-books__item"},at=["href"],rt=["src","alt"],it={class:"e-books__content"},ct={class:"e-book__header"},lt={key:1,class:"e-books__links"},mt=["href"];function kt(t,e,s,o,r,n){return s.book&&s.book.options?(m(),u("li",nt,[b("a",{class:"e-books__img",href:o.resolvedOptions.length&&o.resolvedOptions[0].finalUrl,"aria-label":"check the book",target:"_blank"},[b("img",{src:`/images/books/${s.book.img}`,alt:s.book.title,loading:"lazy"},null,8,rt)],8,at),b("div",it,[b("div",ct,[b("span",null,G(s.book.year),1),b("h3",null,G(s.book.title),1)]),b("div",null,[o.loading?(m(),X(o.Spinner,{key:0})):(m(),u("div",lt,[(m(!0),u(D,null,P(o.resolvedOptions,a=>(m(),u("a",{key:a.name,href:a.finalUrl,target:"_blank"},G(a.text),9,mt))),128))]))])])])):W("",!0)}const bt=M(st,[["render",kt],["__scopeId","data-v-72724cb1"]]),ut={__name:"BooksList",setup(t,{expose:e}){e();const s=[{id:0,title:p("Almanac"),img:"docs-book-6.webp",year:"2024>>2025",options:[{link:"QmZhbgDPFXbZUb419zt6firGHGcRTF1Bu6BsK7qTKsffQh",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2024-2025/Robonomics.network-Almanac-2024-en.pdf",name:"book2024-2025en"},{link:"QmSQZsMLfBCYPAXKHGGbzH5U56W3v5RZt55hbBnG8qEmL9",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2024-2025/Robonomics.network-Almanac-2024-ru.pdf",name:"book2024-2025ru"}]},{id:1,title:p("Robonomics R&D"),img:"docs-book-5.webp",year:" 2023 & 2024",options:[{link:"QmaCXn8RdSdh4oxX3R5nzNSfoUPiLMLM4JmLSk1WnYi5ah",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2023-2024/robonomics.network-book-2023-2024-en.pdf",name:"book2023-2024en"},{link:"Qmd8sSoGokc1UeAbbAfmEPJTubWEpWGetYGyj9MCpwmE42",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2023-2024/robonomics.network-book-2023-2024-ru.pdf",name:"book2023-2024ru"}]},{id:2,title:p("R&D 18-28"),img:"docs-book-4.webp",year:"2022",options:[{link:"QmZK64M7M31mkMsDd8yQa1dfX4a4KeDCyaUMsTuzsKq6LC",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2022/robonomics.network-book-2022-en.pdf",name:"book2022en"},{link:"QmNsiaWWFw4ZoqAnW5vuTXNz2jwYBu7ShyXSYqU1uNDjrF",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2022/robonomics.network-book-2022-ru.pdf",name:"book2022ru"}]},{id:3,title:p("R&D 1-17"),img:"docs-book-3.webp",year:"2021",options:[{link:"QmRHvtsEViqHFN6Mt66p9o5MvvzB2H5uvfMTi8maAnLmfi",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-2021-cases/Robonomics.network-r-n-d-cases-2021-en.pdf",name:"book2021en"},{link:"QmUbQTQknKLuDB8SmJF9pUhkTPdJbXp5ghDwp7oXwwDb9V",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-2021-cases/Robonomics.network-r-n-d-cases-2021-ru.pdf",name:"book2021ru"},{link:"QmU8CFPD9bQheKJhKdyAZ11GNhuqHKPok5Tu8bUrNjCZtg",text:"ES",id:2,static:"https://static.robonomics.network/docs/book-2021-cases/Robonomics.network-r-n-d-cases-2021-en.pdf",name:"book2021es"}]},{id:4,title:p("Robot economics"),img:"docs-book-2.webp",year:"2018",options:[{link:"QmQ3k8p9SQS5wjovPcjUtQceRZZ6nv3Eqirt1vVQ2wP2JL",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-2-2018/robonomics.network-book-the-economy-of-robots-2-2018-en.pdf",name:"book2018en"},{link:"QmUqNnzdZnic61UYTuKT9EzBNzMW6jc5uHSFk4Xzd3iM93",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-2-2018/robonomics.network-book-the-economy-of-robots-2-2018-ru.pdf",name:"book2018ru"},{link:"QmXhWarATZNTy3CweoVAdy4aTMrGMCsipo3gPSWVsUyQW6",text:"IT",id:2,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-2-2018/robonomics.network-book-the-economy-of-robots-2-2018-it.pdf",name:"book2018it"}]},{id:5,title:p("Robot economics"),img:"docs-book-1.webp",year:"2017",options:[{link:"QmWue3YfuZvuRvgcNb4vZuheX9TaZ9E1b8aCdxSoaGTbVN",text:"EN",id:0,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-1-2017/robonomics.network-book-the-economy-of-robots-1-2017-en.pdf",name:"book2017en"},{link:"QmUjBPgDzmHFHiDkQAG93szJQguiZiowm9sedFMhPfQP4y",text:"RU",id:1,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-1-2017/robonomics.network-book-the-economy-of-robots-1-2017-ru.pdf",name:"book2017ru"},{link:"QmTp3srjo3r1L2TKpAEGFafjdzSCTKJT9kkBEkCQDEF6tz",text:"DE",id:2,static:"https://static.robonomics.network/docs/book-the-economy-of-robots-1-2017/robonomics.network-book-the-economy-of-robots-1-2017-de.pdf",name:"book2017de"}]}];B({stopOnFirstSuccess:!0,persistStorage:!1,timeout:3e3}),j(["https://gw.crust-gateway.xyz","https://gw.crust-gateway.com","https://gateway.pinata.cloud","https://ipfs.io"]);const o=_(null);U(async()=>{try{await L({cid:"QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C"});const n=Z();console.log(n),o.value=n||"https://gw.crust-gateway.xyz/ipfs/"}catch(n){console.error("âŒ Gateway fetch failed. Using fallback.",n)}});const r={books:s,gateway:o,ref:_,onMounted:U,get ipfsSmartGateway(){return ot},BooksItem:bt,Spinner:F,get $tr(){return p}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},dt={class:"books__list"},ft={key:0,class:"list-simple grid-3 animate-inside in-viewport"},pt={key:1};function wt(t,e,s,o,r,n){return m(),u("div",dt,[b("h2",null,G(o.$tr("Download books about Robonomics")),1),o.gateway?(m(),u("ul",ft,[(m(),u(D,null,P(o.books,a=>N(o.BooksItem,{key:a.id,book:a,gateway:o.gateway},null,8,["book","gateway"])),64))])):(m(),u("div",pt,[N(o.Spinner)]))])}const Ut=M(ut,[["render",wt],["__scopeId","data-v-74f89c18"]]);export{Ut as default};
